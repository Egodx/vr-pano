!function s(o,a,u){function c(i,e){if(!a[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[i]={exports:{}};o[i][0].call(r.exports,function(e){var t=o[i][1][e];return c(t||e)},r,r.exports,s,o,a,u)}return a[i].exports}for(var h="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,r,s){(function(t){var e=function(){this._tweens={},this._tweensAddedDuringUpdate={}};e.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(e=void 0!==e?e:a.now();0<i.length;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++)!1===this._tweens[i[n]].update(e)&&(this._tweens[i[n]]._isPlaying=!1,t||delete this._tweens[i[n]]);i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var n,i,a=new e;a.Group=e,a._nextId=0,a.nextId=function(){return a._nextId++},"undefined"==typeof window&&void 0!==t?a.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?a.now=window.performance.now.bind(window.performance):void 0!==Date.now?a.now=Date.now:a.now=function(){return(new Date).getTime()},a.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=a.Easing.Linear.None,this._interpolationFunction=a.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||a,this._id=a.nextId()},a.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?e:a.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object),this.stopChainedTweens()),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,i,n;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0),i=1<(i=(e-this._startTime)/this._duration)?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[t]){var r=this._valuesStart[t]||0,s=this._valuesEnd[t];s instanceof Array?this._object[t]=this._interpolationFunction(s,n):("string"==typeof s&&(s="+"===s.charAt(0)||"-"===s.charAt(0)?r+parseFloat(s):parseFloat(s)),"number"==typeof s&&(this._object[t]=r+(s-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,n),1!==i)return!0;if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var o=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=o}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);for(var a=0,u=this._chainedTweens.length;a<u;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}},a.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-a.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*a.Easing.Bounce.In(2*e):.5*a.Easing.Bounce.Out(2*e-1)+.5}}},a.Interpolation={Linear:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n),s=a.Interpolation.Utils.Linear;return t<0?s(e[0],e[1],n):1<t?s(e[i],e[i-1],i-n):s(e[r],e[i<r+1?i:r+1],n-r)},Bezier:function(e,t){for(var i=0,n=e.length-1,r=Math.pow,s=a.Interpolation.Utils.Bernstein,o=0;o<=n;o++)i+=r(1-t,n-o)*r(t,o)*e[o]*s(n,o);return i},CatmullRom:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n),s=a.Interpolation.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(r=Math.floor(n=i*(1+t))),s(e[(r-1+i)%i],e[r],e[(r+1)%i],e[(r+2)%i],n-r)):t<0?e[0]-(s(e[0],e[0],e[1],e[1],-n)-e[0]):1<t?e[i]-(s(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):s(e[r?r-1:0],e[r],e[i<r+1?i:r+1],e[i<r+2?i:r+2],n-r)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=a.Interpolation.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:(n=[1],function(e){var t=1;if(n[e])return n[e];for(var i=e;1<i;i--)t*=i;return n[e]=t}),CatmullRom:function(e,t,i,n,r){var s=.5*(i-e),o=.5*(n-t),a=r*r;return(2*t-2*i+s+o)*(r*a)+(-3*t+3*i-2*s-o)*a+s*r+t}}},i=this,"function"==typeof define&&define.amd?define([],function(){return a}):void 0!==r&&"object"==typeof s?r.exports=a:void 0!==i&&(i.TWEEN=a)}).call(this,e("_process"))},{_process:4}],2:[function(V,i,n){(function(F,G){var e,t;e=this,t=function(){"use strict";function c(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,t=void 0,r=void 0,a=function(e,t){d[n]=e,d[n+1]=t,2===(n+=2)&&(r?r(f):m())};var e="undefined"!=typeof window?window:void 0,s=e||{},o=s.MutationObserver||s.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==F&&"[object process]"==={}.toString.call(F),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var e=setTimeout;return function(){return e(f,1)}}var d=new Array(1e3);function f(){for(var e=0;e<n;e+=2){(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0}n=0}var M,p,g,y,m=void 0;function N(e,t){var i=arguments,n=this,r=new this.constructor(T);void 0===r[D]&&R(r);var s,o=n._state;return o?(s=i[o-1],a(function(){return _(o,r,s,n._result)})):O(n,r,e,t),r}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return b(t,e),t}m=u?function(){return F.nextTick(f)}:o?(p=0,g=new o(f),y=document.createTextNode(""),g.observe(y,{characterData:!0}),function(){y.data=p=++p%2}):h?((M=new MessageChannel).port1.onmessage=f,function(){return M.port2.postMessage(0)}):void 0===e&&"function"==typeof V?function(){try{var e=V("vertx");return t=e.runOnLoop||e.runOnContext,function(){t(f)}}catch(e){return l()}}():l();var D=Math.random().toString(36).substring(16);function T(){}var E=void 0,v=1,I=2,L=new k;function j(e){try{return e.then}catch(e){return L.error=e,L}}function A(e,t,i){var n,r,s,o;t.constructor===e.constructor&&i===N&&t.constructor.resolve===w?(s=e,(o=t)._state===v?S(s,o._result):o._state===I?C(s,o._result):O(o,void 0,function(e){return b(s,e)},function(e){return C(s,e)})):i===L?C(e,L.error):void 0===i?S(e,t):c(i)?(n=t,r=i,a(function(t){var i=!1,e=function(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}(r,n,function(e){i||(i=!0,n!==e?b(t,e):S(t,e))},function(e){i||(i=!0,C(t,e))},t._label);!i&&e&&(i=!0,C(t,e))},e)):S(e,t)}function b(e,t){var i;e===t?C(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(i=t)||"object"==typeof i&&null!==i?A(e,t,j(t)):S(e,t)}function x(e){e._onerror&&e._onerror(e._result),z(e)}function S(e,t){e._state===E&&(e._result=t,e._state=v,0!==e._subscribers.length&&a(z,e))}function C(e,t){e._state===E&&(e._state=I,e._result=t,a(x,e))}function O(e,t,i,n){var r=e._subscribers,s=r.length;e._onerror=null,r[s]=t,r[s+v]=i,r[s+I]=n,0===s&&e._state&&a(z,e)}function z(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,s=e._result,o=0;o<t.length;o+=3)n=t[o],r=t[o+i],n?_(i,n,r,s):r(s);e._subscribers.length=0}}function k(){this.error=null}var U=new k;function _(e,t,i,n){var r=c(i),s=void 0,o=void 0,a=void 0,u=void 0;if(r){if((s=function(e,t){try{return e(t)}catch(e){return U.error=e,U}}(i,n))===U?(u=!0,o=s.error,s=null):a=!0,t===s)return void C(t,new TypeError("A promises callback cannot return that same promise."))}else s=n,a=!0;t._state!==E||(r&&a?b(t,s):u?C(t,o):e===v?S(t,s):e===I&&C(t,s))}var Q=0;function R(e){e[D]=Q++,e._state=void 0,e._result=void 0,e._subscribers=[]}function P(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[D]||R(this.promise),i(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}function B(e){this[D]=Q++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof B?function(t,e){try{e(function(e){b(t,e)},function(e){C(t,e)})}catch(e){C(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function Y(){var e=void 0;if(void 0!==G)e=G;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=B}return P.prototype._enumerate=function(){for(var e=this.length,t=this._input,i=0;this._state===E&&i<e;i++)this._eachEntry(t[i],i)},P.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===w){var r=j(t);if(r===N&&t._state!==E)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===B){var s=new i(T);A(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},P.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===E&&(this._remaining--,e===I?C(n,i):this._result[t]=i),0===this._remaining&&S(n,this._result)},P.prototype._willSettleAt=function(e,t){var i=this;O(e,void 0,function(e){return i._settledAt(v,t,e)},function(e){return i._settledAt(I,t,e)})},B.all=function(e){return new P(this,e).promise},B.race=function(r){var s=this;return i(r)?new s(function(e,t){for(var i=r.length,n=0;n<i;n++)s.resolve(r[n]).then(e,t)}):new s(function(e,t){return t(new TypeError("You must pass an array to race."))})},B.resolve=w,B.reject=function(e){var t=new this(T);return C(t,e),t},B._setScheduler=function(e){r=e},B._setAsap=function(e){a=e},B._asap=a,B.prototype={constructor:B,then:N,catch:function(e){return this.then(null,e)}},Y(),B.polyfill=Y,B.Promise=B},"object"==typeof n&&void 0!==i?i.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}).call(this,V("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:4}],3:[function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty,f="function"!=typeof Object.create&&"~";function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function r(){}r.prototype._events=void 0,r.prototype.eventNames=function(){var e,t=this._events,i=[];if(!t)return i;for(e in t)n.call(t,e)&&i.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},r.prototype.listeners=function(e,t){var i=f?f+e:e,n=this._events&&this._events[i];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},r.prototype.emit=function(e,t,i,n,r,s){var o=f?f+e:e;if(!this._events||!this._events[o])return!1;var a,u,c=this._events[o],h=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,n),!0;case 5:return c.fn.call(c.context,t,i,n,r),!0;case 6:return c.fn.call(c.context,t,i,n,r,s),!0}for(u=1,a=new Array(h-1);u<h;u++)a[u-1]=arguments[u];c.fn.apply(c.context,a)}else{var l,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,i);break;default:if(!a)for(l=1,a=new Array(h-1);l<h;l++)a[l-1]=arguments[l];c[u].fn.apply(c[u].context,a)}}return!0},r.prototype.on=function(e,t,i){var n=new s(t,i||this),r=f?f+e:e;return this._events||(this._events=f?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):this._events[r]=n,this},r.prototype.once=function(e,t,i){var n=new s(t,i||this,!0),r=f?f+e:e;return this._events||(this._events=f?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):this._events[r]=n,this},r.prototype.removeListener=function(e,t,i,n){var r=f?f+e:e;if(!this._events||!this._events[r])return this;var s=this._events[r],o=[];if(t)if(s.fn)(s.fn!==t||n&&!s.once||i&&s.context!==i)&&o.push(s);else for(var a=0,u=s.length;a<u;a++)(s[a].fn!==t||n&&!s[a].once||i&&s[a].context!==i)&&o.push(s[a]);return o.length?this._events[r]=1===o.length?o[0]:o:delete this._events[r],this},r.prototype.removeAllListeners=function(e){return this._events&&(e?delete this._events[f?f+e:e]:this._events=f?{}:Object.create(null)),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=f,void 0!==t&&(t.exports=r)},{}],4:[function(e,t,i){var n,r,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,h=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?h=c.concat(h):d=-1,h.length&&M())}function M(){if(!l){var e=u(f);l=!0;for(var t=h.length;t;){for(c=h,h=[];++d<t;)c&&c[d].run();d=-1,t=h.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new p(e,t)),1!==h.length||l||u(M)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],5:[function(e,t,i){(function(Wa){(function(){var e={};(function(M){var e,o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){e!=Array.prototype&&e!=Object.prototype&&(e[t]=i.value)},c=void 0!==M&&M===this?this:void 0!==Wa&&null!=Wa?Wa:this;function t(){t=function(){},c.Symbol||(c.Symbol=n)}var i,n=(i=0,function(e){return"jscomp_symbol_"+(e||"")+i++});function r(){t();var e=c.Symbol.iterator;e||(e=c.Symbol.iterator=c.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&o(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return s(this)}}),r=function(){}}function s(e){var t,i=0;return t=function(){return i<e.length?{done:!1,value:e[i++]}:{done:!0}},r(),(t={next:t})[c.Symbol.iterator]=function(){return this},t}function h(e){r();var t=e[Symbol.iterator];return t?t.call(e):s(e)}function a(e,t){if(t){for(var i=c,n=e.split("."),r=0;r<n.length-1;r++){var s=n[r];s in i||(i[s]={}),i=i[s]}(s=t(r=i[n=n[n.length-1]]))!=r&&null!=s&&o(i,n,{configurable:!0,writable:!0,value:s})}}function v(e){return function(t){function r(e){return t.next(e)}function s(e){return t.throw(e)}return new Promise(function(i,n){!function e(t){t.done?i(t.value):Promise.resolve(t.value).then(r,s).then(e,n)}(t.next())})}(e())}function u(){this.f=!1,this.b=null,this.L=void 0,this.B=1,this.c=this.qa=0,this.h=this.a=null}function l(e){if(e.f)throw new TypeError("Generator is already running");e.f=!0}function d(e,t){e.a={pc:t,wc:!0},e.B=e.qa||e.c}function S(e,t,i){return e.B=i,{value:t}}function C(e){e.qa=0;var t=e.a.pc;return e.a=null,t}function f(e){this.a=new u,this.b=e}function p(t,e,i,n){try{var r=e.call(t.a.b,i);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.a.f=!1,r;var s=r.value}catch(e){return t.a.b=null,d(t.a,e),g(t)}return t.a.b=null,n.call(t.a,s),g(t)}function g(t){for(;t.a.B;)try{var e=t.b(t.a);if(e)return t.a.f=!1,{value:e.value,done:!1}}catch(e){t.a.L=void 0,d(t.a,e)}if(t.a.f=!1,t.a.a){if(e=t.a.a,t.a.a=null,e.wc)throw e.pc;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function y(t){this.next=function(e){return l(t.a),e=t.a.b?p(t,t.a.b.next,e,t.a.g):(t.a.g(e),g(t))},this.throw=function(e){return l(t.a),e=t.a.b?p(t,t.a.b.throw,e,t.a.g):(d(t.a,e),g(t))},this.return=function(e){return function(e,t){l(e.a);var i=e.a.b;return i?p(e,"return"in i?i.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),g(e))}(t,e)},r(),this[Symbol.iterator]=function(){return this}}function O(e,t){return y.prototype=e.prototype,new y(new f(t))}a("Promise",function(e){function a(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function u(t){return t instanceof a?t:new a(function(e){e(t)})}if(e)return e;t.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},t.prototype.f=function(){var e=this;this.c(function(){e.h()})};var i=c.setTimeout;t.prototype.c=function(e){i(e,0)},t.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var i=e[t];e[t]=null;try{i()}catch(e){this.g(e)}}}this.a=null},t.prototype.g=function(e){this.c(function(){throw e})},a.prototype.c=function(){function e(t){return function(e){n||(n=!0,t.call(i,e))}}var i=this,n=!1;return{resolve:e(this.m),reject:e(this.f)}},a.prototype.m=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof a)this.o(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.l(e):this.h(e)}},a.prototype.l=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.u(t,e):this.h(e)},a.prototype.f=function(e){this.i(2,e)},a.prototype.h=function(e){this.i(1,e)},a.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.j()},a.prototype.j=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)r.b(this.a[e]);this.a=null}};var r=new t;return a.prototype.o=function(e){var t=this.c();e.tb(t.resolve,t.reject)},a.prototype.u=function(e,t){var i=this.c();try{e.call(t,i.resolve,i.reject)}catch(e){i.reject(e)}},a.prototype.then=function(e,t){function i(t,e){return"function"==typeof t?function(e){try{n(t(e))}catch(e){r(e)}}:e}var n,r,s=new a(function(e,t){n=e,r=t});return this.tb(i(e,n),i(t,r)),s},a.prototype.catch=function(e){return this.then(void 0,e)},a.prototype.tb=function(e,t){function i(){switch(n.b){case 1:e(n.g);break;case 2:t(n.g);break;default:throw Error("Unexpected state: "+n.b)}}var n=this;null==this.a?r.b(i):this.a.push(i)},a.resolve=u,a.reject=function(i){return new a(function(e,t){t(i)})},a.race=function(r){return new a(function(e,t){for(var i=h(r),n=i.next();!n.done;n=i.next())u(n.value).tb(e,t)})},a.all=function(e){var s=h(e),o=s.next();return o.done?u([]):new a(function(i,e){function t(t){return function(e){n[t]=e,0==--r&&i(n)}}for(var n=[],r=0;n.push(void 0),r++,u(o.value).tb(t(n.length-1),e),!(o=s.next()).done;);})},a}),a("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(e){return Promise.resolve(t()).then(function(){return e})},function(e){return Promise.resolve(t()).then(function(){throw e})})}}),u.prototype.g=function(e){this.L=e},u.prototype.return=function(e){this.a={return:e},this.B=this.c},u.prototype.X=function(e){this.B=e},a("Array.prototype.find",function(e){return e||function(e,t){e:{var i=this;i instanceof String&&(i=String(i));for(var n=i.length,r=0;r<n;r++){var s=i[r];if(e.call(t,s,r,i)){i=s;break e}}i=void 0}return i}});var m=this;function N(e,t){var i,n=e.split("."),r=m;n[0]in r||!r.execScript||r.execScript("var "+n[0]);for(;n.length&&(i=n.shift());)n.length||void 0===t?r=r[i]?r[i]:r[i]={}:r[i]=t}function w(e,n){function t(){}t.prototype=n.prototype,e.ff=n.prototype,e.prototype=new t,(e.prototype.constructor=e).df=function(e,t,i){return n.prototype[t].apply(e,Array.prototype.slice.call(arguments,2))}}function D(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function T(e,t,i){var n=Math.pow(e.c,t);i=i*(1-n)+n*e.a,isNaN(i)||(e.a=i,e.b+=t)}function E(e){return e.a/(1-Math.pow(e.c,e.b))}function I(){this.b=new D(2),this.c=new D(5),this.a=0}function L(){}function j(){}function z(e,t,i,n){this.severity=e,this.category=t,this.code=i,this.data=Array.prototype.slice.call(arguments,3),this.handled=!1}m.a=!0,I.prototype.getBandwidthEstimate=function(e){return this.a<128e3?e:Math.min(E(this.b),E(this.c))},M.console&&M.console.log.bind&&(L=console.warn.bind(console)),N("shaka.util.Error",z),z.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},z.Severity={RECOVERABLE:1,CRITICAL:2},z.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},z.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013};var A=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function b(e){var t;e instanceof b?(x(this,e.ha),this.Ga=e.Ga,this.ka=e.ka,k(this,e.Ra),this.aa=e.aa,U(this,H(e.a)),this.Aa=e.Aa):e&&(t=String(e).match(A))?(x(this,t[1]||"",!0),this.Ga=_(t[2]||""),this.ka=_(t[3]||"",!0),k(this,t[4]),this.aa=_(t[5]||"",!0),U(this,t[6]||"",!0),this.Aa=_(t[7]||"")):this.a=new V(null)}function x(e,t,i){e.ha=i?_(t,!0):t,e.ha&&(e.ha=e.ha.replace(/:$/,""))}function k(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Ra=t}else e.Ra=null}function U(e,t,i){e.a=t instanceof V?t:(i||(t=Q(t,F)),new V(t))}function _(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Q(e,t,i){return"string"==typeof e?(e=encodeURI(e).replace(t,R),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function R(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(e=b.prototype).ha="",e.Ga="",e.ka="",e.Ra=null,e.aa="",e.Aa="",e.toString=function(){var e=[],t=this.ha;if(t&&e.push(Q(t,P,!0),":"),t=this.ka){e.push("//");var i=this.Ga;i&&e.push(Q(i,P,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Ra)&&e.push(":",String(t))}return(t=this.aa)&&(this.ka&&"/"!=t.charAt(0)&&e.push("/"),e.push(Q(t,"/"==t.charAt(0)?Y:B,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Aa)&&e.push("#",Q(t,G)),e.join("")},e.resolve=function(e){var t=new b(this);"data"===t.ha&&(t=new b);var i=!!e.ha;i?x(t,e.ha):i=!!e.Ga,i?t.Ga=e.Ga:i=!!e.ka,i?t.ka=e.ka:i=null!=e.Ra;var n=e.aa;if(i)k(t,e.Ra);else if(i=!!e.aa){if("/"!=n.charAt(0))if(this.ka&&!this.aa)n="/"+n;else{var r=t.aa.lastIndexOf("/");-1!=r&&(n=t.aa.substr(0,r+1)+n)}if(".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){r=0==n.lastIndexOf("/",0),n=n.split("/");for(var s=[],o=0;o<n.length;){var a=n[o++];"."==a?r&&o==n.length&&s.push(""):".."==a?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),r&&o==n.length&&s.push("")):(s.push(a),r=!0)}n=s.join("/")}}return i?t.aa=n:i=""!==e.a.toString(),i?U(t,H(e.a)):i=!!e.Aa,i&&(t.Aa=e.Aa),t};var P=/[#\/\?@]/g,B=/[#\?:]/g,Y=/[#\?]/g,F=/[#\?@]/g,G=/#/g;function V(e){this.b=e||null}function H(e){var t=new V;if(t.b=e.b,e.a){var i,n={};for(i in e.a)n[i]=e.a[i].concat();t.a=n,t.c=e.c}return t}function W(){var i,n,e=new Promise(function(e,t){i=e,n=t});return e.resolve=i,e.reject=n,e}function X(e,t){var i={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==e.maxAttempts?i.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?i.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?i.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?i.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=t||!1)&&(this.a=1)}function Z(e){if(e.a>=e.i){if(!e.c)return Promise.reject();e.a=1,e.b=e.f}var t=new W;return e.a?(M.setTimeout(t.resolve,e.b*(1+(2*Math.random()-1)*e.h)),e.b*=e.g):t.resolve(),e.a++,t}function K(e,t){this.promise=e,this.b=t,this.a=!1}function q(e){return new K(Promise.reject(e),function(){return Promise.resolve()})}function J(){var e=Promise.reject(new z(2,7,7001));return e.catch(function(){}),new K(e,function(){return Promise.resolve()})}function $(e){return new K(Promise.resolve(e),function(){return Promise.resolve()})}function ee(e){return new K(e,function(){return e.catch(function(){})})}function te(e){return new K(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function ie(e,t,i){try{var n=e(t);return n&&n.promise&&n.abort?(i.resolve(n.promise),function(){return n.abort()}):(i.resolve(n),function(){return Promise.resolve(n).then(function(){}).catch(function(){})})}catch(e){return i.reject(e),function(){return Promise.resolve()}}}function ne(e,t){for(var i=[],n=0;n<e.length;++n){for(var r=!1,s=0;s<i.length&&!(r=t?t(e[n],i[s]):e[n]===i[s]);++s);r||i.push(e[n])}return i}function re(e,t,i){for(var n=0;n<e.length;++n)if(i(e[n],t))return n;return-1}function se(e,t){var i=e.indexOf(t);-1<i&&e.splice(i,1)}function oe(e,t,i,n,r){var s,o=r in n,a=!0;for(s in t){var u=r+"."+s,c=o?n[r]:i[s];o||s in e?void 0===t[s]?void 0===c||o?delete e[s]:e[s]=c:c.constructor==Object&&t[s]&&t[s].constructor==Object?(e[s]||(e[s]=c),a=a&&oe(e[s],t[s],c,n,u)):typeof t[s]!=typeof c||null==t[s]||t[s].constructor!=c.constructor?a=!1:e[s]=t[s]:a=!1}return a}function ae(e){var s=[];return function e(t){switch(typeof t){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return t;default:if(!t)return t;if(0<=s.indexOf(t))return null;var i=t.constructor==Array;if(t.constructor!=Object&&!i)return null;s.push(t);var n,r=i?[]:{};for(n in t)r[n]=e(t[n]);return i&&(r.length=t.length),r}}(e)}function ue(e,t){function i(){return Promise.all(e.map(function(e){return e.destroy()}))}return Promise.resolve(t()).then(function(e){return i().then(function(){return e})},function(e){return i().then(function(){throw e})})}function ce(){this.a=[]}function he(e,t){e.a.push(t.finally(function(){se(e.a,t)}))}function le(e){this.c=!1,this.g=new ce,this.a=[],this.b=[],this.f=e||null}V.prototype.a=null,V.prototype.c=null,V.prototype.add=function(e,t){if(!this.a&&(this.a={},this.c=0,this.b))for(var i=this.b.split("&"),n=0;n<i.length;n++){var r=i[n].indexOf("="),s=null;if(0<=r){var o=i[n].substring(0,r);s=i[n].substring(r+1)}else o=i[n];o=decodeURIComponent(o.replace(/\+/g," ")),s=s||"",this.add(o,decodeURIComponent(s.replace(/\+/g," ")))}return this.b=null,(i=this.a.hasOwnProperty(e)&&this.a[e])||(this.a[e]=i=[]),i.push(t),this.c++,this},V.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var e,t=[];for(e in this.a)for(var i=encodeURIComponent(e),n=this.a[e],r=0;r<n.length;r++){var s=i;""!==n[r]&&(s+="="+encodeURIComponent(n[r])),t.push(s)}return this.b=t.join("&")},W.prototype.resolve=function(){},W.prototype.reject=function(){},N("shaka.util.AbortableOperation",K),K.failed=q,K.aborted=J,K.completed=$,K.notAbortable=ee,K.prototype.abort=K.prototype.abort=function(){return this.a=!0,this.b()},K.all=te,K.prototype.finally=K.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},K.prototype.chain=K.prototype.V=function(t,i){function n(){return s.reject(new z(2,7,7001)),r.abort()}var r=this,s=new W;return this.promise.then(function(e){r.a?s.reject(new z(2,7,7001)):t?n=ie(t,e,s):s.resolve(e)},function(e){i?n=ie(i,e,s):s.reject(e)}),new K(s,function(){return n()})},ce.prototype.destroy=function(){var t=[];return this.a.forEach(function(e){e.promise.catch(function(){}),t.push(e.abort())}),this.a=[],Promise.all(t)},N("shaka.net.NetworkingEngine",le),le.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3},le.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var de={};function fe(e,t,i){i=i||3;var n=de[e];(!n||i>=n.priority)&&(de[e]={priority:i,me:t})}function Me(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t}}function pe(i){return i.then=function(e,t){return L("The network request interface has changed!  Please update your application to the new interface, which allows operations to be aborted.  Support for the old API will be removed in v2.5."),i.promise.then(e,t)},i.catch=function(e){return L("The network request interface has changed!  Please update your application to the new interface, which allows operations to be aborted.  Support for the old API will be removed in v2.5."),i.promise.catch(e)},i}function ge(){this.a={}}function ye(){this.a=new ge}function me(e,t,i,n){e.a&&(t=new De(t,i,n),e.a.push(i,t))}function Ne(e,t,i,n){me(e,t,i,function(e){this.na(t,i),n(e)}.bind(e))}function we(e){if(e.a){var t,i=e.a,n=[];for(t in i.a)n.push.apply(n,i.a[t]);for(i=0;i<n.length;++i)n[i].na();e.a.a={}}}function De(e,t,i){this.target=e,this.type=t,this.a=i,this.target.addEventListener(t,i,!1)}function Te(e,t){var i,n=t||{};for(i in n)this[i]=n[i];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=M.performance&&M.performance.now?M.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Ee(e,t){return e.concat(t)}function ve(){}function Ie(e){return null!=e}function Le(e,t,i){return i.indexOf(e)==t}function je(e,t){if(0==t.length)return e;var i=t.map(function(e){return new b(e)});return e.map(function(e){return new b(e)}).map(function(e){return i.map(e.resolve.bind(e))}).reduce(Ee,[]).map(function(e){return e.toString()})}function Ae(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}le.registerScheme=fe,le.unregisterScheme=function(e){delete de[e]},le.prototype.registerRequestFilter=le.prototype.pe=function(e){this.a.push(e)},le.prototype.unregisterRequestFilter=le.prototype.Ue=function(e){se(this.a,e)},le.prototype.clearAllRequestFilters=le.prototype.gd=function(){this.a=[]},le.prototype.registerResponseFilter=le.prototype.qe=function(e){this.b.push(e)},le.prototype.unregisterResponseFilter=le.prototype.Ve=function(e){se(this.b,e)},le.prototype.clearAllResponseFilters=le.prototype.hd=function(){this.b=[]},le.prototype.destroy=le.prototype.destroy=function(){return this.c=!0,this.a=[],this.b=[],this.g.destroy()},le.prototype.request=le.prototype.request=function(s,e){var o=this;if(this.c)return pe(J());e.method=e.method||"GET",e.headers=e.headers||{},e.retryParameters=e.retryParameters?ae(e.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},e.uris=ae(e.uris);var t,i,n,r,a=(t=this,i=s,n=e,r=$(void 0),t.a.forEach(function(e){r=r.V(function(){return e(i,n)})}),r.V(void 0,function(e){if(e&&7001==e.code)throw e;throw new z(2,1,1006,e)})),u=a.V(function(){return function t(i,n,r,s,o,a){var e=new b(r.uris[o]),u=e.ha;u||(u=location.protocol,u=u.slice(0,-1),x(e,u),r.uris[o]=e.toString());var c=(u=de[u])?u.me:null;if(!c)return q(new z(2,1,1e3,e));var h;return ee(Z(s)).V(function(){if(i.c)return J();h=Date.now();var e=c(r.uris[o],r,n);return null==e.promise&&(L("The scheme plugin interface has changed!  Please update your scheme plugins to the new interface to add support for abort().  Support for the old plugin interface will be removed in v2.5."),e=ee(e)),e}).V(function(e){return null==e.timeMs&&(e.timeMs=Date.now()-h),e},function(e){if(e&&7001==e.code)throw e;if(i.c)return J();if(e&&1==e.severity)return o=(o+1)%r.uris.length,t(i,n,r,s,o,e);throw e||a})}(o,s,e,new X(e.retryParameters,!1),0,null)}),c=u.V(function(e){return t=o,i=s,n=e,r=$(void 0),t.b.forEach(function(e){r=r.V(function(){return e(i,n)})}),r.V(function(){return n},function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof z&&(t=e.severity),new z(t,1,1007,e)});var t,i,n,r}),h=Date.now(),l=0;a.promise.then(function(){l=Date.now()-h},function(){});var d=0;return u.promise.then(function(){d=Date.now()},function(){}),a=c.V(function(e){var t=Date.now()-d;return e.timeMs+=l,e.timeMs+=t,o.f&&!e.fromCache&&1==s&&o.f(e.timeMs,e.data.byteLength),e},function(e){throw e&&(e.severity=2),e}),he(this.g,a),pe(a)},ge.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},ge.prototype.get=function(e){return(e=this.a[e])?e.slice():null},ge.prototype.remove=function(e,t){var i=this.a[e];if(i)for(var n=0;n<i.length;++n)i[n]==t&&(i.splice(n,1),--n)},ye.prototype.destroy=function(){return we(this),this.a=null,Promise.resolve()},ye.prototype.na=function(e,t){if(this.a)for(var i=this.a.get(t)||[],n=0;n<i.length;++n){var r=i[n];r.target==e&&(r.na(),this.a.remove(t,r))}},De.prototype.na=function(){this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null},Te.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Te.prototype.stopImmediatePropagation=function(){this.a=!0},Te.prototype.stopPropagation=function(){};var be=1/15;function xe(e){return!e||0==Object.keys(e).length}function Se(t){return Object.keys(t).map(function(e){return t[e]})}function Ce(t,i){Object.keys(t).forEach(function(e){i(e,t[e])})}function Oe(e,t){var i=e;return t&&(i+='; codecs="'+t+'"'),i}var ze={codecs:"codecs",frameRate:"framerate",bandwidth:"bitrate",width:"width",height:"height",channelsCount:"channels"};function ke(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=escape(Re(e));try{return decodeURIComponent(e)}catch(e){throw new z(2,2,2004)}}function Ue(e,t,i){if(!e)return"";if(!i&&0!=e.byteLength%2)throw new z(2,2,2004);if(e instanceof ArrayBuffer)var n=e;else(i=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),n=i.buffer;e=Math.floor(e.byteLength/2),i=new Uint16Array(e),n=new DataView(n);for(var r=0;r<e;r++)i[r]=n.getUint16(2*r,t);return Re(i)}function _e(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return ke(t);if(254==t[0]&&255==t[1])return Ue(t.subarray(2),!1);if(255==t[0]&&254==t[1])return Ue(t.subarray(2),!0);var i=function(e,t){return e.byteLength<=t||32<=e[t]&&e[t]<=126}.bind(null,t);if(0==t[0]&&0==t[2])return Ue(e,!1);if(0==t[1]&&0==t[3])return Ue(e,!0);if(i(0)&&i(1)&&i(2)&&i(3))return ke(e);throw new z(2,2,2003)}function Qe(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),i=0;i<e.length;++i)t[i]=e.charCodeAt(i);return t.buffer}function Re(e){for(var t="",i=0;i<e.length;i+=16e3)t+=String.fromCharCode.apply(null,e.subarray(i,i+16e3));return t}function Pe(e){this.a=null,this.b=function(){this.a=null,e()}.bind(this)}function Be(e,t){e.cancel();var i=function(){this.b(),this.a=setTimeout(i,1e3*t)}.bind(e);e.a=setTimeout(i,1e3*t)}function Ye(e,t){var i=null==t||t,n=M.btoa(Re(e)).replace(/\+/g,"-").replace(/\//g,"_");return i?n:n.replace(/=*$/,"")}function Fe(e){e=M.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),i=0;i<e.length;++i)t[i]=e.charCodeAt(i);return t}function Ge(e){for(var t=new Uint8Array(e.length/2),i=0;i<e.length;i+=2)t[i/2]=M.parseInt(e.substr(i,2),16);return t}function Ve(e){for(var t="",i=0;i<e.length;++i){var n=e[i].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function He(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!=t[i])return!1;return!0}function We(e){for(var t=0,i=0;i<arguments.length;++i)t+=arguments[i].length;t=new Uint8Array(t);for(var n=i=0;n<arguments.length;++n)t.set(arguments[n],i),i+=arguments[n].length;return t}function Xe(t){this.o=t,this.l=this.j=this.u=null,this.M=!1,this.b=null,this.g=new ye,this.a=[],this.m=[],this.i=new W,this.f=null,this.h=function(e){this.i.reject(e),t.onError(e)}.bind(this),this.A={},this.H=new Pe(this.oe.bind(this)),this.fa=this.c=!1,this.K=[],this.T=!1,this.v=new Pe(this.ne.bind(this)),Be(this.v,1),this.i.catch(function(){})}function Ze(e,t){return Promise.all(t.map(function(e){return qe(this,e).then(function(e){if(e){for(var t=new W,i=0;i<this.a.length;i++)if(this.a[i].ia==e){this.a[i].oa=t;break}return Promise.all([e.remove(),t])}}.bind(this))}.bind(e)))}function Ke(e){var t=e.b?e.b.initData:[];return t.forEach(function(e){Je(this,e.initDataType,e.initData)}.bind(e)),e.m.forEach(function(e){qe(this,e)}.bind(e)),t.length||e.m.length||e.i.resolve(),e.i}function qe(t,e){try{var i=t.j.createSession("persistent-license")}catch(e){var n=new z(2,6,6005,e.message);return t.h(n),Promise.reject(n)}me(t.g,i,"message",t.Gc.bind(t)),me(t.g,i,"keystatuseschange",t.Cc.bind(t));var r={initData:null,ia:i,loaded:!1,Ub:1/0,oa:null};return t.a.push(r),i.load(e).then(function(e){if(!this.c){if(e)return r.loaded=!0,this.a.every(function(e){return e.loaded})&&this.i.resolve(),i;this.a.splice(this.a.indexOf(r),1),this.h(new z(2,6,6013))}}.bind(t),function(e){this.c||(this.a.splice(this.a.indexOf(r),1),this.h(new z(2,6,6005,e.message)))}.bind(t))}function Je(t,e,i){try{var n=t.fa?t.j.createSession("persistent-license"):t.j.createSession()}catch(e){return void t.h(new z(2,6,6005,e.message))}me(t.g,n,"message",t.Gc.bind(t)),me(t.g,n,"keystatuseschange",t.Cc.bind(t)),t.a.push({initData:i,ia:n,loaded:!1,Ub:1/0,oa:null}),n.generateRequest(e,i.buffer).catch(function(e){if(!this.c){for(var t=0;t<this.a.length;++t)if(this.a[t].ia==n){this.a.splice(t,1);break}this.h(new z(2,6,6006,e.message))}}.bind(t))}function $e(e,t){for(var i,n=t.target,r=0;r<e.a.length;r++)if(e.a[r].ia==n){i=e.a[r];break}(r=Me([e.b.licenseServerUri],e.f.retryParameters)).body=t.message,r.method="POST","com.microsoft.playready"!=e.b.keySystem&&"com.chromecast.playready"!=e.b.keySystem||function(e){var t=Ue(e.body,!0,!0);if(-1==t.indexOf("PlayReadyKeyMessage"))e.headers["Content-Type"]="text/xml; charset=utf-8";else{for(var i=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),n=0;n<i.length;++n)e.headers[i[n].querySelector("name").textContent]=i[n].querySelector("value").textContent;e.body=Fe(t.querySelector("Challenge").textContent).buffer}}(r),e.o.Oa.request(2,r).promise.then(function(e){return this.c?Promise.reject():n.update(e.data).then(function(){this.o.onEvent(new Te("drmsessionupdate")),i&&(i.oa&&i.oa.resolve(),setTimeout(function(){i.loaded=!0,this.a.every(function(e){return e.loaded})&&this.i.resolve()}.bind(this),5e3))}.bind(this))}.bind(e),function(e){if(this.c)return Promise.resolve();e=new z(2,6,6007,e),this.h(e),i&&i.oa&&i.oa.reject(e)}.bind(e)).catch(function(e){if(this.c)return Promise.resolve();e=new z(2,6,6008,e.message),this.h(e),i&&i.oa&&i.oa.reject(e)}.bind(e))}function et(e,t){if(!e.length)return t;if(!t.length)return e;for(var i=[],n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(e[n].keySystem==t[r].keySystem){var s=e[n];r=t[r];var o=[];o=(o=o.concat(s.initData||[])).concat(r.initData||[]);var a=[];a=(a=a.concat(s.keyIds)).concat(r.keyIds),i.push({keySystem:s.keySystem,licenseServerUri:s.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:s.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:s.persistentStateRequired||r.persistentStateRequired,videoRobustness:s.videoRobustness||r.videoRobustness,audioRobustness:s.audioRobustness||r.audioRobustness,serverCertificate:s.serverCertificate||r.serverCertificate,initData:o,keyIds:a});break}return i}function tt(e){return!e||1==e.length&&e.end(0)-e.start(0)<1e-6?null:e.length?e.end(e.length-1):null}function it(e,t){return!(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6)&&(t>=e.start(0)&&t<=e.end(e.length-1))}function nt(e,t){if(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6)return 0;for(var i=0,n=e.length-1;0<=n&&e.end(n)>t;--n)i+=e.end(n)-Math.max(e.start(n),t);return i}function rt(e){if(!e)return[];for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}function st(e,t,i){this.startTime=e,this.endTime=t,this.payload=i,this.region=new mt,this.position=null,this.positionAlign=ot,this.size=100,this.textAlign=at,this.writingDirection=lt,this.lineInterpretation=dt,this.line=null,this.lineHeight="",this.lineAlign=ft,this.displayAlign=ct,this.fontSize=this.backgroundColor=this.color="",this.fontWeight=pt,this.fontStyle=gt,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}N("shaka.util.StringUtils.fromUTF8",ke),N("shaka.util.StringUtils.fromUTF16",Ue),N("shaka.util.StringUtils.fromBytesAutoDetect",_e),N("shaka.util.StringUtils.toUTF8",Qe),Pe.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},N("shaka.util.Uint8ArrayUtils.toBase64",Ye),N("shaka.util.Uint8ArrayUtils.fromBase64",Fe),N("shaka.util.Uint8ArrayUtils.fromHex",Ge),N("shaka.util.Uint8ArrayUtils.toHex",Ve),N("shaka.util.Uint8ArrayUtils.equal",He),N("shaka.util.Uint8ArrayUtils.concat",We),(e=Xe.prototype).destroy=function(){this.c=!0;var i=[];return this.a.forEach(function(e){e=e.ia.close().catch(ve);var t=new Promise(function(e){setTimeout(e,1e3)});i.push(Promise.race([e,t]))}),this.i.reject(),this.g&&i.push(this.g.destroy()),this.l&&i.push(this.l.setMediaKeys(null).catch(ve)),this.v&&(this.v.cancel(),this.v=null),this.H&&(this.H.cancel(),this.H=null),this.g=this.l=this.j=this.u=this.b=null,this.a=[],this.m=[],this.o=this.h=this.f=null,Promise.all(i)},e.configure=function(e){this.f=e},e.init=function(e,t){var i,n,r,s,o,a,u,c,h,l,d={},f=[];return this.fa=t,this.m=e.offlineSessionIds,i=this,n=e,r=t||0<e.offlineSessionIds.length,s=d,o=f,a=function(e){if(xe(e.f.clearKeys))return null;var t,i=[],n=[];for(t in e.f.clearKeys){var r=e.f.clearKeys[t],s=Ge(t);r=Ge(r),s={kty:"oct",kid:Ye(s,!1),k:Ye(r,!1)},i.push(s),n.push(s.kid)}return e=JSON.stringify({keys:i}),n=JSON.stringify({kids:n}),n=[{initData:new Uint8Array(Qe(n)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+M.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:n,keyIds:[]}}(i),c=n,h=i.f,l=Object.keys(h.servers),u=!l.length||c.periods.some(function(e){return e.variants.some(function(e){return e.drmInfos.length})})?null:l.map(function(e){return{keySystem:e,licenseServerUri:h.servers[e],distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]}}),n.periods.forEach(function(e){e.variants.forEach(function(n){a&&(n.drmInfos=[a]),u&&(n.drmInfos=u),n.drmInfos.forEach(function(t){!function(e,t){var i=t.keySystem;if(i){if(!t.licenseServerUri){var n=e.f.servers[i];n&&(t.licenseServerUri=n)}t.keyIds||(t.keyIds=[]),(i=e.f.advanced[i])&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate))}}(this,t),M.cast&&M.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready");var i=s[t.keySystem];i||(i={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:r?"required":"optional",sessionTypes:[r?"persistent-license":"temporary"],label:t.keySystem,drmInfos:[]},s[t.keySystem]=i,o.push(t.keySystem)),i.drmInfos.push(t),t.distinctiveIdentifierRequired&&(i.distinctiveIdentifier="required"),t.persistentStateRequired&&(i.persistentState="required");var e=[];n.video&&e.push(n.video),n.audio&&e.push(n.audio),e.forEach(function(e){("video"==e.type?i.videoCapabilities:i.audioCapabilities).push({robustness:("video"==e.type?t.videoRobustness:t.audioRobustness)||"",contentType:Oe(e.mimeType,e.codecs)})}.bind(this))}.bind(this))}.bind(this))}.bind(i)),f.length?function(e,h,t){if(1==t.length&&""==t[0])return Promise.reject(new z(2,6,6e3));var i=new W,n=i;return[!0,!1].forEach(function(i){t.forEach(function(e){var t=h[e];t.drmInfos.some(function(e){return!!e.licenseServerUri})==i&&(0==t.audioCapabilities.length&&delete t.audioCapabilities,0==t.videoCapabilities.length&&delete t.videoCapabilities,n=n.catch(function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(e,[t])}.bind(this)))}.bind(this))}.bind(e)),n=(n=n.catch(function(){return Promise.reject(new z(2,6,6001))})).then(function(e){if(this.c)return Promise.reject();var t,i,n,r,s,o,a,u=0<=navigator.userAgent.indexOf("Edge/"),c=e.getConfiguration();return this.u=(c.audioCapabilities||[]).concat(c.videoCapabilities||[]).map(function(e){return e.contentType}),u&&(this.u=null),u=h[e.keySystem],t=this,i=e.keySystem,function(e,i,n,r,s){function o(e,t){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&He(e.initData,t.initData)}e.forEach(function(e){if(-1==i.indexOf(e.licenseServerUri)&&i.push(e.licenseServerUri),e.serverCertificate&&-1==re(n,e.serverCertificate,He)&&n.push(e.serverCertificate),e.initData&&e.initData.forEach(function(e){-1==re(r,e,o)&&r.push(e)}),e.keyIds)for(var t=0;t<e.keyIds.length;++t)-1==s.indexOf(e.keyIds[t])&&s.push(e.keyIds[t])})}((n=u).drmInfos,r=[],s=[],o=[],a=[]),t.b={keySystem:i,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:s[0],initData:o,keyIds:a},this.b.licenseServerUri?e.createMediaKeys():Promise.reject(new z(2,6,6012))}.bind(e)).then(function(e){if(this.c)return Promise.reject();this.j=e,this.M=!0}.bind(e)).catch(function(e){return this.c?Promise.resolve():(this.u=this.b=null,e instanceof z?Promise.reject(e):Promise.reject(new z(2,6,6002,e.message)))}.bind(e)),i.reject(),n}(this,d,f):(this.M=!0,Promise.resolve())},e.sb=function(e){if(!this.j)return Ne(this.g,e,"encrypted",function(){this.h(new z(2,6,6010))}.bind(this)),Promise.resolve();this.l=e,Ne(this.g,this.l,"play",this.Td.bind(this)),e=(e=this.l.setMediaKeys(this.j)).catch(function(e){return Promise.reject(new z(2,6,6003,e.message))});var t=null;return this.b.serverCertificate&&this.b.serverCertificate.length&&(t=this.j.setServerCertificate(this.b.serverCertificate).then(function(){}).catch(function(e){return Promise.reject(new z(2,6,6004,e.message))})),Promise.all([e,t]).then(function(){if(this.c)return Promise.reject();Ke(this),this.b.initData.length||this.m.length||me(this.g,this.l,"encrypted",this.Id.bind(this))}.bind(this)).catch(function(e){return this.c?Promise.resolve():Promise.reject(e)}.bind(this))},e.keySystem=function(){return this.b?this.b.keySystem:""},e.wb=function(){var e=this.a.map(function(e){return e=e.ia.expiration,isNaN(e)?1/0:e});return Math.min.apply(Math,e)},e.Id=function(e){for(var t=new Uint8Array(e.initData),i=0;i<this.a.length;++i)if(He(t,this.a[i].initData))return;Je(this,e.initDataType,t)},e.Gc=function(e){this.f.delayLicenseRequestUntilPlayed&&this.l.paused&&!this.T?this.K.push(e):$e(this,e)},e.Cc=function(e){var o,t;for(e=e.target,o=0;o<this.a.length&&this.a[o].ia!=e;++o);if(o!=this.a.length){var a=!1;e.keyStatuses.forEach(function(e,t){if("string"==typeof t){var i=t;t=e,e=i}if("com.microsoft.playready"==this.b.keySystem&&16==t.byteLength){var n=(i=new DataView(t)).getUint32(0,!0),r=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,n,!1),i.setUint16(4,r,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(this.a[o].loaded=!0,this.a.every(function(e){return e.loaded})&&this.i.resolve()),"expired"==e&&(a=!0),i=Ve(new Uint8Array(t)),this.A[i]=e}.bind(this));var i=e.expiration-Date.now();(i<0||a&&i<1e3)&&!this.a[o].oa&&(this.a.splice(o,1),e.close().catch(function(){})),(t=this.H).cancel(),t.a=setTimeout(t.b,500)}},e.oe=function(){var t,i;!xe(this.A)&&(t=this.A,i=function(e,t){return"expired"==t},Object.keys(t).every(function(e){return i(e,t[e])}))&&this.h(new z(2,6,6014)),this.o.zb(this.A)},e.Td=function(){for(var e=0;e<this.K.length;e++)$e(this,this.K[e]);this.T=!0,this.K=[]},e.ne=function(){this.a.forEach(function(e){var t=e.Ub,i=e.ia.expiration;isNaN(i)&&(i=1/0),i!=t&&(this.o.onExpirationUpdated(e.ia.sessionId,i),e.Ub=i)}.bind(this))},N("shaka.text.Cue",st);var ot="auto";st.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:ot};var at="center",ut={LEFT:"left",RIGHT:"right",CENTER:at,START:"start",END:"end"};st.textAlign=ut;var ct="before",ht={BEFORE:ct,CENTER:"center",AFTER:"after"};st.displayAlign=ht;var lt=0;st.writingDirection={HORIZONTAL_LEFT_TO_RIGHT:lt,HORIZONTAL_RIGHT_TO_LEFT:1,VERTICAL_LEFT_TO_RIGHT:2,VERTICAL_RIGHT_TO_LEFT:3};var dt=0;st.lineInterpretation={LINE_NUMBER:dt,PERCENTAGE:1};var ft="center",Mt={CENTER:ft,START:"start",END:"end"};st.lineAlign=Mt;var pt=400;st.fontWeight={NORMAL:pt,BOLD:700};var gt="normal",yt={NORMAL:gt,ITALIC:"italic",OBLIQUE:"oblique"};function mt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Nt,this.scroll=wt}st.fontStyle=yt,st.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},N("shaka.text.CueRegion",mt);var Nt=1;mt.units={PX:0,PERCENTAGE:Nt,LINES:2};var wt="";function Dt(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.c=null,this.f=[],this.b=[],this.a.on("data",this.h.bind(this)),this.a.on("done",this.g.bind(this))}function Tt(e,t){return!(!M.muxjs||"mp2t"!=e.split(";")[0].split("/")[1])&&(t?MediaSource.isTypeSupported(Et(t,e)):MediaSource.isTypeSupported(Et("audio",e))||MediaSource.isTypeSupported(Et("video",e)))}function Et(e,t){var i=t.replace("mp2t","mp4");"audio"==e&&(i=i.replace("video","audio"));var n=/avc1\.(66|77|100)\.(\d+)/.exec(i);if(n){var r="avc1.",s=n[1],o=Number(n[2]);r=("66"==s?r+"4200":"77"==s?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),i=i.replace(n[0],r)}return i}function vt(e){this.f=null,this.c=e,this.i=this.g=0,this.h=1/0,this.b=this.a=null}mt.scrollMode={NONE:wt,UP:"up"},Dt.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Dt.prototype.h=function(e){for(var t=0;t<e.captions.length;t++){var i=e.captions[t];this.b.push(new st(i.startTime,i.endTime,i.text))}(t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength)).set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.f.push(t)},Dt.prototype.g=function(){var e={data:We.apply(null,this.f),cues:this.b};this.c.resolve(e)};var It={};function Lt(e){this.f=e,this.o=null,this.b={},this.a=null,this.c={},this.i=new ye,this.m=!1,this.h={},this.l=!1,e=this.j=new W;var t=new MediaSource;Ne(this.i,t,"sourceopen",e.resolve),this.f.src=M.URL.createObjectURL(t),this.g=t}function jt(e,t){e.a||(e.a=new vt(e.o)),e.a.f=new It[t]}function At(e,t){if("text"==t)var i=e.a.a;else i=!(i=bt(e,t))||1==i.length&&i.end(0)-i.start(0)<1e-6?null:1==i.length&&i.start(0)<0?0:i.length?i.start(0):null;return i}function bt(e,t){try{return e.b[t].buffered}catch(e){return null}}function xt(e,t,i,n,r){return"text"==t?(s=e.a,o=i,a=n,u=r,Promise.resolve().then(function(){if(this.f&&this.c)if(null==a||null==u)this.f.parseInit(new Uint8Array(o));else{var e={periodStart:this.g,segmentStart:this.g+a,segmentEnd:this.g+u};e=this.f.parseMedia(new Uint8Array(o),e).filter(function(e){return e.startTime>=this.i&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(a,this.i)),this.b=Math.min(u,this.h)}}.bind(s))):e.h[t]?function(e,t){e.c=new W,e.f=[],e.b=[];var i=new Uint8Array(t);return e.a.push(i),e.a.flush(),e.c}(e.h[t],i).then(function(e){return this.a||jt(this,"text/vtt"),this.l&&this.a.kc(e.cues),Ct(this,t,this.Vc.bind(this,t,e.data.buffer))}.bind(e)):Ct(e,t,e.Vc.bind(e,t,i));var s,o,a,u}function St(e,t){return"text"==t?e.a?e.a.remove(0,1/0):Promise.resolve():Ct(e,t,e.Wc.bind(e,t,0,e.g.duration))}function Ct(t,i,n){if(t.m)return Promise.reject();if(n={start:n,p:new W},t.c[i].push(n),1==t.c[i].length)try{n.start()}catch(e){"QuotaExceededError"==e.name?n.p.reject(new z(2,3,3017,i)):n.p.reject(new z(2,3,3015,e)),zt(t,i)}return n.p}function Ot(e,i){if(e.m)return Promise.reject();var t,n=[];for(t in e.b){var r=new W,s={start:function(e){e.resolve()}.bind(null,r),p:r};e.c[t].push(s),n.push(r),1==e.c[t].length&&s.start()}return Promise.all(n).then(function(){try{i()}catch(e){var t=Promise.reject(new z(2,3,3015,e))}for(var e in this.b)zt(this,e);return t}.bind(e),function(){return Promise.reject()}.bind(e))}function zt(t,i){t.c[i].shift();var n=t.c[i][0];if(n)try{n.start()}catch(e){n.p.reject(new z(2,3,3015,e)),zt(t,i)}}function kt(e,t,i){return i==t||Ut<=e&&i==t.split("-")[0]||_t<=e&&i.split("-")[0]==t.split("-")[0]}N("shaka.text.TextEngine.registerParser",function(e,t){It[e]=t}),N("shaka.text.TextEngine.unregisterParser",function(e){delete It[e]}),vt.prototype.destroy=function(){return this.c=this.f=null,Promise.resolve()},vt.prototype.setDisplayer=vt.prototype.Ee=function(e){this.c=e},vt.prototype.Mb=function(e){try{return this.f.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new z(2,2,2009,e)}},vt.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},vt.prototype.appendCues=vt.prototype.kc=function(e){this.c.append(e)},(e=Lt.prototype).destroy=function(){this.m=!0;var e,t=[];for(e in this.c){var i=this.c[e],n=i[0];for(this.c[e]=i.slice(0,1),n&&t.push(n.p.catch(ve)),n=1;n<i.length;++n)i[n].p.catch(ve),i[n].p.reject()}for(var r in this.a&&t.push(this.a.destroy()),this.h)t.push(this.h[r].destroy());return this.f&&(this.f.removeAttribute("src"),this.f.load()),Promise.all(t).then(function(){this.i.destroy(),this.o=this.a=this.g=this.f=this.i=null,this.b={},this.h={},this.c={}}.bind(this))},e.init=function(i,n){var r=this;return this.j.then(function(){for(var e in i){var t=i[e];t=Oe(t.mimeType,t.codecs),"text"==e?jt(r,t):(!n&&MediaSource.isTypeSupported(t)||!Tt(t,e)||(r.h[e]=new Dt,t=Et(e,t)),t=r.g.addSourceBuffer(t),me(r.i,t,"error",r.Qe.bind(r,e)),me(r.i,t,"updateend",r.Pa.bind(r,e)),r.b[e]=t,r.c[e]=[])}})},e.Ib=function(){var e=this.a&&null!=this.a.a?[{start:this.a.a,end:this.a.b}]:[];return{total:rt(this.f.buffered),audio:rt(bt(this,"audio")),video:rt(bt(this,"video")),text:e}},e.remove=function(e,t,i){return"text"==e?this.a.remove(t,i):Ct(this,e,this.Wc.bind(this,e,t,i))},e.flush=function(e){return"text"==e?Promise.resolve():Ct(this,e,this.ld.bind(this,e))},e.endOfStream=function(e){return Ot(this,function(){e?this.g.endOfStream(e):this.g.endOfStream()}.bind(this))},e.ja=function(e){return Ot(this,function(){this.g.duration=e}.bind(this))},e.S=function(){return this.g.duration},e.Vc=function(e,t){this.b[e].appendBuffer(t)},e.Wc=function(e,t,i){i<=t?this.Pa(e):this.b[e].remove(t,i)},e.bd=function(e){var t=this.b[e].appendWindowStart,i=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=i,this.Pa(e)},e.ld=function(e){this.f.currentTime-=.001,this.Pa(e)},e.Ge=function(e,t){t<0&&(t+=.001),this.b[e].timestampOffset=t,this.Pa(e)},e.De=function(e,t,i){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=i,this.b[e].appendWindowStart=t,this.Pa(e)},e.Qe=function(e){this.c[e][0].p.reject(new z(2,3,3014,this.f.error?this.f.error.code:0))},e.Pa=function(e){var t=this.c[e][0];t&&(t.p.resolve(),zt(this,e))};var Ut=1,_t=2;function Qt(e){e=e.toLowerCase().split("-");var t=Rt[e[0]];return t&&(e[0]=t),e.join("-")}var Rt={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function Pt(e,t,i){var n=e.video;return!(n&&(n.width<t.minWidth||n.width>t.maxWidth||n.width>i.width||n.height<t.minHeight||n.height>t.maxHeight||n.height>i.height||n.width*n.height<t.minPixels||n.width*n.height>t.maxPixels)||e.bandwidth<t.minBandwidth||e.bandwidth>t.maxBandwidth)}function Bt(e,i,n){var r=!1;return e.variants.forEach(function(e){var t=e.allowedByApplication;e.allowedByApplication=Pt(e,i,n),t!=e.allowedByApplication&&(r=!0)}),r}function Yt(n,r,s,e){e.variants=e.variants.filter(function(e){return!(n&&n.M&&(t=e,i=n.keySystem(),0!=t.drmInfos.length&&!t.drmInfos.some(function(e){return e.keySystem==i})))&&(Ft(e.audio,n,r)&&Ft(e.video,n,s));var t,i}),e.textStreams=e.textStreams.filter(function(e){return!!It[Oe(e.mimeType,e.codecs)]})}function Ft(e,t,i){if(!e)return!0;var n=null;t&&t.M&&(n=t.u),t=Oe(e.mimeType,e.codecs);var r,s=Oe(e.mimeType,e.codecs),o=e.mimeType;for(r in ze){var a=e[r],u=ze[r];a&&(o+="; "+u+'="'+a+'"')}return!(!(It[s]||MediaSource.isTypeSupported(o)||Tt(s,e.type))||n&&e.encrypted&&n.indexOf(t)<0||i&&(e.mimeType!=i.mimeType||e.codecs.split(".")[0]!=i.codecs.split(".")[0]))}function Gt(e){var t=e.audio,i=e.video,n=t?t.codecs:null,r=i?i.codecs:null,s=[];r&&s.push(r),n&&s.push(n);var o=[];i&&o.push(i.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var a=[];t&&a.push(t.kind),i&&a.push(i.kind),a=a[0]||null;var u=[];return t&&u.push.apply(u,t.roles),i&&u.push.apply(u,i.roles),u=ne(u),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:a,width:null,height:null,frameRate:null,mimeType:o,codecs:s.join(", "),audioCodec:n,videoCodec:r,primary:e.primary,roles:u,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null},i&&(e.videoId=i.id,e.width=i.width||null,e.height=i.height||null,e.frameRate=i.frameRate||null,e.videoBandwidth=i.bandwidth||null),t&&(e.audioId=t.id,e.channelsCount=t.channelsCount,e.audioBandwidth=t.bandwidth||null,e.label=t.label),e}function Vt(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null}}function Ht(e){var t=[],i=qt(e.variants);return e=e.textStreams,i.forEach(function(e){t.push(Gt(e))}),e.forEach(function(e){t.push(Vt(e))}),t}function Wt(e,i,n){return qt(e.variants).map(function(e){var t=Gt(e);return e.video&&e.audio?t.active=n==e.video.id&&i==e.audio.id:e.video?t.active=n==e.video.id:e.audio&&(t.active=i==e.audio.id),t})}function Xt(e,i){return e.textStreams.map(function(e){var t=Vt(e);return t.active=i==e.id,t})}function Zt(e,t){for(var i=0;i<e.variants.length;i++)if(e.variants[i].id==t.id)return e.variants[i];return null}function Kt(e){return e.allowedByApplication&&e.allowedByKeySystem}function qt(e){return e.filter(function(e){return Kt(e)})}function Jt(e,t,i,n,r){return $t(e=function(e,t,i,r){var s=qt(e),o=s;(e=s.filter(function(e){return e.primary})).length&&(o=e);var n=o.length?o[0].language:"";if(o=o.filter(function(e){return e.language==n}),t){var a=Qt(t);[_t,Ut,0].forEach(function(i){var n=!1;s.forEach(function(e){a=Qt(a);var t=Qt(e.language);kt(i,a,t)&&(n?o.push(e):(o=[e],n=!0),r&&(r.audio=!0))})})}return i&&(t=ti(o,i)).length?t:(t=o.map(function(e){return(e.audio?e.audio.roles:[]).concat(e.video?e.video.roles:[])}).reduce(Ee,[])).length?ti(o,t[0]):o}(e,t,i,r),n)}function $t(e,t){var i=e.filter(function(e){return e.audio&&e.audio.channelsCount}).reduce(function(e,t){var i=t.audio.channelsCount;return e[i]?e[i].push(t):e[i]=[t],e},{}),n=Object.keys(i);if(0==n.length)return e;var r=n.filter(function(e){return e<=t});return r.length?i[Math.max.apply(null,r)]:i[Math.min.apply(null,n)]}function ei(e,t,i,r){var s=e,n=e.filter(function(e){return e.primary});n.length&&(s=n);var o=s.length?s[0].language:"";if(s=s.filter(function(e){return e.language==o}),t){var a=Qt(t);[_t,Ut,0].forEach(function(i){var n=!1;e.forEach(function(e){var t=Qt(e.language);kt(i,a,t)&&(n?s.push(e):(s=[e],n=!0),r&&(r.text=!0))})})}if(i){if((t=ii(s,i)).length)return t}else if((t=s.filter(function(e){return 0==e.roles.length})).length)return t;return(t=s.map(function(e){return e.roles}).reduce(Ee,[])).length?ii(s,t[0]):s}function ti(e,t){return e.filter(function(e){return e.audio&&0<=e.audio.roles.indexOf(t)||e.video&&0<=e.video.roles.indexOf(t)})}function ii(e,t){return e.filter(function(e){return 0<=e.roles.indexOf(t)})}function ni(e,t,i){for(var n=0;n<i.length;n++)if(i[n].audio==e&&i[n].video==t)return i[n];return null}function ri(e,t){for(var i=e.periods.length-1;0<i;--i)if(t+be>=e.periods[i].startTime)return i;return 0}function si(e,t){for(var i=0;i<e.periods.length;++i){var n=e.periods[i];if("text"==t.type){for(var r=0;r<n.textStreams.length;++r)if(n.textStreams[r]==t)return i}else for(r=0;r<n.variants.length;++r){var s=n.variants[r];if(s.audio==t||s.video==t||s.video&&s.video.trickModeVideo==t)return i}}return-1}function oi(){this.h=null,this.c=!1,this.b=new I,this.g=[],this.i=!1,this.a=this.f=null}N("shaka.abr.SimpleAbrManager",oi),oi.prototype.stop=oi.prototype.stop=function(){this.h=null,this.c=!1,this.g=[],this.f=null},oi.prototype.init=oi.prototype.init=function(e){this.h=e},oi.prototype.chooseVariant=oi.prototype.chooseVariant=function(){var t,e=(t=this.a.restrictions,this.g.filter(function(e){return Pt(e,t,{width:1/0,height:1/0})}).sort(function(e,t){return e.bandwidth-t.bandwidth})),i=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);if(this.g.length&&!e.length)throw new z(2,4,4012);for(var n=e[0]||null,r=0;r<e.length;++r){var s=e[r],o=(e[r+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;i>=s.bandwidth/this.a.bandwidthDowngradeTarget&&i<=o&&(n=s)}return this.f=Date.now(),n},oi.prototype.enable=oi.prototype.enable=function(){this.c=!0},oi.prototype.disable=oi.prototype.disable=function(){this.c=!1},oi.prototype.segmentDownloaded=oi.prototype.segmentDownloaded=function(e,t){var i=this.b;if(!(t<16e3)){var n=8e3*t/e,r=e/1e3;i.a+=t,T(i.b,r,n),T(i.c,r,n)}if(null!=this.f&&this.c)e:{if(this.i){if(Date.now()-this.f<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}i=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(i)}},oi.prototype.getBandwidthEstimate=oi.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},oi.prototype.setVariants=oi.prototype.setVariants=function(e){this.g=e},oi.prototype.configure=oi.prototype.configure=function(e){this.a=e};var ai="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ui="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ci=["loop","playbackRate"],hi=["pause","play"],li="adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading".split(" "),di={drmInfo:20,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getManifestUri:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,usingEmbeddedTextTrack:2,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1},fi={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Mi=[["getConfiguration","configure"]],pi=[["isTextTrackVisible","setTextTrackVisibility"]],gi="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),yi=["attach","detach","load","unload"];function mi(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Te){var i,n={};for(i in t){var r=t[i];r&&"object"==typeof r?"detail"==i&&(n[i]=r):i in Event||(n[i]=r)}return n}if(t instanceof TimeRanges)for(n={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=0;i<t.length;++i)n.start.push(t.start(i)),n.end.push(t.end(i));else n="number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return n}})}function Ni(e){return JSON.parse(e,function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?{length:(i=t).length,start:function(e){return i.start[e]},end:function(e){return i.end[e]}}:t;var i})}function wi(e,t,i,n,r,s){this.K=e,this.g=t,this.M=i,this.j=!1,this.A=n,this.H=r,this.u=s,this.b=this.h=!1,this.v="",this.i=null,this.l=this.Ac.bind(this),this.m=this.Pd.bind(this),this.a={video:{},player:{}},this.o=0,this.c={},this.f=null}var Di=!1,Ti=null;function Ei(e){var t=Ti;t.removeUpdateListener(e.l),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.m)}function vi(e){for(var t in e.c){var i=e.c[t];delete e.c[t],i.reject(new z(1,7,7e3))}}function Ii(e){e=mi(e),Ti.sendMessage("urn:x-cast:com.google.shaka.v2",e,function(){},j)}function Li(){this.Db=new ge,this.lb=this}function ji(e,t,i){Li.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.j=this.h=null,this.a=new wi(i,this.Le.bind(this),this.Me.bind(this),this.Ne.bind(this),this.Oe.bind(this),this.rc.bind(this)),function(e){for(var t in e.a.init(),e.i=new ye,ai.forEach(function(e){me(this.i,this.c,e,this.$e.bind(this))}.bind(e)),li.forEach(function(e){me(this.i,this.b,e,this.le.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.Ze.bind(e,t),set:e.af.bind(e,t)});for(var i in e.j={},e.b)Object.defineProperty(e.j,i,{configurable:!1,enumerable:!0,get:e.ke.bind(e,i)});e.f=new Li,e.f.lb=e.h,e.g=new Li,e.g.lb=e.j}(this)}function Ai(e,t,i,n){var r,s;Li.call(this),this.a=e,this.b=t,this.c=new ye,this.u={video:e,player:t},this.v=i||function(){},this.A=n||function(e){return e},this.o=!1,this.h=!0,this.g=0,this.m=!1,this.j=!0,this.l=this.i=this.f=null,r=this,(s=cast.receiver.CastReceiverManager.getInstance()).onSenderConnected=r.Fc.bind(r),s.onSenderDisconnected=r.Fc.bind(r),s.onSystemVolumeChanged=r.kd.bind(r),r.i=s.getCastMessageBus("urn:x-cast:com.google.cast.media"),r.i.onMessage=r.Kd.bind(r),r.f=s.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),r.f.onMessage=r.Zd.bind(r),s.start(),ai.forEach(function(e){me(this.c,this.a,e,this.Jc.bind(this,"video"))}.bind(r)),li.forEach(function(e){me(this.c,this.b,e,this.Jc.bind(this,"player"))}.bind(r)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?r.b.bc(3840,2160):r.b.bc(1920,1080),me(r.c,r.a,"loadeddata",function(){this.m=!0}.bind(r)),me(r.c,r.b,"loading",function(){this.h=!1,bi(this)}.bind(r)),me(r.c,r.a,"playing",function(){this.h=!1,bi(this)}.bind(r)),me(r.c,r.a,"pause",function(){bi(this)}.bind(r)),me(r.c,r.b,"unloading",function(){this.h=!0,bi(this)}.bind(r)),me(r.c,r.a,"ended",function(){M.setTimeout(function(){this.a&&this.a.ended&&(this.h=!0,bi(this))}.bind(this),5e3)}.bind(r))}function bi(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new Te("caststatuschanged")),xi(this)||Oi(this,0))}.bind(e))}function xi(e){return!(!e.j||!e.a.duration&&!e.b.P())&&(Si(e),!(e.j=!1))}function Si(e){Oi(e,0,{contentId:e.b.Kb(),streamType:e.b.P()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""})}function Ci(e,t,i,n){e.o&&(e=mi(t),n?i.getCastChannel(n).send(e):i.broadcast(e))}function Oi(e,t,i){var n=e.a.playbackRate,r=zi;n={mediaSessionId:0,playbackRate:n,playerState:r=e.h?r.IDLE:e.b.vc()?r.Xc:e.a.paused?r.Zc:r.$c,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},i&&(n.media=i),Ci(e,{requestId:t,type:"MEDIA_STATUS",status:[n]},e.i)}(e=wi.prototype).destroy=function(){return vi(this),Ti&&Ei(this),this.H=this.A=this.g=null,this.b=this.h=!1,this.m=this.l=this.f=this.c=this.a=this.i=null,Promise.resolve()},e.Z=function(){return this.b},e.Yb=function(){return this.v},e.init=function(){if(M.chrome&&chrome.cast&&chrome.cast.isAvailable){delete M.__onGCastApiAvailable,this.h=!0,this.g();var e=new chrome.cast.SessionRequest(this.K);e=new chrome.cast.ApiConfig(e,this.Bc.bind(this),this.Wd.bind(this),"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Di&&setTimeout(this.g.bind(this),20),(e=Ti)&&e.status!=chrome.cast.SessionStatus.STOPPED?this.Bc(e):Ti=null}else M.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},e.ac=function(e){this.i=e,this.b&&Ii({type:"appData",appData:this.i})},e.cast=function(e){return this.h?Di?this.b?Promise.reject(new z(1,8,8002)):(this.f=new W,chrome.cast.requestSession(this.Vb.bind(this,e),this.zc.bind(this)),this.f):Promise.reject(new z(1,8,8001)):Promise.reject(new z(1,8,8e3))},e.vb=function(){this.b&&(vi(this),Ti&&(Ei(this),Ti.stop(function(){},function(){}),Ti=null))},e.get=function(e,t){if("video"==e){if(0<=hi.indexOf(t))return this.Lc.bind(this,e,t)}else if("player"==e){if(fi[t]&&!this.get("player","isLive")())return function(){};if(0<=gi.indexOf(t))return this.Lc.bind(this,e,t);if(0<=yi.indexOf(t))return this.se.bind(this,e,t);if(di[t])return this.Ic.bind(this,e,t)}return this.Ic(e,t)},e.set=function(e,t,i){Ii({type:"set",targetName:e,property:t,value:this.a[e][t]=i})},e.Vb=function(e,t){(Ti=t).addUpdateListener(this.l),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.m),this.Ac(),Ii({type:"init",initState:e,appData:this.i}),this.f.resolve()},e.zc=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.f.reject(new z(2,8,t,e))},e.Ic=function(e,t){return this.a[e][t]},e.Lc=function(e,t){Ii({type:"call",targetName:e,methodName:t,args:Array.prototype.slice.call(arguments,2)})},e.se=function(e,t){var i=Array.prototype.slice.call(arguments,2),n=new W,r=this.o.toString();return this.o++,this.c[r]=n,Ii({type:"asyncCall",targetName:e,methodName:t,args:i,id:r}),n},e.Bc=function(e){var t=this.u();this.f=new W,this.j=!0,this.Vb(t,e)},e.Wd=function(e){Di="available"==e,this.g()},e.Ac=function(){var e=!!Ti&&"connected"==Ti.status;if(this.b&&!e){for(var t in this.H(),this.a)this.a[t]={};vi(this)}this.v=(this.b=e)?Ti.receiver.friendlyName:"",this.g()},e.Pd=function(e,t){var i=Ni(t);switch(i.type){case"event":var n=i.event;this.A(i.targetName,new Te(n.type,n));break;case"update":for(var r in n=i.update)for(var s in i=this.a[r]||{},n[r])i[s]=n[r][s];this.j&&(this.M(),this.j=!1);break;case"asyncComplete":if(r=i.id,i=i.error,s=this.c[r],delete this.c[r],s)if(i){for(n in r=new z(i.severity,i.category,i.code),i)r[n]=i[n];s.reject(r)}else s.resolve()}},Li.prototype.addEventListener=function(e,t){this.Db.push(e,t)},Li.prototype.removeEventListener=function(e,t){this.Db.remove(e,t)},Li.prototype.dispatchEvent=function(e){for(var t=this.Db.get(e.type)||[],i=0;i<t.length;++i){e.target=this.lb,e.currentTarget=this.lb;var n=t[i];try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},w(ji,Li),N("shaka.cast.CastProxy",ji),ji.prototype.destroy=ji.prototype.destroy=function(e){return e&&this.a&&this.a.vb(),e=[this.i?this.i.destroy():null,this.b?this.b.destroy():null,this.a?this.a.destroy():null],this.a=this.i=this.j=this.h=this.b=this.c=null,Promise.all(e)},ji.prototype.getVideo=ji.prototype.Ad=function(){return this.h},ji.prototype.getPlayer=ji.prototype.sd=function(){return this.j},ji.prototype.canCast=ji.prototype.dd=function(){return!!this.a&&(this.a.h&&Di)},ji.prototype.isCasting=ji.prototype.Z=function(){return!!this.a&&this.a.Z()},ji.prototype.receiverName=ji.prototype.Yb=function(){return this.a?this.a.Yb():""},ji.prototype.cast=ji.prototype.cast=function(){var e=this.rc();return this.a.cast(e).then(function(){if(this.b)return this.b.jb()}.bind(this))},ji.prototype.setAppData=ji.prototype.ac=function(e){this.a.ac(e)},ji.prototype.suggestDisconnect=ji.prototype.Se=function(){var e=this.a;if(e.b){var t=e.u();chrome.cast.requestSession(e.Vb.bind(e,t),e.zc.bind(e))}},ji.prototype.forceDisconnect=ji.prototype.vb=function(){this.a.vb()},(e=ji.prototype).rc=function(){var i={video:{},player:{},playerAfterLoad:{},manifest:this.b.Kb(),startTime:null};return this.c.pause(),ci.forEach(function(e){i.video[e]=this.c[e]}.bind(this)),this.c.ended||(i.startTime=this.c.currentTime),Mi.forEach(function(e){var t=e[1];e=this.b[e[0]](),i.player[t]=e}.bind(this)),pi.forEach(function(e){var t=e[1];e=this.b[e[0]](),i.playerAfterLoad[t]=e}.bind(this)),i},e.Le=function(){this.dispatchEvent(new Te("caststatuschanged"))},e.Me=function(){this.f.dispatchEvent(new Te(this.h.paused?"pause":"play"))},e.Oe=function(){var t=this;Mi.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this));var e=this.a.get("player","getManifestUri")(),i=this.a.get("video","ended"),n=Promise.resolve(),r=this.c.autoplay,s=null;i||(s=this.a.get("video","currentTime")),e&&(this.c.autoplay=!1,n=this.b.load(e,s));var o={};ci.forEach(function(e){o[e]=this.a.get("video",e)}.bind(this)),n.then(function(){t.c&&(ci.forEach(function(e){this.c[e]=o[e]}.bind(t)),pi.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(t)),t.c.autoplay=r,e&&t.c.play())},function(e){t.b.dispatchEvent(new Te("error",{detail:e}))})},e.Ze=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.Z()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.Z()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},e.af=function(e,t){this.a.Z()?this.a.set("video",e,t):this.c[e]=t},e.$e=function(e){this.a.Z()||this.f.dispatchEvent(new Te(e.type,e))},e.ke=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==e)return function(){return this.h}.bind(this);if("getNetworkingEngine"==e)return this.b.sc.bind(this.b);if(this.a.Z()){if("getManifest"==e)return function(){return L("getManifest() does not work while casting!"),null};if("attach"==e)return function(){return L("attach() does not work while casting!"),Promise.resolve()};if("detach"==e)return function(){return L("detach() does not work while casting!"),Promise.resolve()}}return this.a.Z()&&0==Object.keys(this.a.a.video).length&&di[e]||!this.a.Z()?this.b[e].bind(this.b):this.a.get("player",e)},e.le=function(e){this.a.Z()||this.g.dispatchEvent(e)},e.Ne=function(e,t){this.a.Z()&&("video"==e?this.f.dispatchEvent(t):"player"==e&&this.g.dispatchEvent(t))},w(Ai,Li),N("shaka.cast.CastReceiver",Ai),Ai.prototype.isConnected=Ai.prototype.isConnected=function(){return this.o},Ai.prototype.isIdle=Ai.prototype.Dd=function(){return this.h},Ai.prototype.destroy=Ai.prototype.destroy=function(){var e=[this.c?this.c.destroy():null,this.b?this.b.destroy():null];return null!=this.l&&M.clearTimeout(this.l),this.v=this.u=this.c=this.b=this.a=null,this.o=!1,this.h=!0,this.l=this.i=this.f=null,Promise.all(e).then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})},(e=Ai.prototype).Fc=function(){this.g=0,this.j=!0,this.o=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,bi(this)},e.Jc=function(e,t){this.b&&(this.Wb(),Ci(this,{type:"event",targetName:e,event:t},this.f))},e.Wb=function(){null!=this.l&&M.clearTimeout(this.l),this.l=M.setTimeout(this.Wb.bind(this),500);var t={video:{},player:{}};if(ui.forEach(function(e){t.video[e]=this.a[e]}.bind(this)),this.b.P())for(var e in fi)0==this.g%fi[e]&&(t.player[e]=this.b[e]());for(var i in di)0==this.g%di[i]&&(t.player[i]=this.b[i]());(e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=e.level,t.video.muted=e.muted),this.m&&(this.g+=1),Ci(this,{type:"update",update:t},this.f),xi(this)},e.kd=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Ci(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Ci(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},e.Zd=function(e){var t=Ni(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.j=!0,function(i,n,e){for(var t in n.player)i.b[t](n.player[t]);i.v(e),e=Promise.resolve();var r=i.a.autoplay;n.manifest&&(i.a.autoplay=!1,e=i.b.load(n.manifest,n.startTime)),e.then(function(){if(i.b){for(var e in n.video)i.a[e]=n.video[e];for(var t in n.playerAfterLoad)i.b[t](n.playerAfterLoad[t]);i.a.autoplay=r,n.manifest&&(i.a.play(),Oi(i,0))}},function(e){i.b.dispatchEvent(new Te("error",{detail:e}))})}(this,t.initState,t.appData),this.Wb();break;case"appData":this.v(t.appData);break;case"set":var i=t.targetName,n=t.property;if(t=t.value,"video"==i){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==n){r.setSystemVolumeLevel(t);break}if("muted"==n){r.setSystemVolumeMuted(t);break}}this.u[i][n]=t;break;case"call":(i=this.u[t.targetName])[t.methodName].apply(i,t.args);break;case"asyncCall":i=t.targetName,n=t.methodName,"player"==i&&"load"==n&&(this.g=0,this.m=!1),r=t.id,e=e.senderId;var s=this.u[i];t=s[n].apply(s,t.args),"player"==i&&"load"==n&&(t=t.then(function(){this.j=!0}.bind(this))),t.then(this.Qc.bind(this,e,r,null),this.Qc.bind(this,e,r))}},e.Kd=function(e){var i=Ni(e.data);switch(i.type){case"PLAY":this.a.play(),Oi(this,0);break;case"PAUSE":this.a.pause(),Oi(this,0);break;case"SEEK":e=i.currentTime;var t=i.resumeState;null!=e&&(this.a.currentTime=Number(e)),t&&"PLAYBACK_START"==t?(this.a.play(),Oi(this,0)):t&&"PLAYBACK_PAUSE"==t&&(this.a.pause(),Oi(this,0));break;case"STOP":this.b.jb().then(function(){this.b&&Oi(this,0)}.bind(this));break;case"GET_STATUS":Oi(this,Number(i.requestId));break;case"VOLUME":e=(t=i.volume).level,t=t.muted;var n=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=t&&(this.a.muted=t),n==this.a.volume&&r==this.a.muted||Oi(this,0);break;case"LOAD":this.g=0,this.j=this.m=!1,e=i.currentTime,t=this.A(i.media.contentId),this.a.autoplay=!0,this.b.load(t,e).then(function(){this.b&&Si(this)}.bind(this)).catch(function(e){var t="LOAD_FAILED";7==e.category&&7e3==e.code&&(t="LOAD_CANCELLED"),Ci(this,{requestId:Number(i.requestId),type:t},this.i)}.bind(this));break;default:Ci(this,{requestId:Number(i.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},e.Qc=function(e,t,i){this.b&&Ci(this,{type:"asyncComplete",id:t,error:i},this.f,e)};var zi={IDLE:"IDLE",$c:"PLAYING",Xc:"BUFFERING",Zc:"PAUSED"};function ki(e,t){var i=Ui(e,t);return 1!=i.length?null:i[0]}function Ui(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&e.tagName==t})}function _i(e,t,i){return e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function Qi(e){var t=e.firstChild;return t&&t.nodeType==Node.TEXT_NODE?e.textContent.trim():null}function Ri(e,t,i,n){var r=null;return null!=(e=e.getAttribute(t))&&(r=i(e)),null==r?null!=n?n:null:r}function Pi(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function Bi(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function Yi(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Fi(e){return 0==(e=Number(e))%1?e:null}function Gi(e){return 0==(e=Number(e))%1&&0<e?e:null}function Vi(e){return 0==(e=Number(e))%1&&0<=e?e:null}function Hi(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1]/t[2]):Number(e),isNaN(e)?null:e}var Wi={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};function Xi(e,t,i){e=e.map(function(e){var t,i=e.getAttribute("schemeIdUri"),n=_i(e,"urn:mpeg:cenc:2013","default_KID"),r=(t=e,Array.prototype.filter.call(t.childNodes,function(e){return e instanceof Element&&"pssh"==e.localName&&"urn:mpeg:cenc:2013"==e.namespaceURI})).map(Qi);if(!i)return null;if(i=i.toLowerCase(),n&&0<=(n=n.replace(/-/g,"").toLowerCase()).indexOf(" "))throw new z(2,4,4009);var s=[];try{s=r.map(function(e){return{initDataType:"cenc",initData:Fe(e),keyId:null}})}catch(e){throw new z(2,4,4007)}return{node:e,Pc:i,keyId:n,init:0<s.length?s:null}}).filter(Ie);var n,r,s=null,o=[],a=[],u=e.map(function(e){return e.keyId}).filter(Ie);if(u.length&&1<u.filter(Le).length)throw new z(2,4,4010);i||(a=e.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Pc||(s=e.init||s,!1)})).length&&(n=s,r=t,0==(o=a.map(function(e){var t=Wi[e.Pc];return t?[Ae(t,e.init||n)]:r(e.node)||[]}).reduce(Ee,[])).length&&(o=[Ae("",s)])),!e.length||!i&&a.length||(o=Se(Wi).map(function(e){return Ae(e,s)}));var c=u[0]||null;return c&&o.forEach(function(e){e.initData.forEach(function(e){e.keyId=c})}),{lc:c,ef:s,drmInfos:o,qc:!0}}function Zi(e,t,i,n,r){null!=r&&(r=Math.round(r));var s={RepresentationID:t,Number:i,Bandwidth:n,Time:r};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(e,t,i,n){if("$$"==e)return"$";var r=s[t];if(null==r)return e;switch("RepresentationID"==t&&i&&(i=void 0),n){case void 0:case"d":case"i":case"u":e=r.toString();break;case"o":e=r.toString(8);break;case"x":e=r.toString(16);break;case"X":e=r.toString(16).toUpperCase();break;default:e=r.toString()}return i=M.parseInt(i,10)||1,Array(Math.max(0,i-e.length)+1).join("0")+e})}function Ki(e,t){var i=qi(e,t,"timescale"),n=1;i&&(n=Gi(i)||1),(i=Gi((i=qi(e,t,"duration"))||""))&&(i/=n);var r=qi(e,t,"startNumber"),s=Number(qi(e,t,"presentationTimeOffset"))||0,o=Vi(r||"");null!=r&&null!=o||(o=1);var a=Ji(e,t,"SegmentTimeline");if(r=null,a){r=n;var u=e.N.duration||1/0;a=Ui(a,"S");for(var c=[],h=0,l=0;l<a.length;++l){var d=a[l],f=Ri(d,"t",Vi),M=Ri(d,"d",Vi);if(d=Ri(d,"r",Fi),null!=f&&(f-=s),!M)break;if(f=null!=f?f:h,(d=d||0)<0)if(l+1<a.length){if(null==(d=Ri(a[l+1],"t",Vi)))break;if(d<=f)break;d=Math.ceil((d-f)/M)-1}else{if(1/0==u)break;if(u<=f/r)break;d=Math.ceil((u*r-f)/M)-1}0<c.length&&f!=h&&(c[c.length-1].end=f/r);for(var p=0;p<=d;++p)h=f+M,c.push({start:f/r,end:h/r,We:f}),f=h}r=c}return{timescale:n,R:i,Fa:o,da:s/n||0,hc:s,I:r}}function qi(e,t,i){return[t(e.w),t(e.U),t(e.ba)].filter(Ie).map(function(e){return e.getAttribute(i)}).reduce(function(e,t){return e||t})}function Ji(e,t,i){return[t(e.w),t(e.U),t(e.ba)].filter(Ie).map(function(e){return ki(e,i)}).reduce(function(e,t){return e||t})}function $i(e,t){var i=new DOMParser;try{var n=ke(e),r=i.parseFromString(n,"text/xml")}catch(e){}if(r&&r.documentElement.tagName==t)var s=r.documentElement;return s&&0<s.getElementsByTagName("parsererror").length?null:s}function en(e,t,i,n,r,s){if(s=s||0,_i(e,"http://www.w3.org/1999/xlink","href")){var o=function(r,s,o,e,a,u){for(var c=_i(r,"http://www.w3.org/1999/xlink","href"),t=_i(r,"http://www.w3.org/1999/xlink","actuate")||"onRequest",i=0;i<r.attributes.length;i++){var n=r.attributes[i];"http://www.w3.org/1999/xlink"==n.namespaceURI&&(r.removeAttributeNS(n.namespaceURI,n.localName),--i)}if(5<=u)return q(new z(2,4,4028));if("onLoad"!=t)return q(new z(2,4,4027));var h=je([e],[c]);return a.request(0,Me(h,s)).V(function(e){if(!(e=$i(e.data,r.tagName)))return q(new z(2,4,4001,c));for(;r.childNodes.length;)r.removeChild(r.childNodes[0]);for(;e.childNodes.length;){var t=e.childNodes[0];e.removeChild(t),r.appendChild(t)}for(t=0;t<e.attributes.length;t++){var i=e.attributes[t].nodeName,n=e.getAttribute(i);r.setAttribute(i,n)}return en(r,s,o,h[0],a,u+1)})}(e,t,i,n,r,s);return i&&(o=o.V(void 0,function(){return en(e,t,i,n,r,s)})),o}for(o=0;o<e.childNodes.length;o++){var a=e.childNodes[o];a instanceof Element&&"urn:mpeg:dash:resolve-to-zero:2013"==_i(a,"http://www.w3.org/1999/xlink","href")&&(e.removeChild(a),--o)}for(o=[],a=0;a<e.childNodes.length;a++){var u=e.childNodes[a];u.nodeType==Node.ELEMENT_NODE&&o.push(en(u,t,i,n,r,s))}return te(o).V(function(){return e})}function tn(e,t,i){this.c=e,this.b=t,this.a=i}function nn(e,t,i,n,r,s){this.position=e,this.startTime=t,this.endTime=i,this.c=n,this.b=r,this.a=s}function rn(e,t){this.G=e,this.b=t==on,this.a=0}N("shaka.media.InitSegmentReference",tn),tn.prototype.createUris=tn.prototype.Fb=function(){return this.c()},tn.prototype.getStartByte=tn.prototype.Lb=function(){return this.b},tn.prototype.getEndByte=tn.prototype.Jb=function(){return this.a},N("shaka.media.SegmentReference",nn),nn.prototype.getPosition=nn.prototype.W=function(){return this.position},nn.prototype.getStartTime=nn.prototype.Mb=function(){return this.startTime},nn.prototype.getEndTime=nn.prototype.od=function(){return this.endTime},nn.prototype.createUris=nn.prototype.Fb=function(){return this.c()},nn.prototype.getStartByte=nn.prototype.Lb=function(){return this.b},nn.prototype.getEndByte=nn.prototype.Jb=function(){return this.a},N("shaka.util.DataViewReader",rn);var sn,on=1;function an(){throw new z(2,3,3e3)}function un(){this.c=[],this.b=[],this.a=!1}function cn(e){for(;e.s.ga()&&!e.ra.a;)e.ra.Ab(e.start,e.s,e.Hc)}function hn(e){for(var t=e.s.C();0<t&&!e.ra.a;--t)e.ra.Ab(e.start,e.s,e.Hc)}function ln(t){return function(e){t(e.s.Ea(e.s.G.byteLength-e.s.W()))}}function dn(e){for(var t=0,i=0;i<e.length;i++)t=t<<8|e.charCodeAt(i);return t}function fn(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Mn(e,t,i,n){var r,s=(new un).Y("sidx",function(e){r=function(e,t,i,n){var r=[];n.s.F(4);var s=n.s.C();if(0==s)throw new z(2,3,3005);if(0==n.version)var o=n.s.C(),a=n.s.C();else o=n.s.Sa(),a=n.s.Sa();n.s.F(2);var u=n.s.eb();for(e=e+n.size+a,a=0;a<u;a++){var c=n.s.C(),h=(2147483648&c)>>>31;c&=2147483647;var l=n.s.C();if(n.s.F(4),1==h)throw new z(2,3,3006);r.push(new nn(r.length,o/s-t,(o+l)/s-t,function(){return i},e,e+c-1)),o+=l,e+=c}return n.ra.stop(),r}(t,n,i,e)});if(e&&s.parse(e),r)return r;throw new z(2,3,3004)}function pn(e){this.a=e}function gn(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&e.a[0].endTime<=0;)e.a.shift();if(0!=e.a.length){var i=e.a[0];i.startTime<be&&(e.a[0]=new nn(i.position,0,i.endTime,i.c,i.b,i.a)),i=e.a[e.a.length-1],e.a[e.a.length-1]=new nn(i.position,i.startTime,t,i.c,i.b,i.a)}}function yn(e){this.b=e,this.a=new rn(e,0),sn||(sn=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function mn(e){var t=Nn(e);if(7<t.length)throw new z(2,3,3002);for(var i=0,n=0;n<t.length;n++)i=256*i+t[n];t=i,i=Nn(e);e:{for(n=0;n<sn.length;n++)if(He(i,sn[n])){n=!0;break e}n=!1}if(n)i=e.b.byteLength-e.a.W();else{if(8==i.length&&224&i[1])throw new z(2,3,3001);n=i[0]&(1<<8-i.length)-1;for(var r=1;r<i.length;r++)n=256*n+i[r];i=n}return i=e.a.W()+i<=e.b.byteLength?i:e.b.byteLength-e.a.W(),n=new DataView(e.b.buffer,e.b.byteOffset+e.a.W(),i),e.a.F(i),new wn(t,n)}function Nn(e){var t,i=e.a.ca();for(t=1;t<=8&&!(i&1<<8-t);t++);if(8<t)throw new z(2,3,3002);var n=new Uint8Array(t);for(n[0]=i,i=1;i<t;i++)n[i]=e.a.ca();return n}function wn(e,t){this.id=e,this.a=t}function Dn(e){if(8<e.a.byteLength)throw new z(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new z(2,3,3001);for(var t=0,i=0;i<e.a.byteLength;i++){t=256*t+e.a.getUint8(i)}return t}function Tn(){}function En(e){var t=new yn(e.a);if(179!=(e=mn(t)).id)throw new z(2,3,3013);if(e=Dn(e),183!=(t=mn(t)).id)throw new z(2,3,3012);t=new yn(t.a);for(var i=0;t.ga();){var n=mn(t);if(241==n.id){i=Dn(n);break}}return{Xe:e,re:i}}function vn(e,t){var i=Ji(e,t,"Initialization");if(!i)return null;var n=e.w.ea,r=i.getAttribute("sourceURL");r&&(n=je(e.w.ea,[r])),r=0;var s=null;return(i=Ri(i,"range",Yi))&&(r=i.start,s=i.end),new tn(function(){return n},r,s)}function In(e,t,i,n,r,s,o,a){var u=e.presentationTimeline,c=!e.Ja||!e.N.Nb,h=e.N.index,l=e.N.duration,d=t,f=null;return{createSegmentIndex:function(){var e=[d(n,r,s),"webm"==o?d(i.c(),i.b,i.a):null];return d=null,Promise.all(e).then(function(e){var t=e[0];e=e[1]||null,t="mp4"==o?Mn(t,r,n,a):(new Tn).parse(t,e,n,a),u.bb(t,0==h),f=new pn(t),c&&gn(f,l)})},findSegmentPosition:function(e){return f.find(e)},getSegmentReference:function(e){return f.get(e)}}}function Ln(e){return e.fb}function jn(e,t){var i,n=vn(e,An),r=[(i=e).w.ta,i.U.ta,i.ba.ta].filter(Ie).map(function(e){return Ui(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(e){e.getAttribute("indexRange")&&!i.uc&&(i.uc=!0);var t=e.getAttribute("media");return e=Ri(e,"mediaRange",Yi,{start:0,end:null}),{Fd:t,start:e.start,end:e.end}}),s=Ki(e,An),o=s.Fa;0==o&&(o=1);var a=0;if(s.R?a=s.R*(o-1):s.I&&0<s.I.length&&(a=s.I[0].start),!(r={R:s.R,startTime:a,Fa:o,da:s.da,I:s.I,Na:r}).R&&!r.I&&1<r.Na.length)throw new z(2,4,4002);if(!r.R&&!e.N.duration&&!r.I&&1==r.Na.length)throw new z(2,4,4002);if(r.I&&0==r.I.length)throw new z(2,4,4002);return o=s=null,e.ba.id&&e.w.id&&(s=t[o=e.ba.id+","+e.w.id]),a=function(e,t,i,n){var r=n.Na.length;n.I&&n.I.length!=n.Na.length&&(r=Math.min(n.I.length,n.Na.length));for(var s=[],o=n.startTime,a=0;a<r;a++){var u=n.Na[a],c=je(i,[u.Fd]),h=void 0;h=null!=n.R?o+n.R:n.I?n.I[a].end:o+e,s.push(new nn(a+t,o,h,function(e){return e}.bind(null,c),u.start,u.end)),o=h}return s}(e.N.duration,r.Fa,e.w.ea,r),s?(s.Rb(a),o=e.presentationTimeline.Za(),s.Hb(o-e.N.start)):(e.presentationTimeline.bb(a,0==e.N.index),s=new pn(a),o&&e.Ja&&(t[o]=s)),e.Ja&&e.N.Nb||gn(s,e.N.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:s.find.bind(s),getSegmentReference:s.get.bind(s),initSegmentReference:n,da:r.da}}function An(e){return e.ta}function bn(e,t,i,n){var r,s,o,a,u,c,h,l,d,f,M=function(e){var t=qi(e,xn,"initialization");if(!t)return null;var i=e.w.id,n=e.bandwidth||null,r=e.w.ea;return new tn(function(){var e=Zi(t,i,null,n,null);return je(r,[e])},0,null)}(e),p=Ki(e,xn),g=qi(e,xn,"media"),y=qi(e,xn,"index");if(g=(p={R:p.R,timescale:p.timescale,Fa:p.Fa,da:p.da,hc:p.hc,I:p.I,Qb:g,ab:y}).ab?1:0,g+=p.I?1:0,0==(g+=p.R?1:0))throw new z(2,4,4002);if(1!=g&&(p.ab&&(p.I=null),p.R=null),!p.ab&&!p.Qb)throw new z(2,4,4002);if(p.ab){if("mp4"!=(i=e.w.mimeType.split("/")[1])&&"webm"!=i)throw new z(2,4,4006);if("webm"==i&&!M)throw new z(2,4,4005);n=Zi(p.ab,e.w.id,null,e.bandwidth||null,null),e=In(e,t,M,n=je(e.w.ea,[n]),0,null,i,p.da)}else e=p.R?(n||e.presentationTimeline.yb(p.R),s=p,o=(r=e).N.duration,a=s.R,u=s.Fa,c=s.timescale,h=s.Qb,l=r.bandwidth||null,d=r.w.id,f=r.w.ea,{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return e<0||o&&o<=e?null:Math.floor(e/a)},getSegmentReference:function(t){var i=t*a,e=i+a;return o&&(e=Math.min(e,o)),e<0||o&&o<=i?null:new nn(t,i,e,function(){var e=Zi(h,d,t+u,l,i*c);return je(f,[e])},0,null)}}):(n=t=null,e.ba.id&&e.w.id&&(t=i[n=e.ba.id+","+e.w.id]),g=function(e,t){for(var i=[],n=0;n<t.I.length;n++){var r=n+t.Fa;i.push(new nn(r,t.I[n].start,t.I[n].end,function(e,t,i,n,r,s){return e=Zi(e,t,r,i,s),je(n,[e]).map(function(e){return e.toString()})}.bind(null,t.Qb,e.w.id,e.bandwidth||null,e.w.ea,r,t.I[n].We+t.hc),0,null))}return i}(e,p),t?(t.Rb(g),i=e.presentationTimeline.Za(),t.Hb(i-e.N.start)):(e.presentationTimeline.bb(g,0==e.N.index),t=new pn(g),n&&e.Ja&&(i[n]=t)),e.Ja&&e.N.Nb||gn(t,e.N.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:M,da:p.da}}function xn(e){return e.hb}rn.Endianness={bf:0,cf:on},rn.prototype.hasMoreData=rn.prototype.ga=function(){return this.a<this.G.byteLength},rn.prototype.getPosition=rn.prototype.W=function(){return this.a},rn.prototype.getLength=rn.prototype.pd=function(){return this.G.byteLength},rn.prototype.readUint8=rn.prototype.ca=function(){try{var e=this.G.getUint8(this.a);return this.a+=1,e}catch(e){an()}},rn.prototype.readUint16=rn.prototype.eb=function(){try{var e=this.G.getUint16(this.a,this.b);return this.a+=2,e}catch(e){an()}},rn.prototype.readUint32=rn.prototype.C=function(){try{var e=this.G.getUint32(this.a,this.b);return this.a+=4,e}catch(e){an()}},rn.prototype.readInt32=rn.prototype.Kc=function(){try{var e=this.G.getInt32(this.a,this.b);return this.a+=4,e}catch(e){an()}},rn.prototype.readUint64=rn.prototype.Sa=function(){try{if(this.b)var e=this.G.getUint32(this.a,!0),t=this.G.getUint32(this.a+4,!0);else t=this.G.getUint32(this.a,!1),e=this.G.getUint32(this.a+4,!1)}catch(e){an()}if(2097151<t)throw new z(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},rn.prototype.readBytes=rn.prototype.Ea=function(e){this.a+e>this.G.byteLength&&an();var t=new Uint8Array(this.G.buffer,this.G.byteOffset+this.a,e);return this.a+=e,new Uint8Array(t)},rn.prototype.skip=rn.prototype.F=function(e){this.a+e>this.G.byteLength&&an(),this.a+=e},rn.prototype.rewind=rn.prototype.Oc=function(e){this.a<e&&an(),this.a-=e},rn.prototype.seek=rn.prototype.seek=function(e){(e<0||e>this.G.byteLength)&&an(),this.a=e},rn.prototype.readTerminatedString=rn.prototype.Xb=function(){for(var e=this.a;this.ga()&&0!=this.G.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.G.buffer,this.G.byteOffset+e,this.a-e),this.a+=1,ke(e)},N("shaka.util.Mp4Parser",un),un.prototype.box=un.prototype.D=function(e,t){var i=dn(e);return this.c[i]=0,this.b[i]=t,this},un.prototype.fullBox=un.prototype.Y=function(e,t){var i=dn(e);return this.c[i]=1,this.b[i]=t,this},un.prototype.stop=un.prototype.stop=function(){this.a=!0},un.prototype.parse=un.prototype.parse=function(e,t){var i=new Uint8Array(e);for(i=new rn(new DataView(i.buffer,i.byteOffset,i.byteLength),0),this.a=!1;i.ga()&&!this.a;)this.Ab(0,i,t)},un.prototype.parseNext=un.prototype.Ab=function(e,t,i){var n=t.W(),r=t.C(),s=t.C();switch(r){case 0:r=t.G.byteLength-n;break;case 1:r=t.Sa()}var o=this.b[s];if(o){var a=null,u=null;1==this.c[s]&&(a=(u=t.C())>>>24,u&=16777215),s=n+r,i&&s>t.G.byteLength&&(s=t.G.byteLength),t=0<(s-=t.W())?t.Ea(s):new Uint8Array(0),o({ra:this,Hc:i||!1,version:a,flags:u,s:t=new rn(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:r,start:n+e})}else t.F(n+r-t.W())},un.children=cn,un.sampleDescription=hn,un.allData=ln,un.typeToString=fn,N("shaka.media.SegmentIndex",pn),pn.prototype.destroy=pn.prototype.destroy=function(){return this.a=null,Promise.resolve()},pn.prototype.find=pn.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var i=this.a[t];if(e>=i.startTime&&e<i.endTime)return i.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},pn.prototype.get=pn.prototype.get=function(e){return 0==this.a.length?null:(e-=this.a[0].position)<0||e>=this.a.length?null:this.a[e]},pn.prototype.offset=pn.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},pn.prototype.merge=pn.prototype.Rb=function(e){for(var t=[],i=0,n=0;i<this.a.length&&n<e.length;){var r=this.a[i],s=e[n];r.startTime<s.startTime?(t.push(r),i++):(r.startTime>s.startTime?0==i&&t.push(s):(.1<Math.abs(r.endTime-s.endTime)?t.push(new nn(r.position,s.startTime,s.endTime,s.c,s.b,s.a)):t.push(r),i++),n++)}for(;i<this.a.length;)t.push(this.a[i++]);if(t.length)for(i=t[t.length-1].position+1;n<e.length;)r=new nn(i++,(r=e[n++]).startTime,r.endTime,r.c,r.b,r.a),t.push(r);else t=e;this.a=t},pn.prototype.evict=pn.prototype.Hb=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},yn.prototype.ga=function(){return this.a.ga()},Tn.prototype.parse=function(e,t,i,n){var r;if(440786851!=mn(t=new yn(new DataView(t))).id)throw new z(2,3,3008);var s=mn(t);if(408125543!=s.id)throw new z(2,3,3009);for(t=s.a.byteOffset,s=new yn(s.a),r=null;s.ga();){var o=mn(s);if(357149030==o.id){r=o;break}}if(!r)throw new z(2,3,3010);for(s=new yn(r.a),r=1e6,o=null;s.ga();){var a=mn(s);if(2807729==a.id)r=Dn(a);else if(17545==a.id)if(4==(o=a).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new z(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new z(2,3,3011);if(r=o*(s=r/1e9),475249515!=(e=mn(new yn(new DataView(e)))).id)throw new z(2,3,3007);return function(e,t,i,n,r,s){function o(){return r}var a=[];e=new yn(e.a);for(var u=null,c=null;e.ga();){var h=mn(e);if(187==h.id){var l=En(h);l&&(h=i*l.Xe,l=t+l.re,null!=u&&a.push(new nn(a.length,u-s,h-s,o,c,l-1)),u=h,c=l)}}return null!=u&&a.push(new nn(a.length,u-s,n-s,o,c,null)),a}(e,t,s,r,i,n)};var Sn={},Cn={};function On(t,e,i,n){var r=n;return r||1<(n=new b(t).aa.split("/").pop().split(".")).length&&(n=n.pop().toLowerCase(),r=Cn[n]),r?Promise.resolve(r):((i=Me([t],i)).method="HEAD",e.request(0,i).promise.then(function(e){return(e=e.headers["content-type"])&&(e=e.toLowerCase()),(r=Sn[e])?r:Promise.reject(new z(2,4,4e3,t))},function(e){return e.severity=2,Promise.reject(e)}))}function zn(e,t){this.f=e,this.l=t,this.c=this.b=1/0,this.a=1,this.j=this.h=0,this.i=!0,this.g=0}function kn(){this.a=this.b=null,this.h=[],this.c=null,this.j=[],this.i=1,this.l={},this.m=0,this.o=new D(5),this.g=null,this.f=new ce}function Un(t){var i=Date.now(),e=t.a.networkingEngine.request(0,Me(t.h,t.b.retryParameters));return he(t.f,e),e.promise.then(function(e){if(t.a)return function(t,e,i){if(!(e=$i(e,"MPD")))throw new z(2,4,4001,i);return e=en(e,t.b.retryParameters,t.b.dash.xlinkFailGracefully,i,t.a.networkingEngine),he(t.f,e),e.promise.then(function(e){return function(e,t,i){i=[i];var n=Ui(t,"Location").map(Qi).filter(Ie);0<n.length&&(i=e.h=n),n=Ui(t,"BaseURL").map(Qi),i=je(i,n);var r=Ri(t,"minBufferTime",Bi);e.m=Ri(t,"minimumUpdatePeriod",Bi,-1);var s=Ri(t,"availabilityStartTime",Pi);n=Ri(t,"timeShiftBufferDepth",Bi);var o=Ri(t,"suggestedPresentationDelay",Bi),a=Ri(t,"maxSegmentDuration",Bi),u=t.getAttribute("type")||"static";if(e.c)var c=e.c.presentationTimeline;else{var h=Math.max(e.b.dash.defaultPresentationDelay,1.5*r);c=new zn(s,null!=o?o:h)}s=function(e,t,i,n){var r=Ri(n,"mediaPresentationDuration",Bi),s=[],o=0;n=Ui(n,"Period");for(var a=0;a<n.length;a++){var u=n[a];o=Ri(u,"start",Bi,o);var c=Ri(u,"duration",Bi),h=null;if(a!=n.length-1){var l=Ri(n[a+1],"start",Bi);null!=l&&(h=l-o)}else null!=r&&(h=r-o);if(null==h&&(h=c),u=_n(e,t,i,{start:o,duration:h,node:u,index:a,Nb:null==h||a==n.length-1}),s.push(u),c=t.ba.id,-1==e.j.indexOf(c)&&(e.j.push(c),e.c&&(e.a.filterNewPeriod(u),e.c.periods.push(u))),null==h){o=null;break}o+=h}return null==e.c&&e.a.filterAllPeriods(s),null!=r?{periods:s,duration:r,mc:!1}:{periods:s,duration:o,mc:!0}}(e,{Ja:"static"!=u,presentationTimeline:c,ba:null,N:null,U:null,w:null,bandwidth:0,uc:!1},i,t),o=s.duration;var l=s.periods;return c.Bb("static"==u),"static"!=u&&s.mc||c.ja(o||1/0),c.cc(null!=n?n:1/0),c.yb(a||1),e.c?Promise.resolve():(t=Ui(t,"UTCTiming"),n=c.P(),function(e,i,t,n){t=t.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var r,s,o=e.b.dash.clockSyncUri;return n&&!t.length&&o&&t.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:o}),(r=t,s=function(e){var t=e.value;switch(e.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Yn(this,i,t,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Yn(this,i,t,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return e=Date.parse(t),isNaN(e)?0:e-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:return Promise.reject()}}.bind(e),r.reduce(function(e,t,i){return t.catch(e.bind(null,i))}.bind(null,s),Promise.reject())).catch(function(){return 0})}(e,i,t,n).then(function(e){this.a&&(c.Rc(e),this.c={presentationTimeline:c,periods:l,offlineSessionIds:[],minBufferTime:r||0})}.bind(e)))}(t,e,i)})}(t,e.data,e.uri)}).then(function(){var e=(Date.now()-i)/1e3;return T(t.o,1,e),e})}function _n(e,t,i,n){t.ba=Bn(n.node,null,i),t.N=n,t.ba.id||(t.ba.id="__shaka_period_"+n.start),Ui(n.node,"EventStream").forEach(e.ie.bind(e,n.start,n.duration));var r=(i=Ui(n.node,"AdaptationSet").map(e.ge.bind(e,t)).filter(Ie)).map(function(e){return e.te}).reduce(Ee,[]),s=r.filter(Le);if(t.Ja&&r.length!=s.length)throw new z(2,4,4018);var o=i.filter(function(e){return!e.gc});if(i.filter(function(e){return e.gc}).forEach(function(e){var t=e.streams[0],i=e.gc;o.forEach(function(e){e.id==i&&e.streams.forEach(function(e){e.trickModeVideo=t})})}),i=Qn(o,"video"),r=Qn(o,"audio"),!i.length&&!r.length)throw new z(2,4,4004);for(r.length||(r=[null]),i.length||(i=[null]),t=[],s=0;s<r.length;s++)for(var a=0;a<i.length;a++)Rn(e,r[s],i[a],t);for(e=Qn(o,"text"),i=[],r=0;r<e.length;r++)i.push.apply(i,e[r].streams);return{startTime:n.start,textStreams:i,variants:t}}function Qn(e,t){return e.filter(function(e){return e.contentType==t})}function Rn(e,t,i,n){if(t||i)if(t&&i){var r=t.drmInfos,s=i.drmInfos;if(!r.length||!s.length||0<et(r,s).length){s=et(t.drmInfos,i.drmInfos);for(var o=0;o<t.streams.length;o++)for(var a=0;a<i.streams.length;a++)r=(i.streams[a].bandwidth||0)+(t.streams[o].bandwidth||0),r={id:e.i++,language:t.language,primary:t.Pb||i.Pb,audio:t.streams[o],video:i.streams[a],bandwidth:r,drmInfos:s,allowedByApplication:!0,allowedByKeySystem:!0},n.push(r)}}else for(s=t||i,o=0;o<s.streams.length;o++)r=s.streams[o].bandwidth||0,r={id:e.i++,language:s.language||"und",primary:s.Pb,audio:t?s.streams[o]:null,video:i?s.streams[o]:null,bandwidth:r,drmInfos:s.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},n.push(r)}function Pn(e,t){e.m<0||(e.g=M.setTimeout(e.Pe.bind(e),1e3*Math.max(3,e.m-t,E(e.o))))}function Bn(e,t,i){t=t||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0,Tb:null},i=i||t.ea;var n=Ui(e,"BaseURL").map(Qi),r=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,o=e.getAttribute("codecs")||t.codecs,a=Ri(e,"frameRate",Hi)||t.frameRate,u=!!Ui(e,"InbandEventStream").length,c=Ui(e,"AudioChannelConfiguration");return c=function(e){for(var t=0;t<e.length;++t){var i=e[t],n=i.getAttribute("schemeIdUri");if(n&&(i=i.getAttribute("value")))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return i.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(n=parseInt(i,10)))continue;return n;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=parseInt(i,16)){for(e=0;n;)1&n&&++e,n>>=1;return e}}}return null}(c)||t.Tb,r||(r=Fn(s,o)),{ea:je(i,n),fb:ki(e,"SegmentBase")||t.fb,ta:ki(e,"SegmentList")||t.ta,hb:ki(e,"SegmentTemplate")||t.hb,width:Ri(e,"width",Vi)||t.width,height:Ri(e,"height",Vi)||t.height,contentType:r,mimeType:s,codecs:o,frameRate:a,containsEmsgBoxes:u||t.containsEmsgBoxes,id:e.getAttribute("id"),Tb:c}}function Yn(e,t,i,n){return(t=Me(t=je(t,[i]),e.b.retryParameters)).method=n,t=e.a.networkingEngine.request(0,t),he(e.f,t),t.promise.then(function(e){if("HEAD"==n){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=ke(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()})}function Fn(e,t){return It[Oe(e,t)]?"text":e.split("/")[0]}function Gn(e,t,i,n){this.uri=e,this.type=t,this.a=i,this.segments=n||null}function Vn(e,t,i,n){this.id=e,this.name=t,this.a=i,this.value=n||null}function Hn(e,t){this.name=e,this.value=t}function Wn(e,t,i){return i=i||null,(e=e.getAttribute(t))?e.value:i}function Xn(e,t){this.a=t,this.uri=e}function Zn(e,t){return e.filter(function(e){return e.name==t})}function Kn(e,t){var i=Zn(e,t);return i.length?i[0]:null}function qn(e,i,n){return e.filter(function(e){var t=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),t.value==i&&e.value==n})}function Jn(e,t){return je([e],[t])[0]}function $n(e){this.b=e,this.a=0}function er(e){tr(e,/[ \t]+/gm)}function tr(e,t){t.lastIndex=e.a;var i=t.exec(e.b);return i=null==i?null:{position:i.index,length:i[0].length,we:i},e.a==e.b.length||null==i||i.position!=e.a?null:(e.a+=i.length,i.we)}function ir(e){return e.a==e.b.length?null:(e=tr(e,/[^ \t\n]*/gm))?e[0]:null}function nr(){this.a=0}function rr(e,t,i){var n=(t=(t=ke(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new z(2,4,4015);t=0;for(var r=1;r<n.length;r++)if(!/^#(?!EXT)/m.test(n[r])){var s=or(e,n[r]);if(--e.a,0<=ar.indexOf(s.name)){t=1;break}"EXT-X-STREAM-INF"==s.name&&(r+=1)}for(r=[],s=1;s<n.length;)if(/^#(?!EXT)/m.test(n[s]))s+=1;else{var o=or(e,n[s]);if(0<=ur.indexOf(o.name)){if(1!=t)throw new z(2,4,4017);return new Gn(i,t,r,e=sr(e,n=n.splice(s,n.length-s),r))}r.push(o),s+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Hn("URI",n[s])),s+=1)}return new Gn(i,t,r)}function sr(t,e,i){var n=[],r=[];return e.forEach(function(e){if(/^(#EXT)/.test(e))e=or(t,e),0<=ar.indexOf(e.name)?i.push(e):r.push(e);else{if(/^#(?!EXT)/m.test(e))return[];n.push(new Xn(e.trim(),r)),r=[]}}),n}function or(e,t){e:{var i=e.a++,n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new z(2,4,4016,t);var r=n[1],s=n[2];if(n=[],s&&0<=s.indexOf("=")){s=new $n(s);for(var o,a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=tr(s,a);)n.push(new Hn(o[1],o[2]||o[3]))}else if(s){i=new Vn(i,r,n,s);break e}i=new Vn(i,r,n)}return i}N("shaka.media.ManifestParser.registerParserByExtension",function(e,t){Cn[e]=t}),N("shaka.media.ManifestParser.registerParserByMime",function(e,t){Sn[e]=t}),N("shaka.media.PresentationTimeline",zn),zn.prototype.getDuration=zn.prototype.S=function(){return this.b},zn.prototype.setDuration=zn.prototype.ja=function(e){this.b=e},zn.prototype.getPresentationStartTime=zn.prototype.ud=function(){return this.f},zn.prototype.setClockOffset=zn.prototype.Rc=function(e){this.j=e},zn.prototype.setStatic=zn.prototype.Bb=function(e){this.i=e},zn.prototype.setSegmentAvailabilityDuration=zn.prototype.cc=function(e){this.c=e},zn.prototype.setDelay=zn.prototype.Sc=function(e){this.l=e},zn.prototype.notifySegments=zn.prototype.bb=function(e,t){0!=e.length&&(t&&(this.h=Math.max(this.h,e[0].startTime)),this.a=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.a))},zn.prototype.notifyMaxSegmentDuration=zn.prototype.yb=function(e){this.a=Math.max(this.a,e)},zn.prototype.isLive=zn.prototype.P=function(){return 1/0==this.b&&!this.i},zn.prototype.isInProgress=zn.prototype.Ba=function(){return 1/0!=this.b&&!this.i},zn.prototype.getSegmentAvailabilityStart=zn.prototype.Za=function(){if(1/0==this.c)return this.g;var e=this.La()-this.c;return Math.max(this.g,e)},zn.prototype.setUserSeekStart=zn.prototype.Tc=function(e){this.g=e},zn.prototype.getSegmentAvailabilityEnd=zn.prototype.La=function(){return this.P()||this.Ba()?Math.min(Math.max(0,(Date.now()+this.j)/1e3-this.a-this.f),this.b):this.b},zn.prototype.getSafeSeekRangeStart=zn.prototype.Ya=function(e){var t=Math.max(this.h,this.g);if(1/0==this.c)return t;var i=this.La()-this.c;return e=Math.min(i+e,this.la()),Math.max(t,e)},zn.prototype.getSeekRangeStart=zn.prototype.Ka=function(){return this.Ya(0)},zn.prototype.getSeekRangeEnd=zn.prototype.la=function(){var e=this.P()||this.Ba()?this.l:0;return Math.max(0,this.La()-e)},N("shaka.dash.DashParser",kn),(e=kn.prototype).configure=function(e){this.b=e},e.start=function(e,t){return this.h=[e],this.a=t,Un(this).then(function(e){return this.a&&Pn(this,e),this.c}.bind(this))},e.stop=function(){return this.b=this.a=null,this.h=[],this.c=null,this.j=[],this.l={},null!=this.g&&(M.clearTimeout(this.g),this.g=null),this.f.destroy()},e.update=function(){Un(this).catch(function(e){this.a&&this.a.onError(e)}.bind(this))},e.onExpirationUpdated=function(){},e.ge=function(t,e){t.U=Bn(e,t.ba,null);var i=!1,n=Ui(e,"Role"),r=n.map(function(e){return e.getAttribute("value")}).filter(Ie),s=void 0;"text"==t.U.contentType&&(s="subtitle");for(var o=0;o<n.length;o++){var a=n[o].getAttribute("schemeIdUri");if(null==a||"urn:mpeg:dash:role:2011"==a)switch(a=n[o].getAttribute("value"),a){case"main":i=!0;break;case"caption":case"subtitle":s=a}}var u=null,c=!1;if(Ui(e,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?u=e.getAttribute("value"):c=!0}),c)return null;var h=Xi(n=Ui(e,"ContentProtection"),this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);if(n=Qt(e.getAttribute("lang")||"und"),a=e.getAttribute("label"),0==(r=(o=Ui(e,"Representation")).map(this.je.bind(this,t,h,s,n,a,i,r)).filter(function(e){return!!e})).length)throw new z(2,4,4003);return t.U.contentType&&"application"!=t.U.contentType||(t.U.contentType=Fn(r[0].mimeType,r[0].codecs),r.forEach(function(e){e.type=t.U.contentType})),r.forEach(function(t){h.drmInfos.forEach(function(e){t.keyId&&e.keyIds.push(t.keyId)})}),s=o.map(function(e){return e.getAttribute("id")}).filter(Ie),{id:t.U.id||"__fake__"+this.i++,contentType:t.U.contentType,language:n,Pb:i,streams:r,drmInfos:h.drmInfos,gc:u,te:s}},e.je=function(e,t,i,n,r,s,o,a){if(e.w=Bn(a,e.U,null),u=e.w,c=u.fb?1:0,c+=u.ta?1:0,!(0==(c+=u.hb?1:0)?"text"==u.contentType||"application"==u.contentType:(1!=c&&(u.fb&&(u.ta=null),u.hb=null),1)))return null;var u,c;e.bandwidth=Ri(a,"bandwidth",Gi)||0;var h=this.ue.bind(this);if(e.w.fb)h=function(e,t){var i=Number(qi(e,Ln,"presentationTimeOffset"))||0,n=qi(e,Ln,"timescale"),r=1;n&&(r=Gi(n)||1),i=i/r||0,n=vn(e,Ln);var s=e.w.contentType;if(r=e.w.mimeType.split("/")[1],"text"!=s&&"mp4"!=r&&"webm"!=r)throw new z(2,4,4006);if("webm"==r&&!n)throw new z(2,4,4005);s=Ji(e,Ln,"RepresentationIndex");var o=qi(e,Ln,"indexRange"),a=e.w.ea;if(o=Yi(o||""),s){var u=s.getAttribute("sourceURL");u&&(a=je(e.w.ea,[u])),o=Ri(s,"range",Yi,o)}if(!o)throw new z(2,4,4002);return{createSegmentIndex:(r=In(e,t,n,a,o.start,o.end,r,i)).createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:n,da:i}}(e,h);else if(e.w.ta)h=jn(e,this.l);else if(e.w.hb)h=bn(e,h,this.l,!!this.c);else{var l=e.w.ea,d=e.N.duration||0;h={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<d?1:null},getSegmentReference:function(e){return 1!=e?null:new nn(1,0,d,function(){return l},0,null)},initSegmentReference:null,da:0}}return a=function(e,t,i,n){var r=Xi(e,t,n);if(i.qc)e=1==i.drmInfos.length&&!i.drmInfos[0].keySystem,t=0==r.drmInfos.length,(0==i.drmInfos.length||e&&!t)&&(i.drmInfos=r.drmInfos),i.qc=!1;else if(0<r.drmInfos.length&&(i.drmInfos=i.drmInfos.filter(function(t){return r.drmInfos.some(function(e){return e.keySystem==t.keySystem})}),0==i.drmInfos.length))throw new z(2,4,4008);return r.lc||i.lc}(a=Ui(a,"ContentProtection"),this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.i++,createSegmentIndex:h.createSegmentIndex,findSegmentPosition:h.findSegmentPosition,getSegmentReference:h.getSegmentReference,initSegmentReference:h.initSegmentReference,presentationTimeOffset:h.da,mimeType:e.w.mimeType,codecs:e.w.codecs,frameRate:e.w.frameRate,bandwidth:e.bandwidth,width:e.w.width,height:e.w.height,kind:i,encrypted:0<t.drmInfos.length,keyId:a,language:n,label:r,type:e.U.contentType,primary:s,trickModeVideo:null,containsEmsgBoxes:e.w.containsEmsgBoxes,roles:o,channelsCount:e.w.Tb}},e.Pe=function(){this.g=null,Un(this).then(function(e){this.a&&Pn(this,e)}.bind(this)).catch(function(e){this.a&&(e.severity=1,this.a.onError(e),Pn(this,0))}.bind(this))},e.ie=function(n,r,e){var s=e.getAttribute("schemeIdUri")||"",o=e.getAttribute("value")||"",a=Ri(e,"timescale",Vi)||1;Ui(e,"Event").forEach(function(e){var t=Ri(e,"presentationTime",Vi)||0,i=Ri(e,"duration",Vi)||0;i=(t=t/a+n)+i/a,null!=r&&(t=Math.min(t,n+r),i=Math.min(i,n+r)),e={schemeIdUri:s,value:o,startTime:t,endTime:i,id:e.getAttribute("id")||"",eventElement:e},this.a.onTimelineRegionAdded(e)}.bind(this))},e.ue=function(e,t,i){return e=Me(e,this.b.retryParameters),null!=t&&(e.headers.Range="bytes="+t+"-"+(null!=i?i:"")),t=this.a.networkingEngine.request(1,e),he(this.f,t),t.promise.then(function(e){return e.data})},Cn.mpd=kn,Sn["application/dash+xml"]=kn,Vn.prototype.toString=function(){return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(function(e){return e.name+'="'+e.value+'"'}).join(","):"#"+this.name},Vn.prototype.getAttribute=function(t){var e=this.a.filter(function(e){return e.name==t});return e.length?e[0]:null};var ar="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),ur="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function cr(e){try{var t=cr.parse(e);return $({uri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return q(e)}}function hr(){this.h=this.c=null,this.K=1,this.v={},this.H={},this.T={},this.a={},this.b=null,this.l="",this.u=new nr,this.j=this.i=null,this.f=Ar,this.m=null,this.g=0,this.A=1/0,this.o=new ce}function lr(e,r,s){Tr(e,s).then(function(e){var t=br,i=rr(this.u,e.data,s);if(1!=i.type)throw new z(2,4,4017);e=Kn(i.a,"EXT-X-MEDIA-SEQUENCE");var n=r.stream;yr(this,i,e?Number(e.value):0,n.mimeType,n.codecs).then(function(e){e=(r.gb.a=e)[e.length-1],Kn(i.a,"EXT-X-ENDLIST")&&(Lr(this,t.pa),this.b.ja(e.endTime))}.bind(this))}.bind(e))}function dr(e){e.forEach(function(e){var t=e.stream.codecs.split(",");t=t.filter(function(e){return"mp4a.40.34"!=e}),e.stream.codecs=t.join(",")})}function fr(e,t,i){var n=wr(t,"URI");if(n=Jn(e.l,n),e.a[n])return Promise.resolve(e.a[n]);var r=wr(t,"TYPE").toLowerCase();"subtitles"==r&&(r="text");var s,o=Qt(Wn(t,"LANGUAGE","und")),a=Wn(t,"NAME"),u=t.getAttribute("DEFAULT"),c=t.getAttribute("AUTOSELECT"),h=Wn(t,"CHANNELS");return Mr(e,n,i,r,o,!!u||!!c,a,"audio"==r?(s=h,s?(s=s.split("/")[0],parseInt(s,10)):null):null).then(function(e){return this.a[n]?this.a[n]:(this.v[t.id]=e,this.a[n]=e)}.bind(e))}function Mr(e,h,l,d,f,M,p,g){var y=h;h=Jn(e.l,h);var m,N,w="";return Tr(e,h).then(function(e){if(1!=(m=rr(this.u,e.data,h)).type)throw new z(2,4,4017);var t,i,n,r,s,o,a=br,u=Kn((e=m).a,"EXT-X-PLAYLIST-TYPE"),c=Kn(e.a,"EXT-X-ENDLIST");if(c=u&&"VOD"==u.value||c,u=u&&"EVENT"==u.value&&!c,u=!c&&!u,c?Lr(this,a.pa):(Lr(this,u?a.ic:a.Yc),e=Dr(e.a,"EXT-X-TARGETDURATION"),e=Number(e.value),this.g=Math.max(e,this.g),this.A=Math.min(e,this.A)),1==l.length)w=l[0];else{if(null==(e=Nr(d,l)))throw new z(2,4,4025,l);w=e}return t=this,i=d,n=w,s=new b(r=Jn((r=m).uri,r.segments[0].uri)).aa.split(".").pop(),(o=vr[i][s])?Promise.resolve(o):"text"==i?n&&"vtt"!=n?Promise.resolve("application/mp4"):Promise.resolve("text/vtt"):((i=Me([r],t.h.retryParameters)).method="HEAD",i=t.c.networkingEngine.request(1,i),he(t.o,i),i.promise.then(function(e){if(!(e=e.headers["content-type"]))throw new z(2,4,4021,s);return e.split(";")[0]}))}.bind(e)).then(function(e){return N=e,e=Kn(m.a,"EXT-X-MEDIA-SEQUENCE"),yr(this,m,e?Number(e.value):0,N,w)}.bind(e)).then(function(e){var t=e[0].startTime,i=e[e.length-1].endTime,n=i-t;e=new pn(e);var r=pr(m),s=void 0;"text"==d&&(s="subtitle");var o=[];m.segments.forEach(function(e){e=Zn(e.a,"EXT-X-KEY"),o.push.apply(o,e)});var a=!1,u=[],c=null;if(o.forEach(function(e){if("NONE"!=wr(e,"METHOD")){a=!0;var t=wr(e,"KEYFORMAT");(e=(t=jr[t])?t(e):null)&&(e.keyIds.length&&(c=e.keyIds[0]),u.push(e))}}),a&&!u.length)throw new z(2,4,4026);return{stream:r={id:this.K++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e),initSegmentReference:r,presentationTimeOffset:0,mimeType:N,codecs:w,kind:s,encrypted:a,keyId:c,language:f,label:p||null,type:d,primary:M,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:g},gb:this.T[r.id]=e,drmInfos:u,$b:y,Sb:t,Ed:i,duration:n}}.bind(e))}function pr(e){var t=Zn(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new z(2,4,4020);var i=wr(t=t[0],"URI"),n=Jn(e.uri,i);return e=0,i=null,(t=Wn(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),i=(e=Number(e[1]))+t-1),new tn(function(){return[n]},e,i)}function gr(e,t,i,n,r){var s=i.a,o=Jn(e.uri,i.uri);e=Dr(s,"EXTINF").value.split(","),e=r+Number(e[0]),i=0;var a=null;return(s=Kn(s,"EXT-X-BYTERANGE"))&&(i=s.value.split("@"),s=Number(i[0]),a=(i=i[1]?Number(i[1]):t.a+1)+s-1),new nn(n,r,e,function(){return[o]},i,a)}function yr(e,n,r,t,i){var s=n.segments,o=[],a=Jn(n.uri,s[0].uri),u=gr(n,null,s[0],r,0),c=pr(n);return function(e,t,i,n,r,s){if(e.m&&(t=e.a[t].gb.get(n.position)))return Promise.resolve(t.startTime);n=[mr(e,n)],("video/mp4"==r||"audio/mp4"==r)&&(i?n.push(mr(e,i)):n.push(n[0]));return Promise.all(n).then(function(e){if("video/mp4"==r||"audio/mp4"==r)return function(e,t){var i=0;if((new un).D("moov",cn).D("trak",cn).D("mdia",cn).Y("mdhd",function(e){e.s.F(0==e.version?8:16),i=e.s.C(),e.ra.stop()}).parse(t,!0),!i)throw new z(2,4,4030);var n=0,r=!1;if((new un).D("moof",cn).D("traf",cn).Y("tfdt",function(e){n=(0==e.version?e.s.C():e.s.Sa())/i,r=!0,e.ra.stop()}).parse(e,!0),!r)throw new z(2,4,4030);return n}(e[0].data,e[1].data);if("audio/mpeg"==r)return 0;if("video/mp2t"==r)return function(e){function t(){throw new z(2,4,4030)}e=new rn(new DataView(e),0);for(var i=0,n=0;;){if(i=e.W(),71!=(n=e.ca())&&t(),16384&e.eb()||t(),0!=(n=(48&e.ca())>>4)&&2!=n||t(),3==n&&(n=e.ca(),e.F(n)),1==e.C()>>8)return e.F(3),0!=(i=e.ca()>>6)&&1!=i||t(),0==e.ca()&&t(),i=e.ca(),n=e.eb(),e=e.eb(),(1073741824*((14&i)>>1)+((65534&n)<<14|(65534&e)>>1))/9e4;e.seek(i+188),71!=(n=e.ca())&&(e.seek(i+192),n=e.ca()),71!=n&&(e.seek(i+204),n=e.ca()),71!=n&&t(),e.Oc(1)}}(e[0].data);if("application/mp4"!=r&&0!=r.indexOf("text/"))throw new z(2,4,4030);e=e[0].data;var t=Oe(r,s);if(It[t]){var i=new vt(null);i.f=new It[t],e=i.Mb(e)}else e=0;return e}.bind(e))}(e,n.uri,c,u,t,i).then(function(e){a.split("/").pop();for(var t=0;t<s.length;++t){var i=o[o.length-1];i=gr(n,i,s[t],r+t,0==t?e:i.endTime),o.push(i)}return o}.bind(e))}function mr(e,t){var i=e.c.networkingEngine,n=Me(t.c(),e.h.retryParameters),r={},s=t.b;r.Range="bytes="+s+"-"+(s+2048-1);var o={};return 0==s&&null==t.a||(s="bytes="+s+"-",null!=t.a&&(s+=t.a),o.Range=s),n.headers=r,r=i.request(1,n),he(e.o,r),r.promise.catch(function(){return L("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",n.uris[0]),n.headers=o,i.request(1,n)})}function Nr(e,t){for(var i=Er[e],n=0;n<i.length;n++)for(var r=0;r<t.length;r++)if(i[n].test(t[r].trim()))return t[r].trim();return"text"==e?"":null}function wr(e,t){var i=e.getAttribute(t);if(!i)throw new z(2,4,4023,t);return i.value}function Dr(e,t){var i=Kn(e,t);if(!i)throw new z(2,4,4024,t);return i}function Tr(e,t){var i=e.c.networkingEngine.request(0,Me([t],e.h.retryParameters));return he(e.o,i),i.promise}N("shaka.net.DataUriPlugin",cr),cr.parse=function(e){var t=e.split(":");if(t.length<2||"data"!=t[0])throw new z(2,1,1004,e);if((t=t.slice(1).join(":").split(",")).length<2)throw new z(2,1,1004,e);var i=t[0];t=M.decodeURIComponent(t.slice(1).join(","));var n=null;if(1<(i=i.split(";")).length&&(n=i[1]),"base64"==n)e=Fe(t).buffer;else{if(n)throw new z(2,1,1005,e);e=Qe(t)}return{data:e,contentType:i[0]}},fe("data",cr),N("shaka.hls.HlsParser",hr),(e=hr.prototype).configure=function(e){this.h=e},e.start=function(t,e){return this.c=e,this.l=t,Tr(this,t).then(function(e){return function(e,t,i){if(0!=(t=rr(e.u,t,i)).type)throw new z(2,4,4022);return(n=e,r=t,s=r.a,o=Zn(r.a,"EXT-X-MEDIA").filter(function(e){return"SUBTITLES"==wr(e,"TYPE")}.bind(n)).map(function(e){return t=this,wr(i=e,"TYPE"),fr(t,i,[]).then(function(e){return e.stream});var t,i}.bind(n)),Promise.all(o).then(function(t){var e=Zn(s,"EXT-X-STREAM-INF").map(function(e){return function(e,o,t){var a=Wn(o,"CODECS","avc1.42E01E,mp4a.40.2").split(","),u=o.getAttribute("RESOLUTION"),i=null,n=null,c=Wn(o,"FRAME-RATE"),r=Number(wr(o,"BANDWIDTH"));if(u){var s=u.value.split("x");i=s[0],n=s[1]}t=Zn(t.a,"EXT-X-MEDIA");var h=Wn(o,"AUDIO"),l=Wn(o,"VIDEO");if(h?t=qn(t,"AUDIO",h):l&&(t=qn(t,"VIDEO",l)),s=Nr("text",a)){var d=Wn(o,"SUBTITLES");d&&(d=qn(t,"SUBTITLES",d)).length&&(e.v[d[0].id].stream.codecs=s),a.splice(a.indexOf(s),1)}t=t.map(function(e){return fr(this,e,a)}.bind(e));var f=[],M=[];return Promise.all(t).then(function(e){if(h?f=e:l&&(M=e),e=!1,f.length||M.length)if(f.length)if(wr(o,"URI")==f[0].$b){var t="audio";e=!0}else t="video";else t="audio";else 1==a.length?(t=Nr("video",a),t=u||c||t?"video":"audio"):(t="video",a=[a.join(",")]);return e?Promise.resolve():(i=this,n=a,r=t,s=wr(o,"URI"),s=Jn(i.l,s),i.a[s]?Promise.resolve(i.a[s]):Mr(i,s,n,r,"und",!1,null,null).then(function(e){return this.a[s]?this.a[s]:this.a[s]=e}.bind(i)));var i,n,r,s}.bind(e)).then(function(e){return e&&("audio"==e.stream.type?f=[e]:M=[e]),M&&dr(M),f&&dr(f),function(e,t,i,n,r,s,o){i.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(s)||void 0,e.frameRate=Number(o)||void 0)}.bind(e)),t.length||(t=[null]),i.length||(i=[null]);for(var a=[],u=0;u<t.length;u++)for(var c=0;c<i.length;c++){var h=t[u]?t[u].stream:null,l=i[c]?i[c].stream:null,d=t[u]?t[u].drmInfos:null,f=i[c]?i[c].drmInfos:null,M=void 0;if(h&&l){if(d.length&&f.length&&!(0<et(d,f).length))continue;M=et(d,f)}else h?M=d:l&&(M=f);d=(i[u]?i[u].$b:"")+" - "+(t[u]?t[u].$b:""),e.H[d]||(p=h,g=l,y=n,m=M,h={id:e.K++,language:p?p.language:"und",primary:!!p&&p.primary||!!g&&g.primary,audio:p,video:g,bandwidth:y,drmInfos:m,allowedByApplication:!0,allowedByKeySystem:!0},a.push(h),e.H[d]=h)}var p,g,y,m;return a}(this,f,M,r,i,n,c)}.bind(e))}(this,e,r)}.bind(this));return Promise.all(e).then(function(e){return{startTime:0,variants:e.reduce(Ee,[]),textStreams:t}}.bind(this))}.bind(n))).then(function(e){this.c.filterAllPeriods([e]);var t=1/0,i=0,n=0,r=1/0;for(o in this.a){var s=this.a[o];t=Math.min(t,s.Sb),i=Math.max(i,s.Sb),n=Math.max(n,s.Ed),"text"!=s.stream.type&&(r=Math.min(r,s.duration))}var o=null;if(s=0,this.f!=br.pa&&(o=Date.now()/1e3-n,s=3*this.g),this.b=new zn(o,s),this.b.Bb(this.f==br.pa),this.b.yb(this.g),this.f!=br.pa){for(t=3*this.g,this.b.Sc(t),this.i=this.A,this.f==br.ic&&this.b.cc(t),t=0;95443.7176888889<=i;)t+=95443.7176888889,i-=95443.7176888889;if(t)for(var a in this.a)(i=this.a[a]).Sb<95443.7176888889&&(i.stream.presentationTimeOffset=-t,i.gb.offset(t))}else for(var u in this.b.ja(r),this.a)(a=this.a[u]).stream.presentationTimeOffset=t,a.gb.offset(-t),gn(a.gb,r);this.m={presentationTimeline:this.b,periods:[e],offlineSessionIds:[],minBufferTime:0}}.bind(e));var n,r,s,o}(this,e.data,t).then(function(){return Ir(this,this.i),this.m}.bind(this))}.bind(this))},e.stop=function(){return this.h=this.c=null,this.v={},this.H={},this.m=null,this.o.destroy()},e.update=function(){if(this.f!=br.pa){var e,t=[];for(e in this.a)t.push(lr(this,this.a[e],e));return Promise.all(t)}},e.onExpirationUpdated=function(){};var Er={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},vr={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function Ir(e,t){null!=e.i&&null!=t&&(e.j=M.setTimeout(e.M.bind(e),1e3*t))}function Lr(e,t){e.f=t,e.b&&e.b.Bb(e.f==br.pa),e.f==br.pa&&null!=e.j&&(M.clearTimeout(e.j),e.j=null,e.i=null)}hr.prototype.M=function(){this.c&&(this.j=null,this.update().then(function(){Ir(this,this.i)}.bind(this)).catch(function(e){this.c&&(e.severity=1,this.c.onError(e),Ir(this,0))}.bind(this)))};var jr={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=wr(e,"METHOD");return"SAMPLE-AES-CENC"!=t&&"SAMPLE-AES-CTR"!=t?null:(t=wr(e,"URI"),t=cr.parse(t),t=Ae("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Wn(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t)}},Ar="VOD",br={pa:Ar,Yc:"EVENT",ic:"LIVE"};function xr(e,t,i,n){this.a=e,this.u=t,this.o=i,this.v=n,this.h=new ye,this.b=null,this.g=!1,this.m=e.readyState,this.c=!1,this.j=this.A=-1,this.f=this.i=!1,t=this.l.bind(this),me(this.h,e,"waiting",t),this.b=new Pe(t),Be(this.b,.25)}function Sr(e,t,i){this.a=e,this.i=t,this.h=i,this.c=new ye,this.f=1,this.g=!1,this.b=null,0<e.readyState?this.Dc():Ne(this.c,e,"loadedmetadata",this.Dc.bind(this)),me(this.c,e,"ratechange",this.Vd.bind(this))}function Cr(e){return 0<e.a.readyState?e.a.currentTime:e.h}function Or(e,t){0<e.a.readyState?function(t,i,n){t.a.currentTime=n;var r=0;setTimeout(function e(){!t.a||10<=r++||t.a.currentTime!=i||(t.a.currentTime=n,setTimeout(e,100))},100)}(e,e.a.currentTime,t):(e.h=t,setTimeout(e.i,0))}function zr(e,t){null!=e.b&&(e.b.cancel(),e.b=null),e.f=t,e.a.playbackRate=e.g||t<0?0:t,!e.g&&t<0&&(e.b=new Pe(function(){e.a.currentTime+=t/4}),Be(e.b,.25))}function kr(e,t,i,n,r,s){this.c=e,this.b=t,this.h=i,this.i=r,this.f=null,this.g=new xr(e,t,i,s),t=this.Xd.bind(this),i=this.b.presentationTimeline,null==n?n=1/0>i.S()?i.Ka():i.la():n<0&&(n=i.la()+n),n=_r(this,Rr(this,n)),this.a=new Sr(e,t,n),this.f=new Pe(this.Ud.bind(this)),Be(this.f,.25)}function Ur(e){var t=Cr(e.a);return 0<e.c.readyState&&(e.c.paused||(t=Rr(e,t))),t}function _r(e,t){var i=e.b.presentationTimeline.S();return i<=t?i-e.h.durationBackoff:t}function Qr(e,t){var i=it.bind(null,e.c.buffered),n=Math.max(e.b.minBufferTime||0,e.h.rebufferingGoal),r=e.b.presentationTimeline,s=r.Ka(),o=r.la(),a=r.S();o-s<3&&(s=o-3);var u=r.Ya(n),c=r.Ya(5);return n=r.Ya(n+5),a<=t?_r(e,t):o<t?o:t<s?i(c)?c:n:u<=t||i(t)?t:n}function Rr(e,t){var i=e.b.presentationTimeline.Ka();return t<i?i:(i=e.b.presentationTimeline.la())<t?i:t}function Pr(e,t,i,n,r,s,o){this.a=e,this.v=t,this.g=i,this.u=n,this.l=r,this.h=s,this.A=o,this.c=[],this.j=new ye,this.b=!1,this.i=-1,this.f=null,Yr(this)}function Br(e){var t=ae(e);return t.eventElement=e.eventElement,t}function Yr(e){Fr(e),e.f=M.setTimeout(e.H.bind(e),250)}function Fr(e){e.f&&(M.clearTimeout(e.f),e.f=null)}function Gr(e,t){this.a=t,this.b=e,this.h=null,this.j=1,this.m=Promise.resolve(),this.g=[],this.i={},this.c={},this.o=!1,this.A=null,this.v=this.f=this.l=!1,this.u=0}function Vr(e){var t=Ur(e.a.Qa);return e.b.periods[ri(e.b,t)]}function Hr(e){var t=e.c.video||e.c.audio;return t?e.b.periods[t.Ca]:null}function Wr(e){return Zr(e,"audio")}function Xr(e){return Zr(e,"video")}function Zr(e,t){var i=e.c[t];return i?i.sa||i.stream:null}function Kr(t,i,n){St(t.a.J,"text"),t.u++,t.v=!1;var r=t.u;return t.a.J.init({text:i},!1).then(function(){return ss(t,[i])}).then(function(){if(!t.f&&n&&t.u==r&&!t.c.text&&!t.v){var e=Ur(t.a.Qa);t.c.text=ns(i,ri(t.b,e)),ls(t,t.c.text,0)}})}function qr(e){e.v=!0,e.c.text&&(ds(e.c.text),delete e.c.text)}function Jr(e,t){var i=e.c.video;if(i){var n=i.stream;if(n)if(t){var r=n.trickModeVideo;r&&!i.sa&&(es(e,r,!1),i.sa=n)}else(n=i.sa)&&es(e,n,!(i.sa=null))}}function $r(e,t,i){t.video&&es(e,t.video,i),t.audio&&es(e,t.audio,i)}function es(e,t,i){var n=e.c[t.type];if(!n&&"text"==t.type&&e.h.ignoreTextStreamFailures)Kr(e,t,!0);else if(n){var r=si(e.b,t);i&&r!=n.Ca?ts(e):(n.sa&&(t.trickModeVideo?t=(n.sa=t).trickModeVideo:n.sa=null),(r=e.g[r])&&r.Ta&&(r=e.i[t.id])&&r.Ta&&n.stream!=t&&("text"==t.type&&jt(e.a.J,Oe(t.mimeType,t.codecs)),n.stream=t,n.xb=!0,i&&(n.za?n.Cb=!0:n.Da?(n.va=!0,n.Cb=!0):(ds(n),hs(e,n,!0)))))}}function ts(e){for(var t in e.c){var i=e.c[t];i.za||i.va||(i.Da?i.va=!0:null==At(e.a.J,t)?null==i.ua&&ls(e,i,0):(ds(i),hs(e,i,!1)))}}function is(i,e,n){var t=Ur(i.a.Qa),r=ri(i.b,t),s={},o=[];return e.variant&&e.variant.audio&&(s.audio=e.variant.audio,o.push(e.variant.audio)),e.variant&&e.variant.video&&(s.video=e.variant.video,o.push(e.variant.video)),e.text&&(s.text=e.text,o.push(e.text)),i.a.J.init(s,i.h.forceTransmuxTS).then(function(){if(!i.f){var e=i.b.presentationTimeline.S();return e<1/0?i.a.J.ja(e):i.a.J.ja(Math.pow(2,32)),ss(i,o)}}).then(function(){if(!i.f)for(var e in s){var t=s[e];i.c[e]||(i.c[e]=ns(t,r,n),ls(i,i.c[e],0))}})}function ns(e,t,i){return{stream:e,type:e.type,Ma:null,ma:null,sa:null,xb:!0,Ca:t,endOfStream:!1,Da:!1,ua:null,va:!1,Cb:!1,za:!1,Zb:!1,$a:!1,Mc:i||0}}function rs(e,t){var i=e.g[t];if(i)return i.promise;i={promise:new W,Ta:!1},e.g[t]=i;var n=e.b.periods[t].variants.map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),e.video&&e.video.trickModeVideo&&t.push(e.video.trickModeVideo),t}).reduce(Ee,[]).filter(Le);return n.push.apply(n,e.b.periods[t].textStreams),e.m=e.m.then(function(){if(!this.f)return ss(this,n)}.bind(e)).then(function(){this.f||(this.g[t].promise.resolve(),this.g[t].Ta=!0)}.bind(e)).catch(function(e){this.f||(this.g[t].promise.catch(function(){}),this.g[t].promise.reject(),delete this.g[t],this.a.onError(e))}.bind(e)),i.promise}function ss(e,i){i.map(function(e){return e.id}).filter(Le);for(var t=[],n=0;n<i.length;++n){var r=i[n],s=e.i[r.id];s?t.push(s.promise):(e.i[r.id]={promise:new W,Ta:!1},t.push(r.createSegmentIndex()))}return Promise.all(t).then(function(){if(!this.f)for(var e=0;e<i.length;++e){var t=this.i[i[e].id];t.Ta||(t.promise.resolve(),t.Ta=!0)}}.bind(e)).catch(function(e){if(!this.f){for(var t=0;t<i.length;t++)this.i[i[t].id].promise.catch(function(){}),this.i[i[t].id].promise.reject(),delete this.i[i[t].id];return Promise.reject(e)}}.bind(e))}function os(e,t,i){return t.Ma&&t.ma?e.b.periods[si(e.b,t.Ma)].startTime+t.ma.endTime:Math.max(i,t.Mc)}function as(e,t,i,n){return i=e.b.periods[i],(t=t.stream.getSegmentReference(n))?(e=(n=e.b.presentationTimeline).Za(),n=n.La(),i.startTime+t.endTime<e||i.startTime+t.startTime>n?null:t):null}function us(e){return!e.Da&&null==e.ua&&!e.va&&!e.za}function cs(e,t){var i=Me(t.c(),e.h.retryParameters);if(0!=t.b||null!=t.a){var n="bytes="+t.b+"-";null!=t.a&&(n+=t.a),i.headers.Range=n}return e.a.Oa.request(1,i).promise.then(function(e){return e.data})}function hs(e,t,i){t.va=!1,t.Cb=!1,t.za=!0,St(e.a.J,t.type).then(function(){if(!this.f&&i)return this.a.J.flush(t.type)}.bind(e)).then(function(){this.f||(t.Ma=null,t.ma=null,t.za=!1,t.endOfStream=!1,ls(this,t,0))}.bind(e))}function ls(e,t,i){t.ua=M.setTimeout(e.Re.bind(e,t),1e3*i)}function ds(e){null!=e.ua&&(M.clearTimeout(e.ua),e.ua=null)}function fs(e,t){Z(e.A).then(function(){this.f||(this.a.onError(t),t.handled||this.h.failureCallback(t))}.bind(e))}function Ms(e,t,i,n,r,s){if(200<=i&&i<=299&&202!=i)return r&&(n=r),{uri:n,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=_e(t)}catch(e){}throw new z(401==i||403==i?2:1,1,1001,n,i,r,e,s)}function ps(n,e,r){var i=new ps.b;Ce(e.headers,function(e,t){i.append(e,t)});var s,t=new ps.a,o={body:e.body||void 0,headers:i,method:e.method,signal:t.signal,credentials:e.allowCrossSiteCredentials?"include":void 0},a=!1,u=!1;return e.retryParameters.timeout&&(s=setTimeout(function(){u=!0,t.abort()},e.retryParameters.timeout)),new K(o=(e=ps.c)(n,o).then(function(t){return clearTimeout(s),t.arrayBuffer().then(function(e){var i={};return t.headers.forEach(function(e,t){i[t.trim()]=e}),Ms(i,e,t.status,n,t.url,r)})}).catch(function(e){return clearTimeout(s),a?Promise.reject(new z(1,1,7001,n,r)):u?Promise.reject(new z(1,1,1003,n,r)):null==e.severity?Promise.reject(new z(1,1,1002,n,e,r)):Promise.reject(e)}),function(){return a=!0,t.abort(),Promise.resolve()})}function gs(s,t,o){var i=new gs.f;return new K(new Promise(function(n,r){for(var e in i.open(t.method,s,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){r(new z(1,1,7001,s,o))},i.onload=function(e){var t=(e=e.target).getAllResponseHeaders().trim().split("\r\n").reduce(function(e,t){var i=t.split(": ");return e[i[0].toLowerCase()]=i.slice(1).join(": "),e},{});try{var i=Ms(t,e.response,e.status,s,e.responseURL,o);n(i)}catch(e){r(e)}},i.onerror=function(e){r(new z(1,1,1002,s,e,o))},i.ontimeout=function(){r(new z(1,1,1003,s,o))},t.headers)i.setRequestHeader(e.toLowerCase(),t.headers[e]);i.send(t.body)}),function(){return i.abort(),Promise.resolve()})}function ys(e){this.a={},this.c=Promise.resolve(),this.h=!1,this.i=e,this.f=this.b=this.g=0}function ms(e,t,i,n,r){e.a[t]=e.a[t]||[],e.a[t].push({request:i,nc:n,Hd:r})}function Ns(n,o){var e=Se(n.a);n.a={},e.forEach(function(e){e.forEach(function(e){n.b+=e.nc})});var t=Promise.resolve().then(function(){return ws(n),Promise.all(e.map(function(e){return r=n,s=o,t=e,i=Promise.resolve(),t.forEach(function(n){i=i.then(function(){return ws(r),t=r,e=s,i=n,Promise.resolve().then(function(){return ws(t),e.request(1,i.request).promise}).then(function(e){return ws(t),t.g+=i.nc,t.f+=e.data.byteLength,t.i(t.b?t.g/t.b:0,t.f),i.Hd(e.data)});var t,e,i})}),i;var r,s,t,i}))});return n.c=n.c.then(function(){return t}),t}function ws(e){if(e.h)throw new z(2,9,7001)}function Ds(e,t){var i=this;this.c=e,this.b=e.objectStore(t),this.a=new W,e.onabort=function(e){e.preventDefault(),i.a.reject()},e.onerror=function(e){e.preventDefault(),i.a.reject()},e.oncomplete=function(){i.a.resolve()}}function Ts(e){this.b=e,this.a=[]}function Es(e,t){return vs(e,t,"readwrite")}function vs(e,t,i){var n=new Ds(i=e.b.transaction([t],i),t);return e.a.push(n),n.promise().then(function(){se(e.a,n)},function(){se(e.a,n)}),n}function Is(){this.a={}}function Ls(e,n){Ce(e.a,function(i,e){Ce(e.getCells(),function(e,t){n({$:i,O:e},t)})})}function js(e,t,i){if(!(e=e.a[t]))throw new z(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells()[i]))throw new z(2,9,9013,"Could not find cell with name "+i);return t}function As(){return Se(bs).some(function(e){return!!(e=e())&&(e.destroy(),!0)})}Cn.m3u8=hr,Sn["application/x-mpegurl"]=hr,Sn["application/vnd.apple.mpegurl"]=hr,xr.prototype.destroy=function(){var e=this.h.destroy();return this.v=this.u=this.a=this.h=null,null!=this.b&&(this.b.cancel(),this.b=null),e},xr.prototype.cb=function(){this.f=!0,this.l()},xr.prototype.l=function(){if(0!=this.a.readyState){if(this.a.seeking){if(!this.g)return}else this.g=!1;if(!this.a.paused){this.a.readyState!=this.m&&(this.c=!1,this.m=this.a.readyState);var e=this.o.smallGapLimit,t=this.a.currentTime,i=this.a.buffered;e:{if(i&&i.length&&!(1==i.length&&i.end(0)-i.start(0)<1e-6)){var n=.1;/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(n=.5);for(var r=0;r<i.length;r++)if(i.start(r)>t&&(0==r||i.end(r-1)-t<=n)){n=r;break e}}n=null}if(null==n){if(i=this.a.currentTime,t=this.a.buffered,this.a.readyState<3&&0<this.a.playbackRate)if(this.j!=i)this.j=i,this.A=Date.now(),this.i=!1;else if(!this.i&&this.A<Date.now()-1e3)for(n=0;n<t.length;n++)if(i>=t.start(n)&&i<t.end(n)-.5){this.a.currentTime+=.1,this.j=this.a.currentTime,this.i=!0;break}}else if(0!=n||this.f){r=i.start(n);var s=this.u.presentationTimeline.la();if(!(s<=r)){e=(s=r-t)<=e;var o=!1;s<.001||(e||this.c||(this.c=!0,(t=new Te("largegap",{currentTime:t,gapSize:s})).cancelable=!0,this.v(t),this.o.jumpLargeGaps&&!t.defaultPrevented&&(o=!0)),!e&&!o)||(0!=n&&i.end(n-1),this.a.currentTime=r)}}}}},(e=Sr.prototype).destroy=function(){var e=this.c.destroy();return(this.c=null)!=this.b&&(this.b.cancel(),this.b=null),this.i=this.a=null,e},e.Xa=function(){return this.f},e.Vd=function(){var e=this.g||this.f<0?0:this.f;this.a.playbackRate&&this.a.playbackRate!=e&&zr(this,this.a.playbackRate)},e.Dc=function(){Math.abs(this.a.currentTime-this.h)<.001?this.Ec():(Ne(this.c,this.a,"seeking",this.Ec.bind(this)),this.a.currentTime=0==this.a.currentTime?this.h:this.a.currentTime)},e.Ec=function(){var e=this;me(this.c,this.a,"seeking",function(){return e.i()})},(e=kr.prototype).destroy=function(){var e=Promise.all([this.a.destroy(),this.g.destroy()]);return this.g=this.a=null,null!=this.f&&(this.f.cancel(),this.f=null),this.i=this.h=this.b=this.c=null,e},e.Xa=function(){return this.a.Xa()},e.cb=function(){this.g.cb()},e.Ud=function(){if(0!=this.c.readyState&&!this.c.paused){var e=this.c.currentTime,t=this.b.presentationTimeline,i=t.Ka();(t=t.la())-i<3&&(i=t-3),e<i&&(e=Qr(this,e),this.c.currentTime=e)}},e.Xd=function(){var e=this.g;e.g=!0,e.f=!1,e.c=!1;var t=Qr(this,e=Cr(this.a));.001<Math.abs(t-e)?Or(this.a,t):this.i()},Pr.prototype.destroy=function(){var e=this.j?this.j.destroy():Promise.resolve();return this.j=null,Fr(this),this.A=this.h=this.l=this.u=this.g=this.v=this.a=null,this.c=[],e},Pr.prototype.o=function(t){if(!this.c.some(function(e){return e.info.schemeIdUri==t.schemeIdUri&&e.info.startTime==t.startTime&&e.info.endTime==t.endTime})){var e={info:t,status:1};this.c.push(e);var i=new Te("timelineregionadded",{detail:Br(t)});this.h(i),this.m(!0,e)}},Pr.prototype.m=function(e,t){var i=t.info.startTime>this.a.currentTime?1:t.info.endTime<this.a.currentTime?3:2,n=2==t.status,r=2==i;i!=t.status&&((!e||n||r)&&(n||this.h(new Te("timelineregionenter",{detail:Br(t.info)})),r||this.h(new Te("timelineregionexit",{detail:Br(t.info)}))),t.status=i)},Pr.prototype.H=function(){this.f=null,Yr(this);var e=ri(this.g,this.a.currentTime);e!=this.i&&(-1!=this.i&&this.A(),this.i=e),e=nt(this.a.buffered,this.a.currentTime);var t=tt(this.a.buffered),i=this.g.presentationTimeline,n=i.La();t=i.P()&&n<=t,i=!(i=this.v).g||"ended"==i.g.readyState,t=t||this.a.ended||i,this.b?(i=Math.max(this.g.minBufferTime||0,this.u.rebufferingGoal),(t||i<=e)&&0!=this.b&&(this.b=!1,this.l(!1))):!t&&e<.5&&1!=this.b&&(this.b=!0,this.l(!0)),this.c.forEach(this.m.bind(this,!1))},(e=Gr.prototype).destroy=function(){for(var e in this.c)ds(this.c[e]);return this.h=this.c=this.i=this.g=this.m=this.b=this.a=null,this.f=!0,Promise.resolve()},e.configure=function(e){this.h=e,this.A=new X({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},e.init=function(){var e=Ur(this.a.Qa);return(e=this.a.yc(this.b.periods[ri(this.b,e)])).variant||e.text?is(this,e).then(function(){!this.f&&this.a&&this.a.Ld&&this.a.Ld()}.bind(this)):Promise.reject(new z(2,5,5005))},e.Re=function(e){if(!this.f&&!e.Da&&null!=e.ua&&!e.za)if(e.ua=null,e.va)hs(this,e,e.Cb);else{try{var t=function(t,e){var i=Ur(t.a.Qa),n=os(t,e,i),r=si(t.b,e.stream),s=ri(t.b,n),o=(u=t.a.J,c=e.type,h=i,"text"==c?null==(u=u.a).b||u.b<h?0:u.b-Math.max(h,u.a):nt(u=bt(u,c),h)),a=Math.max(t.j*Math.max(t.b.minBufferTime||0,t.h.rebufferingGoal),t.j*t.h.bufferingGoal);var u,c,h;if(n>=t.b.presentationTimeline.S())return e.endOfStream=!0,null;if(e.endOfStream=!1,(e.Ca=s)!=r)return null;if(a<=o)return.5;if(l=t.a.J,d=e.type,s="text"==d?l.a.b:tt(bt(l,d)),!(s=function(e,t,i,n,r){if(t.ma&&t.stream==t.Ma)return as(e,t,r,t.ma.position+1);if(null==(i=t.ma?t.stream.findSegmentPosition(Math.max(0,e.b.periods[si(e.b,t.Ma)].startTime+t.ma.endTime-e.b.periods[r].startTime)):t.stream.findSegmentPosition(Math.max(0,(n||i)-e.b.periods[r].startTime))))return null;var s=null;return null==n&&(s=as(e,t,r,Math.max(0,i-1))),s||as(e,t,r,i)}(t,e,i,s,r)))return 1;var l,d;var f=1/0;return Se(t.c).forEach(function(e){f=Math.min(f,os(t,e,i))}),n>=f+t.b.presentationTimeline.a?1:(e.Mc=0,M=t,p=e,g=i,y=r,m=s,b=M.b.periods[y],x=p.stream,S=M.b.presentationTimeline.S(),C=M.b.periods[y+1],N=M,w=p,D=y,T=Math.max(0,b.startTime-.1),E=C?C.startTime:S,y=w.xb?(v=N.a.J,I=w.type,L=N.b.periods[D].startTime-w.stream.presentationTimeOffset,j=T,A=E,D="text"==I?(v.a.g=L,(v=v.a).i=j,v.h=A,Promise.resolve()):Promise.all([Ct(v,I,v.bd.bind(v,I)),Ct(v,I,v.Ge.bind(v,I,L)),Ct(v,I,v.De.bind(v,I,j,A))]),w.stream.initSegmentReference?(N=cs(N,w.stream.initSegmentReference).then(function(e){if(!this.f)return xt(this.a.J,w.type,e,null,null)}.bind(N)).catch(function(e){return w.xb=!0,Promise.reject(e)}),Promise.all([D,N])):D):Promise.resolve(),p.Da=!0,p.xb=!1,S=cs(M,m),Promise.all([y,S]).then(function(e){if(!this.f&&!this.l)return t=this,i=p,n=g,r=b,s=x,o=m,a=e[1],s.containsEmsgBoxes&&(new un).Y("emsg",t.he.bind(t,r,o)).parse(a),(u=t,c=i,h=n,l=Math.max(u.h.bufferBehind,u.b.presentationTimeline.a),d=At(u.a.J,c.type),null==d?Promise.resolve():(h=h-d-l)<=0?Promise.resolve():u.a.J.remove(c.type,d,d+h).then(function(){}.bind(u))).then(function(){if(!this.f)return xt(this.a.J,i.type,a,o.startTime,o.endTime)}.bind(t)).then(function(){if(!this.f)return i.Ma=s,i.ma=o,Promise.resolve()}.bind(t));var t,i,n,r,s,o,a,u,c,h,l,d}.bind(M)).then(function(){this.f||this.l||(p.Da=!1,p.Zb=!1,p.va||this.a.cb(),ls(this,p,0),function(e,t){if(!e.o&&(e.o=Se(e.c).every(function(e){return"text"==e.type||!e.va&&!e.za&&e.ma}),e.o)){var i=si(e.b,t);for(e.g[i]||rs(e,i).then(function(){this.f||this.a.xc()}.bind(e)).catch(ve),i=0;i<e.b.periods.length;++i)rs(e,i).catch(ve);e.a.$d&&e.a.$d()}}(this,x))}.bind(M)).catch(function(e){this.f||this.l||(p.Da=!1,"text"==p.type&&this.h.ignoreTextStreamFailures?delete this.c.text:3017==e.code?function(e,t,i){if(!Se(e.c).some(function(e){return e!=t&&e.Zb})){var n=Math.round(100*e.j);if(20<n)e.j-=.2;else{if(!(4<n))return t.$a=!0,e.l=!0,e.a.onError(i);e.j-=.04}t.Zb=!0}ls(e,t,4)}(this,p,e):(p.$a=!0,e.severity=2,fs(this,e)))}.bind(M)),null);var M,p,g,y,m,N,w,D,T,E,v,I,L,j,A,b,x,S,C}(this,e);null!=t&&(ls(this,e,t),e.$a=!1)}catch(e){return void fs(this,e)}t=Se(this.c),function(e,t){if(t.Ca!=si(e.b,t.stream)){var o=t.Ca,a=Se(e.c);a.every(function(e){return e.Ca==o})&&a.every(us)&&rs(e,o).then(function(){if(!this.f&&a.every(function(e){var t=si(this.b,e.stream);return us(e)&&e.Ca==o&&t!=o}.bind(this))){var e=this.b.periods[o],t=this.a.yc(e),i={};for(var n in t.variant&&t.variant.video&&(i.video=t.variant.video),t.variant&&t.variant.audio&&(i.audio=t.variant.audio),t.text&&(i.text=t.text),this.c)if(!i[n]&&"text"!=n)return void this.a.onError(new z(2,5,5005));for(var r in i)if(!this.c[r]){if("text"!=r)return void this.a.onError(new z(2,5,5005));is(this,{text:i.text},e.startTime),delete i[r]}for(var s in this.c)(e=i[s])?(es(this,e,!1),ls(this,this.c[s],0)):delete this.c[s];this.a.xc()}}.bind(e)).catch(ve)}}(this,e),t.every(function(e){return e.endOfStream})&&this.a.J.endOfStream().then(function(){if(!this.f){var e=this.a.J.S();e<this.b.presentationTimeline.S()&&this.b.presentationTimeline.ja(e)}}.bind(this))}},e.he=function(e,t,i){var n=i.s.Xb(),r=i.s.Xb(),s=i.s.C(),o=i.s.C(),a=i.s.C(),u=i.s.C();i=i.s.Ea(i.s.G.byteLength-i.s.W()),e=e.startTime+t.startTime+o/s,"urn:mpeg:dash:event:2012"==n?this.a.Nd():this.a.onEvent(new Te("emsg",{detail:{startTime:e,endTime:e+a/s,schemeIdUri:n,value:r,timescale:s,presentationTimeDelta:o,eventDuration:a,id:u,messageData:i}}))},N("shaka.net.HttpFetchPlugin",ps),ps.isSupported=ps.isSupported=function(){return!(!M.fetch||!M.AbortController)},ps.c=M.fetch,ps.a=M.AbortController,ps.b=M.Headers,ps.isSupported()&&(fe("http",ps,2),fe("https",ps,2)),N("shaka.net.HttpXHRPlugin",gs),gs.f=M.XMLHttpRequest,fe("http",gs,1),fe("https",gs,1),ys.prototype.destroy=function(){this.h=!0;var e=this.c.catch(function(){});return this.c=Promise.resolve(),e},Ds.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch(function(){})},Ds.prototype.store=function(){return this.b},Ds.prototype.promise=function(){return this.a},Ts.prototype.destroy=function(){return Promise.all(this.a.map(function(e){return e.abort()}))},Is.prototype.destroy=function(){var e=Se(this.a).map(function(e){return e.destroy()});return this.a={},Promise.all(e)},Is.prototype.init=function(){var n=this;Ce(bs,function(e,t){var i=t();i&&(n.a[e]=i)});var e=Se(this.a).map(function(e){return e.init()});return Promise.all(e)},N("shaka.offline.StorageMuxer.register",function(e,t){bs[e]=t}),N("shaka.offline.StorageMuxer.unregister",function(e){delete bs[e]});var bs={};function xs(e){this.a=new Ts(e)}function Ss(e){return Promise.reject(new z(2,9,9011,"Cannot add new value to "+e))}function Cs(e,t,i,n){var r=(e=Es(e.a,t)).store();return i.forEach(function(e){r.delete(e).onsuccess=function(){return n(e)}}),e.promise()}function Os(e,t,i){var n=(e=vs(e.a,t,"readonly")).store(),r={},s=[];return i.forEach(function(t){n.get(t).onsuccess=function(e){null==(e=e.target.result)&&s.push(t),r[t]=e}}),e.promise().then(function(){return s.length?Promise.reject(new z(2,9,9012,"Could not find values for "+s)):i.map(function(e){return r[e]})})}function zs(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(ks),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}}function ks(e){return function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType}),n=e.streams.filter(function(e){return"video"==e.contentType});if(!t.every(function(e){return e.variantIds})||!n.every(function(e){return e.variantIds})){t.forEach(function(e){e.variantIds=[]}),n.forEach(function(e){e.variantIds=[]});var r=0;if(n.length&&!t.length){var i=r++;n.forEach(function(e){e.variantIds.push(i)})}if(!n.length&&t.length){var s=r++;t.forEach(function(e){e.variantIds.push(s)})}n.length&&t.length&&t.forEach(function(i){n.forEach(function(e){var t=r++;i.variantIds.push(t),e.variantIds.push(t)})})}}(e),e.streams.forEach(function(){}),{startTime:e.startTime,streams:e.streams.map(Us)}}function Us(e){var t=e.Bd?Rs(e.Bd):null;return{id:e.id,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(_s),variantIds:e.variantIds}}function _s(e){var t=Rs(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function Qs(e){return{data:e.data}}function Rs(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new z(2,9,9004,"Could not parse uri "+e)}function Ps(e,t,i,n){this.a=new Ts(e),this.c=t,this.b=i,this.f=n}function Bs(e,t,i){if(e.f)return Promise.reject(new z(1,9,9011,"Cannot add new value to "+t));var n=(e=Es(e.a,t)).store(),r=[];return i.forEach(function(e){n.add(e).onsuccess=function(e){r.push(e.target.result)}}),e.promise().then(function(){return r})}function Ys(e,t,i,n){var r=(e=Es(e.a,t)).store();return i.forEach(function(e){r.delete(e).onsuccess=function(){return n(e)}}),e.promise()}function Fs(e,t,i){var n=(e=vs(e.a,t,"readonly")).store(),r={},s=[];return i.forEach(function(e){var t=n.get(e);t.onsuccess=function(){null==t.result&&s.push(e),r[e]=t.result}}),e.promise().then(function(){return s.length?Promise.reject(new z(1,9,9012,"Could not find values for "+s)):i.map(function(e){return r[e]})})}function Gs(){this.c=this.b=this.a=this.f=null}function Vs(e,t,i,n){this.a=e,this.g=t,this.f=i,this.c=n,this.b=["offline:",e,"/",t,"/",i,"/",n].join("")}function Hs(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var i=e[2];if(!i)return null;var n=e[3];return n&&null!=t?new Vs(t,i,n,Number(e[4])):null}function Ws(e,t){this.b=e,this.a=t}function Xs(t,e){var i=new zn(null,0);i.ja(e.duration);var n=e.periods.map(function(e){return Zs(t,e,i)}),r=e.drmInfo?[e.drmInfo]:[];return e.drmInfo&&n.forEach(function(e){e.variants.forEach(function(e){e.drmInfos=r})}),{presentationTimeline:i,minBufferTime:2,offlineSessionIds:e.sessionIds,periods:n}}function Zs(n,e,r){var i,t,s,o,a,u=e.streams.filter(function(e){return"audio"==e.contentType}),c=e.streams.filter(function(e){return"video"==e.contentType});return i=n,t=u,s=c,o={},(a=[]).push.apply(a,t),a.push.apply(a,s),a.forEach(function(e){e.variantIds.forEach(function(e){o[e]=o[e]||{id:e,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0}})}),t.forEach(function(e){var t=Ks(i,e);e.variantIds.forEach(function(e){(e=o[e]).language=t.language,e.primary=e.primary||t.primary,e.audio=t})}),s.forEach(function(e){var t=Ks(i,e);e.variantIds.forEach(function(e){(e=o[e]).primary=e.primary||t.primary,e.video=t})}),u=Se(o),c=e.streams.filter(function(e){return"text"==e.contentType}).map(function(e){return Ks(n,e)}),e.streams.forEach(function(e,t){var i=e.segments.map(function(e,t){return qs(n,t,e)});r.bb(i,0==t)}),{startTime:e.startTime,variants:u,textStreams:c}}function Ks(i,e){var t,n,r,s=e.segments.map(function(e,t){return qs(i,t,e)}),o=new pn(s);return s={id:e.id,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return o.find(e)},getSegmentReference:function(e){return o.get(e)},initSegmentReference:null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null},null!=e.initSegmentKey&&(s.initSegmentReference=(t=i,n=e.initSegmentKey,r=new Vs("segment",t.b,t.a,n),new tn(function(){return[r.toString()]},0,null))),s}function qs(e,t,i){var n=new Vs("segment",e.b,e.a,i.dataKey);return new nn(t,i.startTime,i.endTime,function(){return[n.toString()]},0,null)}function Js(){this.a=null}function $s(e){var t=Hs(e);return t&&"manifest"==t.a?$s.a(e):t&&"segment"==t.a?$s.b(t.key(),t):q(new z(2,1,9004,e))}function eo(e){this.a=null,this.b=e;for(var t=0;t<e.textTracks.length;++t){var i=e.textTracks[t];i.mode="disabled","Shaka Player TextTrack"==i.label&&(this.a=i)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden",this.c=this.a.cues}function to(t,e){if(t.startTime>=t.endTime)return null;var i=new VTTCue(t.startTime,t.endTime,t.payload);i.lineAlign=t.lineAlign,i.positionAlign=t.positionAlign,i.size=t.size;try{i.align=t.textAlign}catch(e){}if("center"==t.textAlign&&"center"!=i.align&&(i.align="middle"),2==t.writingDirection?i.vertical="lr":3==t.writingDirection&&(i.vertical="rl"),1==t.lineInterpretation&&(i.snapToLines=!1),null!=t.line&&(i.line=t.line),null!=t.position&&(i.position=t.position),t.region.id.length){var n=e.filter(function(e){return e.id==t.region.id});n.length&&(i.region=n[0])}return i}function io(e,t){var i=new VTTRegion,n=e.b.offsetWidth,r=e.b.offsetHeight;return i.id=t.id,i.regionAnchorX=t.regionAnchorX,i.regionAnchorY=t.regionAnchorY,i.scroll=t.scroll,2==t.heightUnits&&(i.lines=t.height),i.width=0==t.widthUnits?100*t.width/n:t.width,0==t.viewportAnchorUnits?(i.viewportAnchorX=100*t.viewportAnchorX/n,i.viewportAnchorY=100*t.viewportAnchorY/r):(i.viewportAnchorX=t.viewportAnchorX,i.viewportAnchorY=t.viewportAnchorY),i}function no(e,t){for(var i=e.c,n=[],r=0;r<i.length;++r)t(i[r])&&n.push(i[r]);for(i=0;i<n.length;++i)e.a.removeCue(n[i])}function ro(e,t){Li.call(this),this.xa=!1,this.f=null,this.Wa=!1,this.v=null,this.o=new ye,this.h=this.Eb=this.b=this.m=this.a=this.A=this.g=this.i=this.l=this.u=null,this.ad=1e9,this.nb=[],this.qb=!1,this.ya=!0,this.T=this.rb=this.Ia=null,this.jc=!1,this.H=null,this.pb=[],this.K={},this.c=fo(this),this.ob={width:1/0,height:1/0},this.j=Mo(),this.mb=0,this.M=this.c.preferredAudioLanguage,this.wa=this.c.preferredTextLanguage,this.Ha=this.c.preferredVariantRole,this.Va=this.c.preferredTextRole,this.fa=this.c.preferredAudioChannelCount,t&&t(this),this.u=new le(this.Je.bind(this)),e&&this.sb(e,!0)}(e=xs.prototype).destroy=function(){return this.a.destroy()},e.hasFixedKeySpace=function(){return!0},e.addSegments=function(){return Ss("segment")},e.removeSegments=function(e,t){return Cs(this,"segment",e,t)},e.getSegments=function(e){return Os(this,"segment",e).then(function(e){return e.map(Qs)})},e.addManifests=function(){return Ss("manifest")},e.updateManifestExpiration=function(t,i){var e=Es(this.a,"manifest"),n=e.store(),r=new W;return n.get(t).onsuccess=function(e){(e=e.target.result)?(e.expiration=i,n.put(e),r.resolve()):r.reject(new z(2,9,9012,"Could not find values for "+t))},e.promise().then(function(){return r})},e.removeManifests=function(e,t){return Cs(this,"manifest",e,t)},e.getManifests=function(e){return Os(this,"manifest",e).then(function(e){return e.map(zs)})},e.getAllManifests=function(){var e=vs(this.a,"manifest","readonly"),t={};return e.store().openCursor().onsuccess=function(e){(e=e.target.result)&&(t[e.key]=zs(e.value),e.continue())},e.promise().then(function(){return t})},(e=Ps.prototype).destroy=function(){return this.a.destroy()},e.hasFixedKeySpace=function(){return this.f},e.addSegments=function(e){return Bs(this,this.c,e)},e.removeSegments=function(e,t){return Ys(this,this.c,e,t)},e.getSegments=function(e){return Fs(this,this.c,e)},e.addManifests=function(e){return Bs(this,this.b,e)},e.updateManifestExpiration=function(t,i){var e=Es(this.a,this.b),n=e.store();return n.get(t).onsuccess=function(e){(e=e.target.result)&&(e.expiration=i,n.put(e,t))},e.promise()},e.removeManifests=function(e,t){return Ys(this,this.b,e,t)},e.getManifests=function(e){return Fs(this,this.b,e)},e.getAllManifests=function(){var e=vs(this.a,this.b,"readonly"),t={};return e.store().openCursor().onsuccess=function(e){(e=e.target.result)&&(t[e.key]=e.value,e.continue())},e.promise().then(function(){return t})},Gs.prototype.init=function(){var i=this,n=new W,t=M.indexedDB.open("shaka_offline_db",3);return t.onsuccess=function(e){e=e.target.result;var t=(i.f=e).objectStoreNames;t=t.contains("manifest")&&t.contains("segment")?new xs(e):null,i.a=t,t=(t=e.objectStoreNames).contains("manifest-v2")&&t.contains("segment-v2")?new Ps(e,"segment-v2","manifest-v2",!0):null,i.b=t,e=(t=e.objectStoreNames).contains("manifest-v3")&&t.contains("segment-v3")?new Ps(e,"segment-v3","manifest-v3",!1):null,i.c=e,n.resolve()},t.onupgradeneeded=function(e){var t={autoIncrement:!0};(e=e.target.result).createObjectStore("manifest-v3",t),e.createObjectStore("segment-v3",t)},t.onerror=function(e){n.reject(new z(2,9,9001,t.error)),e.preventDefault()},n},Gs.prototype.destroy=function(){var t=this;return v(function e(){return O(e,function(e){switch(e.B){case 1:if(t.a)return S(e,t.a.destroy(),2);e.X(2);break;case 2:if(t.b)return S(e,t.b.destroy(),4);e.X(4);break;case 4:if(t.c)return S(e,t.c.destroy(),6);e.X(6);break;case 6:t.f&&t.f.close(),e.B=0}})})},Gs.prototype.getCells=function(){var e={};return this.a&&(e.v1=this.a),this.b&&(e.v2=this.b),this.c&&(e.v3=this.c),e},Gs.prototype.erase=function(){var n=this;return v(function e(){return O(e,function(e){switch(e.B){case 1:if(n.a)return S(e,n.a.destroy(),2);e.X(2);break;case 2:if(n.b)return S(e,n.b.destroy(),4);e.X(4);break;case 4:if(n.c)return S(e,n.c.destroy(),6);e.X(6);break;case 6:return n.f&&n.f.close(),S(e,(t=new W,(i=M.indexedDB.deleteDatabase("shaka_offline_db")).onblocked=function(){},i.onsuccess=function(){t.resolve()},i.onerror=function(e){t.reject(new z(2,9,9001,i.error)),e.preventDefault()},t),8);case 8:return n.f=null,n.a=null,n.b=null,n.c=null,S(e,n.init(),0)}var t,i})})},bs.idb=function(){return M.indexedDB?new Gs:null},Vs.prototype.$=function(){return this.g},Vs.prototype.O=function(){return this.f},Vs.prototype.key=function(){return this.c},Vs.prototype.toString=function(){return this.b},(e=Js.prototype).configure=function(){},e.start=function(e){var r=Hs(e);if(null==(this.a=r)||"manifest"!=r.a)return Promise.reject(new z(2,1,9004,r));var s=new Is;return ue([s],function(){return v(function e(){var t,i,n;return O(e,function(e){switch(e.B){case 1:return S(e,s.init(),2);case 2:return S(e,js(s,r.$(),r.O()),3);case 3:return S(e,e.L.getManifests([r.key()]),4);case 4:return t=e.L,i=t[0],n=new Ws(r.$(),r.O()),e.return(Xs(n,i))}})})})},e.stop=function(){return Promise.resolve()},e.update=function(){},e.onExpirationUpdated=function(o,a){var u=this.a,c=new Is;return ue([c],function(){return v(function e(){var t,i,n,r,s;return O(e,function(e){switch(e.B){case 1:return S(e,c.init(),2);case 2:return S(e,js(c,u.$(),u.O()),3);case 3:return S(e,(t=e.L).getManifests([u.key()]),4);case 4:if(i=e.L,n=i[0],r=0<=n.sessionIds.indexOf(o),s=null==n.expiration||n.expiration>a,r&&s)return S(e,t.updateManifestExpiration(u.key(),a),0);e.X(0)}})})}).catch(function(){})},Sn["application/x-offline-manifest"]=Js,N("shaka.offline.OfflineScheme",$s),$s.a=function(e){return $(e={uri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},$s.b=function(e,n){var r=new Is;return ee(ue([r],function(){return v(function e(){var t,i;return O(e,function(e){switch(e.B){case 1:return S(e,r.init(),2);case 2:return S(e,js(r,n.$(),n.O()),3);case 3:return S(e,e.L.getSegments([n.key()]),4);case 4:return t=e.L,i=t[0],e.return({uri:n,data:i.data,headers:{}})}})})}))},fe("offline",$s),N("shaka.text.SimpleTextDisplayer",eo),eo.prototype.remove=eo.prototype.remove=function(t,i){return!!this.a&&(no(this,function(e){return!(e.startTime>=i||e.endTime<=t)}),!0)},eo.prototype.append=eo.prototype.append=function(e){var t=[];if(M.VTTRegion){var i=e.map(function(e){return e.region});i=i.filter(Le);for(var n=0;n<i.length;n++){var r=io(this,i[n]);t.push(r)}}var s=[];for(i=0;i<e.length;i++)(n=to(e[i],t))&&s.push(n);s.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:s.indexOf(t)-s.indexOf(e)}).forEach(function(e){this.a.addCue(e)}.bind(this))},eo.prototype.destroy=eo.prototype.destroy=function(){return this.a&&no(this,function(){return!0}),this.b=this.a=null,Promise.resolve()},eo.prototype.isTextVisible=eo.prototype.isTextVisible=function(){return"showing"==this.a.mode},eo.prototype.setTextVisibility=eo.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},w(ro,Li),N("shaka.Player",ro),ro.prototype.destroy=ro.prototype.destroy=function(){var i=this;return v(function e(){var t;return O(e,function(e){switch(e.B){case 1:return S(e,i.detach(),2);case 2:return i.xa=!0,t=Promise.all([i.o?i.o.destroy():null,i.u?i.u.destroy():null]),i.Wa=!1,i.o=null,i.h=null,i.u=null,i.c=null,S(e,t,0)}})})},ro.version="v2.4.0";var so={};function oo(t){if(t.m&&t.m.configure(t.c.manifest),t.l&&t.l.configure(t.c.drm),t.a){t.a.configure(t.c.streaming);try{t.b.periods.forEach(t.ub.bind(t))}catch(e){t.Ua(e)}var e=Wr(t.a),i=Xr(t.a),n=Vr(t.a);(e=ni(e,i,n.variants))&&e.allowedByApplication&&e.allowedByKeySystem||mo(t,n)}t.h&&(t.h.configure(t.c.abr),t.c.abr.enabled&&!t.ya?t.h.enable():t.h.disable())}function ao(e){var i=[];return e.forEach(function(e){if(e){var t=e.language;e.roles.length?e.roles.forEach(function(e){i.push({language:t,role:e})}):i.push({language:t,role:""})}else i.push({language:"und",role:""})}),ne(i,function(e,t){return e.language==t.language&&e.role==t.role})}function uo(e,t,i){t.video&&ho(e,t.video),t.audio&&ho(e,t.audio);var n=Hr(e.a);t!=ni(Wr(e.a),Xr(e.a),n?n.variants:[])&&e.j.switchHistory.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:i,bandwidth:t.bandwidth})}function co(e,t,i){ho(e,t),e.j.switchHistory.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:i,bandwidth:null})}function ho(e,t){var i=si(e.b,t);e.K[i]||(e.K[i]={}),e.K[i][t.type]=t.id}function lo(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0)}}}function fo(e){var t=5e5;return navigator.connection&&navigator.connection.type&&(t=1e6*navigator.connection.downlink),{drm:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10}},streaming:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:e.jd.bind(e),rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1},abrFactory:oi,textDisplayFactory:function(){return new eo(e.f)},abr:{enabled:!0,defaultBandwidthEstimate:t,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0}}function Mo(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}function po(e,t,i){e.ya?(e.T=t,e.jc=i||!1):$r(e.a,t,i||!1)}function go(e){if(e.b){var t=Date.now()/1e3;e.qb?e.j.bufferingTime+=t-e.mb:e.j.playTime+=t-e.mb,e.mb=t}}function yo(e,t){return t&&t.length?(e.h.setVariants(t),e.h.chooseVariant()):(e.Ua(new z(2,4,4012)),null)}function mo(e,t){var i=Jt(t.variants,e.M,e.Ha,e.fa),n=ei(t.textStreams,e.wa,e.Va);(i=yo(e,i))&&(uo(e,i,!0),po(e,i,!0)),(n=n[0])&&(e.c.streaming.alwaysStreamText||e.Ob())&&(co(e,n,!0),e.ya?e.H=n:es(e.a,n,!0)),No(e)}function No(e){Promise.resolve().then(function(){this.xa||this.dispatchEvent(new Te("adaptation"))}.bind(e))}function wo(e){Promise.resolve().then(function(){this.xa||this.dispatchEvent(new Te("trackschanged"))}.bind(e))}function Do(e){e.dispatchEvent(new Te("texttrackvisibility"))}function To(e,t){var i=Zs(new Ws(e.$(),e.O()),t.periods[0],new zn(null,0)),n=t.appMetadata||{};return i=Ht(i),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:i,appMetadata:n}}function Eo(){this.a={}}function vo(e,t){var i=e.a[t];return null==i&&(i=0),i}function Io(e){if(!e||e.constructor!=ro)throw new z(2,9,9008);this.a=e,this.b=jo(this),this.g=!1,this.c=null,this.f=[]}function Lo(){return As()}function jo(t){return{trackSelectionCallback:function(e){return function(e,t){var i=[],n=Qt(e),r=[0,Ut,_t],s=t.filter(function(e){return"variant"==e.type});r=r.map(function(t){return s.filter(function(e){return e=Qt(e.language),kt(t,n,e)})});for(var o,a=0;a<r.length;a++)if(r[a].length){o=r[a];break}o||(r=s.filter(function(e){return e.primary})).length&&(o=r),o||(o=s).map(function(e){return e.language}).filter(Le);var u=o.filter(function(e){return e.height&&e.height<=480});return u.length&&(u.sort(function(e,t){return t.height-e.height}),o=u.filter(function(e){return e.height==u[0].height})),o.sort(function(e,t){return e.bandwidth-t.bandwidth}),o.length&&i.push(o[Math.floor(o.length/2)]),i.push.apply(i,t.filter(function(e){return"text"==e.type})),i}(t.a.getConfiguration().preferredAudioLanguage,e)},progressCallback:function(e,t){if(e||t)return null},usePersistentLicense:!0}}function Ao(t,i,e){e.forEach(function(e){return bo(t,i,e)})}function bo(e,t,i){var n=null;if(e.c){var r=e.c.filter(function(e){return"variant"==e.type})[0];r&&(n=Zt(i,r))}var s=r=null;n&&(n.audio&&(r=n.audio),n.video&&(s=n.video)),Yt(t,r,s,i),Bt(i,e.a.getConfiguration().restrictions,{width:1/0,height:1/0})}function xo(e){if(!e.a)throw new z(2,9,7001)}function So(){if(!As())throw new z(2,9,9e3)}function Co(e,t){var i=e.a.getConfiguration().streaming.retryParameters;return i=Me(t.c(),i),0==t.b&&null==t.a||(i.headers.Range="bytes="+t.b+"-"+(null==t.a?"":t.a)),i}ro.registerSupportPlugin=function(e,t){so[e]=t},ro.isBrowserSupported=function(){return!!(M.Promise&&M.Uint8Array&&Array.prototype.forEach&&M.MediaSource&&MediaSource.isTypeSupported&&M.MediaKeys&&M.navigator&&M.navigator.requestMediaKeySystemAccess&&M.MediaKeySystemAccess&&M.MediaKeySystemAccess.prototype.getConfiguration)},ro.probeSupport=function(){return(t=[],e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],r={},"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(i){var e=navigator.requestMediaKeySystemAccess(i,n).then(function(e){var t=e.getConfiguration().sessionTypes;return t=!!t&&0<=t.indexOf("persistent-license"),0<=navigator.userAgent.indexOf("Tizen 3")&&(t=!1),r[i]={persistentState:t},e.createMediaKeys()}).catch(function(){r[i]=null});t.push(e)}),Promise.all(t).then(function(){return r})).then(function(e){var i,t=function(){var e,t={};for(e in Sn)t[e]=!0;for(var i in Cn)t[i]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(e){t[e]=!!Sn[e]}),["mpd","m3u8","ism"].forEach(function(e){t[e]=!!Cn[e]}),t}(),n=(i={},'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(e){i[e]=!!It[e]||MediaSource.isTypeSupported(e)||Tt(e);var t=e.split(";")[0];i[t]=i[t]||i[e]}),i);for(var r in e={manifest:t,media:n,drm:e},so)e[r]=so[r]();return e});var t,e,n,r},ro.prototype.attach=ro.prototype.sb=function(t,i){var n=this;return v(function e(){return O(e,function(e){switch(e.B){case 1:if(void 0===i&&(i=!0),n.f)return S(e,n.detach(),2);e.X(2);break;case 2:if(n.f=t,me(n.o,n.f,"error",n.be.bind(n)),i)return n.i=new Lt(n.f),S(e,n.i.j,0);e.X(0)}})})},ro.prototype.detach=ro.prototype.detach=function(){var t=this;return v(function e(){return O(e,function(e){switch(e.B){case 1:return t.f?S(e,t.jb(!1),2):e.return();case 2:t.o.na(t.f,"error"),t.f=null,e.B=0}})})},ro.prototype.load=ro.prototype.load=function(w,D,T){var E=this;return v(function e(){var c,h,l,d,f,M,p,g,y,m,N;return O(e,function(e){switch(e.B){case 1:if(!E.f)throw new z(2,7,7002);return h=new W,l=function(){return c=new z(2,7,7e3),h},E.dispatchEvent(new Te("loading")),d=Date.now(),e.qa=2,f=E.jb(),E.Ia=l,S(e,f,4);case 4:if(E.j=Mo(),me(E.o,E.f,"playing",E.kb.bind(E)),me(E.o,E.f,"pause",E.kb.bind(E)),me(E.o,E.f,"ended",E.kb.bind(E)),M=E.c.abrFactory,E.h=new M,E.h.configure(E.c.abr),E.v=new E.c.textDisplayFactory,E.v.setTextVisibility(E.Wa),c)throw c;return S(e,(o=p=E,a=w,u=T,v(function e(){var t,i;return O(e,function(e){switch(e.B){case 1:return S(e,On(a,o.u,o.c.manifest.retryParameters,u),2);case 2:return t=e.L,o.m=new t,o.m.configure(o.c.manifest),i={networkingEngine:o.u,filterNewPeriod:o.ub.bind(o),filterAllPeriods:o.dc.bind(o),onTimelineRegionAdded:o.ae.bind(o),onEvent:o.ib.bind(o),onError:o.Ua.bind(o)},e.return(o.m.start(a,i))}})})),5);case 5:if(p.b=e.L,E.Eb=w,c)throw c;return function(e){if(e.b.periods.some(function(e){return e.variants.some(function(e){return e.video&&e.audio})})&&e.b.periods.forEach(function(e){e.variants=e.variants.filter(function(e){return e.video&&e.audio})}),0==e.b.periods.length)throw new z(2,4,4014)}(E),E.l=new Xe({Oa:E.u,onError:E.Ua.bind(E),zb:E.Md.bind(E),onExpirationUpdated:E.Jd.bind(E),onEvent:E.ib.bind(E)}),E.l.configure(E.c.drm),S(e,E.l.init(E.b,!1),6);case 6:if(c)throw c;return E.dc(E.b.periods),E.mb=Date.now()/1e3,E.M=E.c.preferredAudioLanguage,E.wa=E.c.preferredTextLanguage,E.fa=E.c.preferredAudioChannelCount,n=(i=E).b.presentationTimeline.S(),r=i.c.playRangeEnd,0<(s=i.c.playRangeStart)&&(i.P()||i.b.presentationTimeline.Tc(s)),r<n&&(i.P()||i.b.presentationTimeline.ja(r)),S(e,E.l.sb(E.f),7);case 7:if(c)throw c;return E.h.init(E.Ke.bind(E)),E.i||(E.i=new Lt(E.f)),E.i.o=E.v,E.g=new kr(E.f,E.b,E.c.streaming,null==D?null:D,E.Ie.bind(E),E.ib.bind(E)),E.A=new Pr(E.f,E.i,E.b,E.c.streaming,E.Uc.bind(E),E.ib.bind(E),E.He.bind(E)),E.a=new Gr(E.b,{Qa:E.g,J:E.i,Oa:E.u,yc:E.Gd.bind(E),xc:E.ed.bind(E),onError:E.Ua.bind(E),onEvent:E.ib.bind(E),Nd:E.Od.bind(E),cb:E.Yd.bind(E),filterNewPeriod:E.ub.bind(E),filterAllPeriods:E.dc.bind(E)}),E.a.configure(E.c.streaming),function(e){function i(e){return(e.video?e.video.codecs.split(".")[0]:"")+"-"+(e.audio?e.audio.codecs.split(".")[0]:"")}var t=e.b.periods.reduce(function(e,t){return e.concat(t.variants)},[]);t=$t(t,e.c.preferredAudioChannelCount);var n={};t.forEach(function(e){var t=i(e);t in n||(n[t]=[]),n[t].push(e)});var s=null,o=1/0;Ce(n,function(e,t){var i=0,n=0;t.forEach(function(e){i+=e.bandwidth||0,++n});var r=i/n;r<o&&(s=e,o=r)}),e.b.periods.forEach(function(e){e.variants=e.variants.filter(function(e){return i(e)==s})})}(E),E.dispatchEvent(new Te("streaming")),S(e,E.a.init(),8);case 8:if(c)throw c;if(E.c.streaming.startAtSegmentBoundary&&(g=function(e,t){function i(e,t){if(!e)return null;var i=e.findSegmentPosition(t-s.startTime);return null==i?null:(i=e.getSegmentReference(i))?i.startTime+s.startTime:null}var n=Wr(e.a),r=Xr(e.a),s=Vr(e.a);return n=i(n,t),null!=(r=i(r,t))&&null!=n?Math.max(r,n):null!=r?r:null!=n?n:t}(E,Ur(E.g)),Or(E.g.a,g)),E.b.periods.forEach(E.ub.bind(E)),wo(E),No(E),y=Vr(E.a),m=Jt(y.variants,E.M,E.Ha,E.fa),E.h.setVariants(m),y.variants.some(function(e){return e.primary}),E.pb.forEach(E.A.o.bind(E.A)),E.pb=[],Ne(E.o,E.f,"loadeddata",function(){this.j.loadLatency=(Date.now()-d)/1e3}.bind(E)),c)throw c;E.Ia=null,(t=e).B=0,t.qa=0;break;case 2:return N=C(e),h.resolve(),E.Ia==l&&(E.Ia=null,E.dispatchEvent(new Te("unloading"))),c?e.return(Promise.reject(c)):e.return(Promise.reject(N))}var t,i,n,r,s,o,a,u})})},ro.prototype.configure=ro.prototype.configure=function(e,t){if(2==arguments.length&&"string"==typeof e){for(var i=e,n={},r=n,s=0,o=0;!((s=i.indexOf(".",s))<0);)0!=s&&"\\"==i[s-1]||(r[o=i.substring(o,s).replace(/\\\./g,".")]={},r=r[o],o=s+1),s+=1;r[i.substring(o).replace(/\\\./g,".")]=t,e=n}return i=oe(this.c,e,fo(this),lo(),""),oo(this),i},ro.prototype.getConfiguration=ro.prototype.getConfiguration=function(){var e=fo(this);return oe(e,this.c,fo(this),lo(),""),e},ro.prototype.resetConfiguration=ro.prototype.ve=function(){this.c=fo(this),oo(this)},ro.prototype.getMediaElement=ro.prototype.rd=function(){return this.f},ro.prototype.getNetworkingEngine=ro.prototype.sc=function(){return this.u},ro.prototype.getManifestUri=ro.prototype.Kb=function(){return this.Eb},ro.prototype.isLive=ro.prototype.P=function(){return!!this.b&&this.b.presentationTimeline.P()},ro.prototype.isInProgress=ro.prototype.Ba=function(){return!!this.b&&this.b.presentationTimeline.Ba()},ro.prototype.isAudioOnly=ro.prototype.Cd=function(){if(!this.b||!this.b.periods.length)return!1;var e=this.b.periods[0].variants;return!!e.length&&!e[0].video},ro.prototype.seekRange=ro.prototype.xe=function(){var e=0,t=0;return this.b&&(e=(t=this.b.presentationTimeline).Ka(),t=t.la()),{start:e,end:t}},ro.prototype.keySystem=ro.prototype.keySystem=function(){return this.l?this.l.keySystem():""},ro.prototype.drmInfo=ro.prototype.drmInfo=function(){return this.l?this.l.b:null},ro.prototype.getExpiration=ro.prototype.wb=function(){return this.l?this.l.wb():1/0},ro.prototype.isBuffering=ro.prototype.vc=function(){return this.qb},ro.prototype.unload=ro.prototype.jb=function(t){var i=this;return v(function e(){return O(e,function(e){switch(e.B){case 1:return i.xa?e.return():(void 0===t&&(t=!0),i.dispatchEvent(new Te("unloading")),S(e,function(e){if(!e.Ia)return Promise.resolve();var t=Promise.resolve();return e.m&&(t=e.m.stop(),e.m=null),Promise.all([t,e.Ia()])}(i),2));case 2:return i.rb||(i.rb=function(e){e.o&&(e.o.na(e.f,"loadeddata"),e.o.na(e.f,"playing"),e.o.na(e.f,"pause"),e.o.na(e.f,"ended"));var t=Promise.all([e.h?e.h.stop():null,e.i?e.i.destroy():null,e.l?e.l.destroy():null,e.g?e.g.destroy():null,e.A?e.A.destroy():null,e.a?e.a.destroy():null,e.m?e.m.stop():null,e.v?e.v.destroy():null]);return e.ya=!0,e.l=null,e.i=null,e.g=null,e.A=null,e.a=null,e.m=null,e.v=null,e.b=null,e.Eb=null,e.pb=[],e.K={},e.j=Mo(),t}(i).then(function(){i.Uc(!1),i.rb=null})),S(e,i.rb,3);case 3:if(t)return i.i=new Lt(i.f),S(e,i.i.j,0);e.X(0)}})})},ro.prototype.getPlaybackRate=ro.prototype.Xa=function(){return this.g?this.g.Xa():0},ro.prototype.trickPlay=ro.prototype.Te=function(e){this.g&&zr(this.g.a,e),this.a&&Jr(this.a,1!=e)},ro.prototype.cancelTrickPlay=ro.prototype.fd=function(){this.g&&zr(this.g.a,1),this.a&&Jr(this.a,!1)},ro.prototype.getVariantTracks=ro.prototype.zd=function(){if(!this.b||!this.g)return[];var e=ri(this.b,Ur(this.g)),t=this.K[e]||{};return Wt(this.b.periods[e],t.audio,t.video)},ro.prototype.getTextTracks=ro.prototype.yd=function(){if(!this.b||!this.g)return[];var e=ri(this.b,Ur(this.g)),t=this.K[e]||{};if(!t.text){var i=ei(this.b.periods[e].textStreams,this.wa,this.Va);i.length&&(t.text=i[0].id)}return Xt(this.b.periods[e],t.text).filter(function(e){return this.nb.indexOf(e.id)<0}.bind(this))},ro.prototype.selectTextTrack=ro.prototype.Be=function(e){if(this.a){var t=Vr(this.a);e:{for(var i=0;i<t.textStreams.length;i++)if(t.textStreams[i].id==e.id){e=t.textStreams[i];break e}e=null}e&&(this.i.l=!1,co(this,e,!1),t=e,this.ya?this.H=t:es(this.a,t,!0),this.wa=e.language)}},ro.prototype.selectEmbeddedTextTrack=ro.prototype.ze=function(){this.i.l=!0,qr(this.a)},ro.prototype.usingEmbeddedTextTrack=ro.prototype.Ye=function(){return!!this.i&&this.i.l},ro.prototype.selectVariantTrack=ro.prototype.Ce=function(e,t){if(this.a){this.c.abr.enabled&&L("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=Vr(this.a),n=Zt(i,e);n&&Kt(n)&&(uo(this,n,!1),po(this,n,t),this.M=n.language,n.audio&&n.audio.channelsCount&&(this.fa=n.audio.channelsCount),i=Jt(i.variants,this.M,this.Ha,this.fa),this.h.setVariants(i))}},ro.prototype.getAudioLanguagesAndRoles=ro.prototype.nd=function(){if(!this.a)return[];var e=Vr(this.a);return ao(e=qt(e.variants).map(function(e){return e.audio}).filter(Le))},ro.prototype.getTextLanguagesAndRoles=ro.prototype.xd=function(){return this.a?ao(Vr(this.a).textStreams):[]},ro.prototype.getAudioLanguages=ro.prototype.md=function(){return this.a?qt(Vr(this.a).variants).map(function(e){return e.language}).filter(Le):[]},ro.prototype.getTextLanguages=ro.prototype.wd=function(){return this.a?Vr(this.a).textStreams.map(function(e){return e.language}).filter(Le):[]},ro.prototype.selectAudioLanguage=ro.prototype.ye=function(e,t){if(this.a){var i=Vr(this.a);this.M=e,this.Ha=t||"",mo(this,i)}},ro.prototype.selectTextLanguage=ro.prototype.Ae=function(e,t){if(this.a){var i=Vr(this.a);this.wa=e,this.Va=t||"",mo(this,i)}},ro.prototype.isTextTrackVisible=ro.prototype.Ob=function(){return this.v?this.v.isTextVisible():this.Wa},ro.prototype.setTextTrackVisibility=ro.prototype.Fe=function(e){this.v&&this.v.setTextVisibility(e),this.Wa=e,Do(this),!this.c.streaming.alwaysStreamText&&this.a&&(e?(e=ei((e=Vr(this.a)).textStreams,this.wa,this.Va)[0])&&Kr(this.a,e,!0):qr(this.a))},ro.prototype.getPlayheadTimeAsDate=ro.prototype.td=function(){return this.b?new Date(1e3*this.b.presentationTimeline.f+1e3*this.f.currentTime):null},ro.prototype.getPresentationStartTimeAsDate=ro.prototype.vd=function(){return this.b?new Date(1e3*this.b.presentationTimeline.f):null},ro.prototype.getBufferedInfo=ro.prototype.Ib=function(){return this.i?this.i.Ib():{total:[],audio:[],video:[],text:[]}},ro.prototype.getStats=ro.prototype.getStats=function(){go(this),this.kb();var e=null,t=null,i=this.f;if(i=i&&i.getVideoPlaybackQuality?i.getVideoPlaybackQuality():{},this.g&&this.b){var n=ri(this.b,Ur(this.g)),r=this.b.periods[n];(n=this.K[n])&&(e=(t=function(e,t,i){function n(e,t){return null==e?null==t:t.id==e}for(var r=0;r<i.length;r++)if(n(e,i[r].audio)&&n(t,i[r].video))return i[r];return null}(n.audio,n.video,r.variants)).video||{})}return e||(e={}),t||(t={}),{width:e.width||0,height:e.height||0,streamBandwidth:t.bandwidth||0,decodedFrames:Number(i.totalVideoFrames),droppedFrames:Number(i.droppedVideoFrames),estimatedBandwidth:this.h?this.h.getBandwidthEstimate():NaN,loadLatency:this.j.loadLatency,playTime:this.j.playTime,bufferingTime:this.j.bufferingTime,switchHistory:ae(this.j.switchHistory),stateHistory:ae(this.j.stateHistory)}},ro.prototype.addTextTrack=ro.prototype.addTextTrack=function(t,i,n,e,r,s){if(!this.a)return Promise.reject();for(var o,a=Vr(this.a),u=0;u<this.b.periods.length;u++)if(this.b.periods[u]==a){if(u==this.b.periods.length-1){if(1/0==(o=this.b.presentationTimeline.S()-a.startTime))return Promise.reject()}else o=this.b.periods[u+1].startTime-a.startTime;break}var c={id:this.ad++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1!=e?null:new nn(1,0,o,function(){return[t]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:e,codecs:r||"",kind:n,encrypted:!1,keyId:null,language:i,label:s||null,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null};return this.nb.push(c.id),a.textStreams.push(c),Kr(this.a,c,this.Wa).then(function(){if(!this.xa){var e=this.b.periods.indexOf(a),t=Zr(this.a,"text");return t&&(this.K[e].text=t.id),this.nb.splice(this.nb.indexOf(c.id),1),mo(this,a),wo(this),{id:c.id,active:!1,type:"text",bandwidth:0,language:i,label:s||null,kind:n,width:null,height:null}}}.bind(this))},ro.prototype.setMaxHardwareResolution=ro.prototype.bc=function(e,t){this.ob.width=e,this.ob.height=t},ro.prototype.retryStreaming=ro.prototype.Nc=function(){if(this.a){var e=this.a;if(e.f)e=!1;else if(e.l)e=!1;else{for(var t in e.c){var i=e.c[t];i.$a&&(i.$a=!1,ls(e,i,.1))}e=!0}}else e=!1;return e},ro.prototype.getManifest=ro.prototype.qd=function(){return this.b},(e=ro.prototype).jd=function(e){this.P()&&0<=[1001,1002,1003].indexOf(e.code)&&(e.severity=1,this.Nc())},e.dc=function(e){e.forEach(Yt.bind(null,this.l,this.a?Wr(this.a):null,this.a?Xr(this.a):null));var t,i,n=(t=function(e){return e.variants.some(Kt)},i=0,e.forEach(function(e){i+=t(e)?1:0}),i);if(0==n)throw new z(2,4,4032);if(n<e.length)throw new z(2,4,4011);e.forEach(function(e){if(Bt(e,this.c.restrictions,this.ob)&&this.a&&Vr(this.a)==e&&wo(this),!e.variants.some(Kt))throw new z(2,4,4012)}.bind(this))},e.ub=function(e){Yt(this.l,this.a?Wr(this.a):null,this.a?Xr(this.a):null,e);var t=e.variants,i=t.some(Kt);if(Bt(e,this.c.restrictions,this.ob)&&this.a&&Vr(this.a)==e&&wo(this),e=t.some(Kt),!i)throw new z(2,4,4011);if(!e)throw new z(2,4,4012)},e.Je=function(e,t){this.h&&this.h.segmentDownloaded(e,t)},e.Uc=function(e){if(go(this),this.qb=e,this.kb(),this.g){var t=this.g.a;e!=t.g&&(t.g=e,zr(t,t.f))}this.dispatchEvent(new Te("buffering",{buffering:e}))},e.He=function(){wo(this)},e.kb=function(){if(!this.xa){var e=this.qb?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing",t=Date.now()/1e3;if(this.j.stateHistory.length){var i=this.j.stateHistory[this.j.stateHistory.length-1];if(i.duration=t-i.timestamp,e==i.state)return}this.j.stateHistory.push({timestamp:t,state:e,duration:0})}},e.Ie=function(){if(this.A){var e=this.A;e.c.forEach(e.m.bind(e,!0))}var t,i;this.a&&(t=this.a,i=Ur(t.a.Qa),Object.keys(t.c).every(function(e){var t=this.a.J;return e="text"==e?(e=t.a,i>=e.a&&i<e.b):it(e=bt(t,e),i)}.bind(t))||ts(t))},e.Gd=function(e){this.ya=!0,this.h.disable();var t={audio:!1,text:!1},i=Jt(e.variants,this.M,this.Ha,this.fa,t),n=ei(e.textStreams,this.wa,this.Va,t);if(i=yo(this,i),n=n[0]||null,this.T){e:{for(var r=this.b,s=0;s<r.periods.length;++s)for(var o=r.periods[s],a=0;a<o.variants.length;++a)if(o.variants[a]==this.T){r=s;break e}r=-1}this.b.periods[r]==e&&(i=this.T),this.T=null}return this.H&&(this.b.periods[si(this.b,this.H)]==e&&(n=this.H),this.H=null),i&&uo(this,i,!0),n&&(co(this,n,!0),!Hr(this.a)&&i&&i.audio&&t.text&&n.language!=i.audio.language&&(this.v.setTextVisibility(!0),Do(this))),this.c.streaming.alwaysStreamText||this.Ob()?{variant:i,text:n}:{variant:i,text:null}},e.ed=function(){this.ya=!1,this.c.abr.enabled&&this.h.enable(),this.T&&($r(this.a,this.T,this.jc),this.T=null),this.H&&(es(this.a,this.H,!0),this.H=null)},e.Od=function(){this.m&&this.m.update&&this.m.update()},e.Yd=function(){this.g&&this.g.cb()},e.Ke=function(e,t){uo(this,e,!0),this.a&&($r(this.a,e,t||!1),No(this))},e.Ua=function(e){if(!this.xa){var t=new Te("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}},e.ae=function(e){this.A?this.A.o(e):this.pb.push(e)},e.ib=function(e){this.dispatchEvent(e)},e.be=function(){if(this.f.error){var e=this.f.error.code;if(1!=e){var t=this.f.error.msExtendedCode;t&&(t<0&&(t+=Math.pow(2,32)),t=t.toString(16)),this.Ua(new z(2,3,3016,e,t,this.f.error.message))}}},e.Md=function(n){var r=["output-restricted","internal-error"],e=Vr(this.a),s=!1,t=Object.keys(n),o=1==t.length&&"00"==t[0];t.length&&e.variants.forEach(function(i){var e=[];i.audio&&e.push(i.audio),i.video&&e.push(i.video),e.forEach(function(e){var t=i.allowedByKeySystem;e.keyId&&(e=n[o?"00":e.keyId],i.allowedByKeySystem=!!e&&r.indexOf(e)<0),t!=i.allowedByKeySystem&&(s=!0)})}),(t=ni(Wr(this.a),Xr(this.a),e.variants))&&!t.allowedByKeySystem&&mo(this,e),s&&(wo(this),e=Jt(e.variants,this.M,this.Ha,this.fa),this.h.setVariants(e))},e.Jd=function(e,t){this.m&&this.m.onExpirationUpdated&&this.m.onExpirationUpdated(e,t),this.dispatchEvent(new Te("expirationupdated"))},N("shaka.offline.Storage",Io),Io.support=Lo,Io.prototype.destroy=Io.prototype.destroy=function(){return this.a=this.b=null,Promise.resolve()},Io.prototype.configure=Io.prototype.configure=function(e){oe(this.b,e,jo(this),{},"")},Io.prototype.store=Io.prototype.store=function(b,t,i){var x=this;return v(function e(){var I,L,j,A;return O(e,function(e){switch(e.B){case 1:return So(),x.g?e.return(Promise.reject(new z(2,9,9006))):(x.g=!0,I=t||{},L=null,S(e,function(e,n,r,t){function s(){}var i,o,a,u=e.a.u,c=e.a.getConfiguration();return On(n,u,c.manifest.retryParameters,t).then(function(e){var t=this;xo(this),(o=new Xe({Oa:u,onError:r,zb:s,onExpirationUpdated:function(){},onEvent:function(){}})).configure(c.drm);var i={networkingEngine:u,filterAllPeriods:function(e){Ao(t,o,e)},filterNewPeriod:function(e){bo(t,o,e)},onTimelineRegionAdded:function(){},onEvent:function(){},onError:r};return(a=new e).configure(c.manifest),a.start(n,i)}.bind(e)).then(function(e){return xo(this),i=e,o.init(i,this.b.usePersistentLicense)}.bind(e)).then(function(){return xo(this),t=(e=i).periods.map(function(e){return e.variants}).reduce(Ee,[]).map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}).reduce(Ee,[]).filter(Le),e=e.periods.map(function(e){return e.textStreams}).reduce(Ee,[]),t.push.apply(t,e),Promise.all(t.map(function(e){return e.createSegmentIndex()}));var e,t}.bind(e)).then(function(){return xo(this),Ke(o)}.bind(e)).then(function(){return xo(this),a.stop()}.bind(e)).then(function(){return xo(this),{manifest:i,Gb:o}}.bind(e)).catch(function(e){if(a)return a.stop().then(function(){throw e});throw e})}(x,b,function(e){L=L||e},i),2));case 2:if(j=e.L,!(!j.manifest.presentationTimeline.P()&&!j.manifest.presentationTimeline.Ba()))throw new z(2,9,9005,b);if(xo(x),L)throw L;return A=new Is,e.return(ue([A,j.Gb],function(){return v(function e(){var m,N,w,D,T,E,v;return O(e,function(e){switch(e.B){case 1:return(y=e).qa=0,y.c=2,S(e,A.init(),4);case 4:return xo(x),Ao(x,j.Gb,j.manifest.periods),S(e,function(e){var n=null;if(Ce(e.a,function(i,e){Ce(e.getCells(),function(e,t){t.hasFixedKeySpace()||n||(n={path:{$:i,O:e},O:t})})}),n)return n;throw new z(2,9,9013,"Could not find a cell that supports add-operations")}(A),5);case 5:return m=e.L,xo(x),e.qa=6,S(e,(r=x,s=m.O,o=j.Gb,a=j.manifest,f=u=b,p=c=I||{},g=null==(M=a).expiration?1/0:M.expiration,l={offlineUri:null,originalManifestUri:f,duration:M.presentationTimeline.S(),size:0,expiration:g,tracks:M=Ht(M.periods[0]),appMetadata:p},ue([d=new ys(function(e,t){l.size=t,r.b.progressCallback(l,e)})],function(){return h=function(t,i,n,r,s,e,o){var a=new Eo,u=s.periods.map(function(e){return function(t,i,n,s,e,r,o){var a,u=Wt(o,null,null),c=Xt(o,null);u=t.b.trackSelectionCallback(u.concat(c)),null==t.c&&(t.c=u,Ao(t,e,r.periods)),(a=u).some(function(t){return a.some(function(e){return t!=e&&t.type==e.type&&t.kind==e.kind&&t.language==e.language})}),r.periods.forEach(function(e){e.variants.forEach(function(e){var t=e.audio,i=e.video;if(t&&!i&&(s.a[t.id]=t.bandwidth||e.bandwidth),!t&&i&&(s.a[i.id]=i.bandwidth||e.bandwidth),t&&i){var n=t.bandwidth||393216,r=i.bandwidth||e.bandwidth-n;r<=0&&(r=e.bandwidth),s.a[t.id]=n,s.a[i.id]=r}}),e.textStreams.forEach(function(e){s.a[e.id]=52})});var h={};u.forEach(function(e){"variant"==e.type&&null!=e.audioId&&(h[e.audioId]=!0),"variant"==e.type&&null!=e.videoId&&(h[e.videoId]=!0),"text"==e.type&&(h[e.id]=!0)});var l,d,f={};return(l=r,d={},l.periods.forEach(function(e){e.textStreams.forEach(function(e){d[e.id]=e}),e.variants.forEach(function(e){e.audio&&(d[e.audio.id]=e.audio),e.video&&(d[e.video.id]=e.video)})}),Se(d)).filter(function(e){return!!h[e.id]}).forEach(function(e){f[e.id]=function(r,s,o,a,e,u){var c={id:u.id,primary:u.primary,presentationTimeOffset:u.presentationTimeOffset||0,contentType:u.type,mimeType:u.mimeType,codecs:u.codecs,frameRate:u.frameRate,kind:u.kind,language:u.language,label:u.label,width:u.width||null,height:u.height||null,initSegmentKey:null,encrypted:u.encrypted,keyId:u.keyId,segments:[],variantIds:[]};e=e.presentationTimeline.Za();var h=u.id;return function(e,t,i){for(var n=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);n;)i(n),n=e.getSegmentReference(++t)}(u,e,function(t){var e,i,n;ms(s,h,Co(r,t),(e=a,i=u.id,n=(n=t).endTime-n.startTime,vo(e,i)*n),function(e){return o.addSegments([{data:e}]).then(function(e){r.f.push(e[0]),c.segments.push({startTime:t.startTime,endTime:t.endTime,dataKey:e[0]})})})}),(e=u.initSegmentReference)&&ms(s,h,Co(r,e),.5*vo(a,u.id),function(e){return o.addSegments([{data:e}]).then(function(e){r.f.push(e[0]),c.initSegmentKey=e[0]})}),c}(t,i,n,s,r,e)}),u.forEach(function(e){"variant"==e.type&&null!=e.audioId&&f[e.audioId].variantIds.push(e.id),"variant"==e.type&&null!=e.videoId&&f[e.videoId].variantIds.push(e.id)}),{startTime:o.startTime,streams:Se(f)}}(t,i,n,a,r,s,e)}),c=r.b,h=r.a.map(function(e){return e.ia.sessionId});if(c&&t.b.usePersistentLicense){if(!h.length)throw new z(2,9,9007,e);c.initData=[]}return{originalManifestUri:e,duration:s.presentationTimeline.S(),size:0,expiration:r.wb(),periods:u,sessionIds:t.b.usePersistentLicense?h:[],drmInfo:c,appMetadata:o}}(r,d,s,o,a,u,c),Ns(d,r.a.u)}).then(function(){return h.size=l.size,h})),8);case 8:return N=e.L,xo(x),S(e,m.O.addManifests([N]),9);case 9:return w=e.L,xo(x),D=new Vs("manifest",m.path.$,m.path.O,w[0]),e.return(To(D,N));case 6:return T=C(e),E=x.f,v=function(){},S(e,m.O.removeSegments(E,v),10);case 10:throw L||T;case 2:(n=e).h=[n.a],n.qa=0,n.c=0,x.g=!1,x.c=null,x.f=[],i=(t=e).h.splice(0)[0],(i=t.a=t.a||i)?i.wc?t.B=t.qa||t.c:null!=i.X&&t.c<i.X?(t.B=i.X,t.a=null):t.B=t.c:t.B=0}var t,i,n,r,s,o,a,u,c,h,l,d,f,M,p,g,y})})}))}})})},Io.prototype.remove=Io.prototype.remove=function(e){var r=this;So();var s=Hs(e);if(null==s||"manifest"!=s.a)return Promise.reject(new z(2,9,9004,e));var o=new Is;return ue([o],function(){return v(function e(){var t,i,n;return O(e,function(e){switch(e.B){case 1:return S(e,o.init(),2);case 2:return S(e,js(o,s.$(),s.O()),3);case 3:return S(e,(t=e.L).getManifests([s.key()]),4);case 4:return i=e.L,n=i[0],S(e,Promise.all([function(t,e,i){var n,r=new Xe({Oa:t.a.u,onError:function(e){6013!=e.code&&(n=e)},zb:function(){},onExpirationUpdated:function(){},onEvent:function(){}});r.configure(t.a.getConfiguration().drm);var s=Xs(new Ws(e.$(),e.O()),i);return ue([r],function(){return v(function e(){return O(e,function(e){switch(e.B){case 1:return S(e,r.init(s,t.b.usePersistentLicense),2);case 2:return S(e,Ze(r,i.sessionIds),0)}})})}).then(function(){if(n)throw n})}(r,s,n),function(e,t,i,n){function r(){a+=1,e.b.progressCallback(u,a/o)}var s=(c=n,h=[],c.periods.forEach(function(e){e.streams.forEach(function(e){null!=e.initSegmentKey&&h.push(e.initSegmentKey),e.segments.forEach(function(e){h.push(e.dataKey)})})}),h),o=s.length+1,a=0,u=To(i,n);var c,h;return Promise.all([t.removeSegments(s,r),t.removeManifests([i.key()],r)])}(r,t,s,n)]),0)}})})})},Io.prototype.list=Io.prototype.list=function(){So();var r=[],i=new Is;return ue([i],function(){return v(function e(){var t;return O(e,function(e){switch(e.B){case 1:return S(e,i.init(),2);case 2:return t=Promise.resolve(),Ls(i,function(e,i){t=t.then(function(){return n=e,t=i,v(function e(){return O(e,function(e){switch(e.B){case 1:return S(e,t.getAllManifests(),2);case 2:Ce(e.L,function(e,t){var i=To(new Vs("manifest",n.$,n.O,e),t);r.push(i)}),e.B=0}})});var n,t})}),S(e,t,0)}})})}).then(function(){return r})},Io.deleteAll=function(e){var o=e.u,a=e.getConfiguration().drm,u=new Is;return ue([u],function(){return v(function e(){var i,s;return O(e,function(e){switch(e.B){case 1:return S(e,u.init(),2);case 2:return S(e,(n=[],r=[],Ls(u,function(e,t){var i=new Ws(e.$,e.O);r.push(t.getAllManifests().then(function(e){Se(e).forEach(function(e){n.push(Xs(i,e))})}))}),Promise.all(r).then(function(){return n})),3);case 3:return i=e.L,s=Promise.resolve(),i.forEach(function(n){s=s.then(function(){return e=a,t=n,(i=new Xe({Oa:o,onError:function(){},zb:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(e),ue([i],function(){return v(function e(){return O(e,function(e){switch(e.B){case 1:return S(e,i.init(t,!0),2);case 2:return S(e,Ze(i,t.offlineSessionIds),0)}})})});var e,t,i})}),S(e,s,4);case 4:return S(e,(t=Se((t=u).a).map(function(e){return e.erase()}),Promise.all(t)),0)}var t,n,r})})})},so.offline=Lo,N("shaka.polyfill.installAll",function(){for(var e=0;e<ko.length;++e)ko[e].cd()});var Oo,zo,ko=[];function Uo(e,t){for(var i={priority:t=t||0,cd:e},n=0;n<ko.length;n++)if(ko[n].priority<t)return void ko.splice(n,0,i);ko.push(i)}function _o(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var i=new Event(t,e);else(i=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(i)}function Qo(e,t,i){if("input"==e)switch(this.type){case"range":e="change"}Oo.call(this,e,t,i)}function Ro(){var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=t.apply(this,arguments);return e.abort=function(){},e}}function Po(e){var t=e.target,i=t.mediaSource_;if(i.tc){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.oc=!0,e=0;e<i.sourceBuffers.length;++e)if(0==i.sourceBuffers[e].oc)return;i.tc=!1}}function Bo(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",Po,!1);e.removeEventListener("sourceclose",Bo,!1)}function Yo(e){this.f=[],this.b=[],this.a=[],(new un).Y("pssh",this.c.bind(this)).parse(e.buffer)}function Fo(e,t){try{var i=new Go(e,t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}function Go(e,t){this.keySystem=e;for(var i=!1,n=0;n<t.length;++n){var r=t[n],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var a=0;a<r.audioCapabilities.length;++a){var u=r.audioCapabilities[a];if(u.contentType){o=!0;var c=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,c)&&(s.audioCapabilities.push(u),i=!0)}}if(r.videoCapabilities)for(a=0;a<r.videoCapabilities.length;++a)(u=r.videoCapabilities[a]).contentType&&(o=!0,c=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,c)&&(s.videoCapabilities.push(u),i=!0));if(o||(i=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(i=!1),i)return void(this.a=s)}throw(i=Error("Unsupported keySystem")).name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function Vo(e){var t=this.mediaKeys;return t&&t!=e&&Wo(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Wo(e,this):Promise.resolve()}function Ho(e){this.a=new MSMediaKeys(e),this.b=new ye}function Wo(e,t){if(we(e.b),!t)return Promise.resolve();me(e.b,t,"msneedkey",Zo);var i=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",function e(){t.msSetMediaKeys(i.a),t.removeEventListener("loadedmetadata",e)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function Xo(e){Li.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new ye,this.sessionId="",this.expiration=NaN,this.closed=new W,this.keyStatuses=new Jo}function Zo(e){var t=document.createEvent("CustomEvent");if(t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e=e.initData){var i=new Yo(e);if(!(i.a.length<=1)){for(var n=[],r=0;r<i.a.length;r++)n.push(e.subarray(i.a[r].start,i.a[r].end+1));for(e=ne(n,Ko),n=i=0;n<e.length;n++)i+=e[n].length;for(i=new Uint8Array(i),r=n=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;e=i}}t.initData=e,this.dispatchEvent(t)}function Ko(e,t){return He(e,t)}function qo(e,t){var i=e.keyStatuses;i.size=null==t?0:1,i.a=t,e.dispatchEvent(new Te("keystatuseschange"))}function Jo(){this.size=0,this.a=void 0}function $o(){return Promise.reject(Error("The key system specified is not supported."))}function ea(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function ta(){throw new TypeError("Illegal constructor.")}function ia(){throw new TypeError("Illegal constructor.")}N("shaka.polyfill.register",Uo),Uo(function(){if(M.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",_o),document.addEventListener("webkitfullscreenerror",_o),document.addEventListener("mozfullscreenchange",_o),document.addEventListener("mozfullscreenerror",_o),document.addEventListener("MSFullscreenChange",_o),document.addEventListener("MSFullscreenError",_o)}}),Uo(function(){var e=navigator.userAgent;e&&0<=e.indexOf("CrKey")&&delete M.indexedDB}),Uo(function(){navigator.userAgent.indexOf("Trident/")<0||HTMLInputElement.prototype.addEventListener==Qo||(Oo=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Qo)}),Uo(function(){}),Uo(function(){if(M.MediaSource)if(M.cast&&cast.__platform__&&cast.__platform__.canDisplayType)h=MediaSource.isTypeSupported,l=/^dv(?:he|av)\./,MediaSource.isTypeSupported=function(e){for(var t=e.split(/ *; */),i=t[0],n={},r=1;r<t.length;++r){var s=t[r].split("="),o=s[0];s=s[1].replace(/"(.*)"/,"$1"),n[o]=s}if(!(t=n.codecs))return h(e);var a=!1,u=!1;for(var c in e=t.split(",").filter(function(e){return l.test(e)?!(u=!0):(/^(hev|hvc)1\.2/.test(e)&&(a=!0),!0)}),u&&(a=!1),n.codecs=e.join(","),a&&(n.eotf="smpte2084"),n)i+="; "+c+'="'+n[c]+'"';return cast.__platform__.canDisplayType(i)};else if(navigator.vendor&&0<=navigator.vendor.indexOf("Apple")){var e=navigator.appVersion;s=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){return"mp2t"!=e.split(/ *; */)[0].split("/")[1]&&s(e)},0<=e.indexOf("Version/8")?M.MediaSource=null:0<=e.indexOf("Version/9")?Ro():0<=e.indexOf("Version/10")?(Ro(),n=MediaSource.prototype.endOfStream,MediaSource.prototype.endOfStream=function(){for(var e=0,t=0;t<this.sourceBuffers.length;++t){var i=this.sourceBuffers[t];i=i.buffered.end(i.buffered.length-1),e=Math.max(e,i)}if(!isNaN(this.duration)&&e<this.duration)for(this.tc=!0,e=0;e<this.sourceBuffers.length;++e)this.sourceBuffers[e].oc=!1;return n.apply(this,arguments)},t=!1,r=MediaSource.prototype.addSourceBuffer,MediaSource.prototype.addSourceBuffer=function(){var e=r.apply(this,arguments);return e.mediaSource_=this,e.addEventListener("updateend",Po,!1),t||(this.addEventListener("sourceclose",Bo,!1),t=!0),e}):0<=e.indexOf("Version/11")&&(Ro(),i=SourceBuffer.prototype.remove,SourceBuffer.prototype.remove=function(e,t){return i.call(this,e,t-.001)})}var i,n,t,r,s,h,l}),Yo.prototype.c=function(e){if(!(1<e.version)){var t=Ve(e.s.Ea(16)),i=[];if(0<e.version)for(var n=e.s.C(),r=0;r<n;++r){var s=Ve(e.s.Ea(16));i.push(s)}n=e.s.C(),e.s.F(n),this.b.push.apply(this.b,i),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}},Go.prototype.createMediaKeys=function(){var e=new Ho(this.keySystem);return Promise.resolve(e)},Go.prototype.getConfiguration=function(){return this.a},Ho.prototype.createSession=function(e){var t=e||"temporary";if("temporary"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Xo(this.a,t)},Ho.prototype.setServerCertificate=function(){return Promise.resolve(!1)},w(Xo,Li),(e=Xo.prototype).generateRequest=function(e,t){this.a=new W;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),me(this.f,this.c,"mskeymessage",this.Sd.bind(this)),me(this.f,this.c,"mskeyadded",this.Qd.bind(this)),me(this.f,this.c,"mskeyerror",this.Rd.bind(this)),qo(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},e.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},e.update=function(e){this.b=new W;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},e.close=function(){try{this.c.close(),this.closed.resolve(),we(this.f)}catch(e){this.closed.reject(e)}return this.closed},e.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},e.Sd=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Te("message",{messageType:null==this.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message.buffer}))},e.Qd=function(){this.a?(qo(this,"usable"),this.a.resolve(),this.a=null):this.b&&(qo(this,"usable"),this.b.resolve(),this.b=null)},e.Rd=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:qo(this,"output-not-allowed");break;default:qo(this,"internal-error")}},(e=Jo.prototype).forEach=function(e){this.a&&e(this.a,zo)},e.get=function(e){if(this.has(e))return this.a},e.has=function(e){var t=zo;return!(!this.a||!He(new Uint8Array(e),new Uint8Array(t)))},e.entries=function(){},e.keys=function(){},e.values=function(){},Uo(function(){!M.HTMLVideoElement||!M.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(zo=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Vo,M.MediaKeys=Ho,M.MediaKeySystemAccess=Go,navigator.requestMediaKeySystemAccess=Fo)}),ta.prototype.createSession=function(){},ta.prototype.setServerCertificate=function(){},ia.prototype.getConfiguration=function(){},ia.prototype.createMediaKeys=function(){},Uo(function(){!M.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=$o,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ea,M.MediaKeys=ta,M.MediaKeySystemAccess=ia)},-10);var na,ra="";function sa(e){return ra?ra+e.charAt(0).toUpperCase()+e.slice(1):e}function oa(e,t){try{var i=new ua(e,t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}function aa(e){var t=this.mediaKeys;return t&&t!=e&&ha(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&ha(e,this),Promise.resolve()}function ua(e,t){this.a=this.keySystem=e;var i=!1;"org.w3.clearkey"==e&&(i=!(this.a="webkit-org.w3.clearkey"));var n=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var s=0;s<t.length;++s){var o=t[s],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=0;c<o.audioCapabilities.length;++c){var h=o.audioCapabilities[c];if(h.contentType){u=!0;var l=h.contentType.split(";")[0];r.canPlayType(l,this.a)&&(a.audioCapabilities.push(h),n=!0)}}if(o.videoCapabilities)for(c=0;c<o.videoCapabilities.length;++c)(h=o.videoCapabilities[c]).contentType&&(u=!0,r.canPlayType(h.contentType,this.a)&&(a.videoCapabilities.push(h),n=!0));if(u||(n=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(i?(a.persistentState="required",a.sessionTypes=["persistent-license"]):n=!1),n)return void(this.b=a)}throw i="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(i="None of the requested configurations were supported."),(i=Error(i)).name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function ca(e){this.g=e,this.b=null,this.a=new ye,this.c=[],this.f={}}function ha(e,t){e.b=t,we(e.a);var i=ra;t&&(me(e.a,t,i+"needkey",e.fe.bind(e)),me(e.a,t,i+"keymessage",e.ee.bind(e)),me(e.a,t,i+"keyadded",e.ce.bind(e)),me(e.a,t,i+"keyerror",e.de.bind(e)))}function la(e,t){var i=e.f[t];return i||((i=e.c.shift())?(i.sessionId=t,e.f[t]=i):null)}function da(e,t,i){Li.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=i,this.sessionId="",this.expiration=NaN,this.closed=new W,this.keyStatuses=new pa}function fa(t,e,i){if(t.h)return Promise.reject(Error("The session is already initialized."));t.h=!0;try{if("persistent-license"==t.g)if(i)var n=new Uint8Array(Qe("LOAD_SESSION|"+i));else{var r=Qe("PERSISTENT|"),s=new Uint8Array(r.byteLength+e.byteLength);s.set(new Uint8Array(r),0),s.set(new Uint8Array(e),r.byteLength),n=s}else n=new Uint8Array(e)}catch(e){return Promise.reject(e)}t.b=new W;var o=sa("generateKeyRequest");try{t.f[o](t.c,n)}catch(e){if("InvalidStateError"!=e.name)return t.b=null,Promise.reject(e);setTimeout(function(){try{this.f[o](this.c,n)}catch(e){this.b.reject(e),this.b=null}}.bind(t),10)}return t.b}function Ma(e,t){var i=e.keyStatuses;i.size=null==t?0:1,i.a=t,e.dispatchEvent(new Te("keystatuseschange"))}function pa(){this.size=0,this.a=void 0}function ga(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function ya(e,t,i){return new M.TextTrackCue(e,t,i)}function ma(e,t,i){return new M.TextTrackCue(e+"-"+t+"-"+i,e,t,i)}function Na(){}ua.prototype.createMediaKeys=function(){var e=new ca(this.a);return Promise.resolve(e)},ua.prototype.getConfiguration=function(){return this.b},(e=ca.prototype).createSession=function(e){var t=e||"temporary";if("temporary"!=t&&"persistent-license"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return(e=this.b||document.createElement("video")).src||(e.src="about:blank"),t=new da(e,this.g,t),this.c.push(t),t},e.setServerCertificate=function(){return Promise.resolve(!1)},e.fe=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},e.ee=function(e){var t=la(this,e.sessionId);t&&(e=new Te("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},e.ce=function(e){(e=la(this,e.sessionId))&&(Ma(e,"usable"),e.a&&e.a.resolve(),e.a=null)},e.de=function(e){var t=la(this,e.sessionId);if(t){var i=Error("EME v0.1b key error");i.errorCode=e.errorCode,i.errorCode.systemCode=e.systemCode,!e.sessionId&&t.b?(i.method="generateRequest",45==e.systemCode&&(i.message="Unsupported session type."),t.b.reject(i),t.b=null):e.sessionId&&t.a?(i.method="update",t.a.reject(i),t.a=null):(i=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ma(t,"output-restricted"):Ma(t,1==i?"expired":"internal-error"))}},w(da,Li),(e=da.prototype).ec=function(e,t){if(this.a)this.a.then(this.ec.bind(this,e,t)).catch(this.ec.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var i=ke(t),n=JSON.parse(i);"oct"!=n.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),i=Fe(n.keys[0].k),n=Fe(n.keys[0].kid)}else i=new Uint8Array(t),n=null;var r=sa("addKey");try{this.f[r](this.c,i,n,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},e.generateRequest=function(e,t){return fa(this,t,null)},e.load=function(e){return"persistent-license"==this.g?fa(this,null,e):Promise.reject(Error("Not a persistent session."))},e.update=function(e){var t=new W;return this.ec(t,e),t},e.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=sa("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},e.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(e=pa.prototype).forEach=function(e){this.a&&e(this.a,na)},e.get=function(e){if(this.has(e))return this.a},e.has=function(e){var t=na;return!(!this.a||!He(new Uint8Array(e),new Uint8Array(t)))},e.entries=function(){},e.keys=function(){},e.values=function(){},Uo(function(){if(!(!M.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)ra="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;na=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=oa,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=aa,M.MediaKeys=ca,M.MediaKeySystemAccess=ua}}),Uo(function(){if(M.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this,arguments);return e&&e.catch(function(){}),e}}}),Uo(function(){if(M.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=ga)}}),Uo(function(){if(!M.VTTCue&&M.TextTrackCue){var e=TextTrackCue.length;if(3==e)M.VTTCue=ya;else if(6==e)M.VTTCue=ma;else{try{var t=!!ya(1,2,"")}catch(e){t=!1}t&&(M.VTTCue=ya)}}}),Na.prototype.parseInit=function(){},Na.prototype.parseMedia=function(e,t){var i=ke(e),n=[],r=new DOMParser,s=null;try{s=r.parseFromString(i,"text/xml")}catch(e){throw new z(2,2,2005)}if(s){if(!(r=s.getElementsByTagName("tt")[0]))throw new z(2,2,2005);s=r.getAttribute("ttp:frameRate");var o=r.getAttribute("ttp:subFrameRate"),a=r.getAttribute("ttp:frameRateMultiplier"),u=r.getAttribute("ttp:tickRate");if("default"!=(i=r.getAttribute("xml:space")||"default")&&"preserve"!=i)throw new z(2,2,2005);i="default"==i,s=new Pa(s,o,a,u),o=Sa(r.getElementsByTagName("styling")[0]),a=Sa(r.getElementsByTagName("layout")[0]),u=[];for(var c=0;c<a.length;c++){var h,l=a[c],d=o,f=new mt,M=l.getAttribute("xml:id");if(M)f.id=M,(h=ka(l,d,"tts:extent"))&&(null!=(h=(M=wa.exec(h))||Ta.exec(h))&&(f.width=Number(h[1]),f.height=Number(h[2]),f.widthUnits=M?Nt:0,f.heightUnits=M?Nt:0)),(l=ka(l,d,"tts:origin"))&&(null!=(h=(M=wa.exec(l))||Ta.exec(l))&&(f.viewportAnchorX=Number(h[1]),f.viewportAnchorY=Number(h[2]),f.viewportAnchorUnits=M?Nt:0));else f=null;f&&u.push(f)}for(r=Sa(r.getElementsByTagName("body")[0]),c=0;c<r.length;c++)(f=Ca(r[c],t.periodStart,s,o,a,u,i))&&n.push(f)}return n};var wa=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Da=/^(\d+px|\d+em)$/,Ta=/^(\d+)px (\d+)px$/,Ea=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,va=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Ia=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,La=/^(\d*(?:\.\d*)?)f$/,ja=/^(\d*(?:\.\d*)?)t$/,Aa=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,ba={left:"start",center:ft,right:"end",start:"start",end:"end"},xa={left:"line-left",center:"center",right:"line-right"};function Sa(e){var t=[];if(!e)return t;for(var i=e.childNodes,n=0;n<i.length;n++){var r="span"==i[n].nodeName&&"p"==e.nodeName;i[n].nodeType!=Node.ELEMENT_NODE||"br"==i[n].nodeName||r||(r=Sa(i[n]),t=t.concat(r))}return t.length||t.push(e),t}function Ca(e,t,i,n,r,s,o){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;!function e(t,i){for(var n=t.childNodes,r=0;r<n.length;r++)if("br"==n[r].nodeName&&0<r)n[r-1].textContent+="\n";else if(0<n[r].childNodes.length)e(n[r],i);else if(i){var s=n[r].textContent.trim();s=s.replace(/\s+/g," "),n[r].textContent=s}}(e,o),o=Qa(e.getAttribute("begin"),i);var a=Qa(e.getAttribute("end"),i);i=Qa(e.getAttribute("dur"),i);var u=e.textContent;if(null==a&&null!=i&&(a=o+i),null==o||null==a)throw new z(2,2,2001);if(t=new st(o+t,a+t,u),(r=_a(e,"region",r))&&r.getAttribute("xml:id")){var c=r.getAttribute("xml:id");s=s.filter(function(e){return e.id==c}),t.region=s[0]}return function(e,t,i,n){"rtl"==za(t,i,n,"tts:direction")&&(e.writingDirection=1);var r=za(t,i,n,"tts:writingMode");"tb"==r||"tblr"==r?e.writingDirection=2:"tbrl"==r?e.writingDirection=3:"rltb"==r||"rl"==r?e.writingDirection=1:r&&(e.writingDirection=lt),(r=za(t,i,n,"tts:textAlign"))&&(e.positionAlign=xa[r],e.lineAlign=ba[r],e.textAlign=ut[r.toUpperCase()]);(r=za(t,i,n,"tts:displayAlign"))&&(e.displayAlign=ht[r.toUpperCase()]);(r=za(t,i,n,"tts:color"))&&(e.color=r);(r=za(t,i,n,"tts:backgroundColor"))&&(e.backgroundColor=r);(r=za(t,i,n,"tts:fontFamily"))&&(e.fontFamily=r);(r=za(t,i,n,"tts:fontWeight"))&&"bold"==r&&(e.fontWeight=700),(r=za(t,i,n,"tts:wrapOption"))&&"noWrap"==r&&(e.wrapLine=!1),(r=za(t,i,n,"tts:lineHeight"))&&r.match(Da)&&(e.lineHeight=r),(r=za(t,i,n,"tts:fontSize"))&&r.match(Da)&&(e.fontSize=r),(r=za(t,i,n,"tts:fontStyle"))&&(e.fontStyle=yt[r.toUpperCase()]);(i=ka(i,n,"tts:textDecoration"))&&Oa(e,i),(t=Ua(t,n,"tts:textDecoration"))&&Oa(e,t)}(t,e,r,n),t}function Oa(e,t){for(var i=t.split(" "),n=0;n<i.length;n++)switch(i[n]){case"underline":e.textDecoration.indexOf("underline")<0&&e.textDecoration.push("underline");break;case"noUnderline":0<=e.textDecoration.indexOf("underline")&&se(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.indexOf("lineThrough")<0&&e.textDecoration.push("lineThrough");break;case"noLineThrough":0<=e.textDecoration.indexOf("lineThrough")&&se(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.indexOf("overline")<0&&e.textDecoration.push("overline");break;case"noOverline":0<=e.textDecoration.indexOf("overline")&&se(e.textDecoration,"overline")}}function za(e,t,i,n){return(e=Ua(e,i,n))?e:ka(t,i,n)}function ka(e,t,i){for(var n=Sa(e),r=0;r<n.length;r++){var s=n[r].getAttribute(i);if(s)return s}return(e=_a(e,"style",t))?e.getAttribute(i):null}function Ua(e,t,i){return(e=_a(e,"style",t))?e.getAttribute(i):null}function _a(e,t,i){if(!e||i.length<1)return null;var n=null,r=e;for(e=null;r&&!(e=r.getAttribute(t))&&(r=r.parentNode)instanceof Element;);if(t=e)for(e=0;e<i.length;e++)if(i[e].getAttribute("xml:id")==t){n=i[e];break}return n}function Qa(e,t){var i=null;if(Ea.test(e)){i=Ea.exec(e);var n=Number(i[1]),r=Number(i[2]),s=Number(i[3]),o=Number(i[4]);i=(s+=(o+=(Number(i[5])||0)/t.b)/t.frameRate)+60*r+3600*n}else va.test(e)?i=Ra(va,e):Ia.test(e)?i=Ra(Ia,e):La.test(e)?(i=La.exec(e),i=Number(i[1])/t.frameRate):ja.test(e)?(i=ja.exec(e),i=Number(i[1])/t.a):Aa.test(e)&&(i=Ra(Aa,e));return i}function Ra(e,t){var i=e.exec(t);return null==i||""==i[0]?null:(Number(i[4])||0)/1e3+(Number(i[3])||0)+60*(Number(i[2])||0)+3600*(Number(i[1])||0)}function Pa(e,t,i,n){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(n),0==this.a&&(this.a=e?this.frameRate*this.b:1),i&&(e=/^(\d+) (\d+)$/g.exec(i))&&(this.frameRate*=e[1]/e[2])}function Ba(){this.a=new Na}function Ya(){}function Fa(e,t,i){var n,r,s,o;(n=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=n[1],e.textAlign="middle"==t?at:ut[t.toUpperCase()]):(n=/^vertical:(lr|rl)$/.exec(t))?e.writingDirection="lr"==n[1]?2:3:(n=/^size:([\d.]+)%$/.exec(t))?e.size=Number(n[1]):(n=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(n[1]),n[2]&&(t=n[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(n=/^region:(.*)$/.exec(t))?(r=i,s=n[1],(t=(o=r.filter(function(e){return e.id==s})).length?o[0]:null)&&(e.region=t)):(i=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(i[1]),i[2]&&(e.lineAlign=Mt[i[2].toUpperCase()])):(i=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=dt,e.line=Number(i[1]),i[2]&&(e.lineAlign=Mt[i[2].toUpperCase()]))}function Ga(e){if(null==(e=tr(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),i=Number(e[3]);return 59<t||59<i?null:Number(e[4])/1e3+i+60*t+3600*(Number(e[1])||0)}function Va(){this.a=null}function Ha(e,t,i){var n,r,s;return(new un).D("payl",ln(function(e){n=ke(e)})).D("iden",ln(function(e){r=ke(e)})).D("sttg",ln(function(e){s=ke(e)})).parse(e),n?function(e,t,i,n,r){if(e=new st(n,r,e),t&&(e.id=t),i)for(t=new $n(i),i=ir(t);i;)Fa(e,i,[]),er(t),i=ir(t);return e}(n,r,s,t,i):null}It["application/ttml+xml"]=Na,Ba.prototype.parseInit=function(e){var t=!1;if((new un).D("moov",cn).D("trak",cn).D("mdia",cn).D("minf",cn).D("stbl",cn).Y("stsd",hn).D("stpp",function(e){t=!0,e.ra.stop()}).parse(e),!t)throw new z(2,2,2007)},Ba.prototype.parseMedia=function(e,t){var i=!1,n=[];if((new un).D("mdat",ln(function(e){i=!0,n=n.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!i)throw new z(2,2,2007);return n},It['application/mp4; codecs="stpp"']=Ba,It['application/mp4; codecs="stpp.TTML.im1t"']=Ba,Ya.prototype.parseInit=function(){},Ya.prototype.parseMedia=function(e,t){var i=ke(e);if(i=(i=i.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new z(2,2,2e3);var n=t.segmentStart;if(null==n&&(n=0)<=i[0].indexOf("X-TIMESTAMP-MAP")){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),s=i[0].match(/MPEGTS:(\d+)/m);r&&s&&(n=Ga(new $n(r[1])),n=t.periodStart+(Number(s[1])/9e4-n))}s=[];var o=i[0].split("\n");for(r=1;r<o.length;r++)if(/^Region:/.test(o[r])){var a=new $n(o[r]),u=new mt;ir(a),er(a);for(var c=ir(a);c;){var h=u,l=c;(c=/^id=(.*)$/.exec(l))?h.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(l))?h.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(l))?(h.height=Number(c[1]),h.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(h.regionAnchorX=Number(c[1]),h.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(h.viewportAnchorX=Number(c[1]),h.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(l)&&(h.scroll="up"),er(a),c=ir(a)}s.push(u)}for(r=[],a=1;a<i.length;a++){if(c=o=i[a].split("\n"),l=n,o=s,1==c.length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{u=null,c[0].indexOf("--\x3e")<0&&(u=c[0],c.splice(0,1));var d=Ga(h=new $n(c[0])),f=tr(h,/[ \t]+--\x3e[ \t]+/g),M=Ga(h);if(null==d||null==f||null==M)throw new z(2,2,2001);for(c=new st(d+l,M+l,c.slice(1).join("\n").trim()),er(h),l=ir(h);l;)Fa(c,l,o),er(h),l=ir(h);null!=u&&(c.id=u),o=c}o&&r.push(o)}return r},It["text/vtt"]=Ya,It['text/vtt; codecs="vtt"']=Ya,Va.prototype.parseInit=function(e){var t=!1;if((new un).D("moov",cn).D("trak",cn).D("mdia",cn).Y("mdhd",function(e){0==e.version?(e.s.F(4),e.s.F(4),this.a=e.s.C(),e.s.F(4)):(e.s.F(8),e.s.F(8),this.a=e.s.C(),e.s.F(8)),e.s.F(4)}.bind(this)).D("minf",cn).D("stbl",cn).Y("stsd",hn).D("wvtt",function(){t=!0}).parse(e),!this.a)throw new z(2,2,2008);if(!t)throw new z(2,2,2008)},Va.prototype.parseMedia=function(e,o){var a=this;if(!this.a)throw new z(2,2,2008);var t,u=0,c=[],h=[],i=!1,l=!1,n=!1,d=null;if((new un).D("moof",cn).D("traf",cn).Y("tfdt",function(e){i=!0,u=0==e.version?e.s.C():e.s.Sa()}).Y("tfhd",function(e){var t=e.flags;(e=e.s).F(4),1&t&&e.F(8),2&t&&e.F(4),d=8&t?e.C():null}).Y("trun",function(e){l=!0;var t=e.version,i=e.flags,n=(e=e.s).C();1&i&&e.F(4),4&i&&e.F(4);for(var r=[],s=0;s<n;s++){var o={duration:null,sampleSize:null,fc:null};256&i&&(o.duration=e.C()),512&i&&(o.sampleSize=e.C()),1024&i&&e.F(4),2048&i&&(o.fc=0==t?e.C():e.Kc()),r.push(o)}c=r}).D("mdat",ln(function(e){n=!0,t=e})).parse(e),!n&&!i&&!l)throw new z(2,2,2008);var f=u,M=new rn(new DataView(t.buffer,t.byteOffset,t.byteLength),0);return c.forEach(function(e){var t=e.duration||d,i=e.fc?u+e.fc:f;f=i+(t||0);var n=0;do{var r=M.C();n+=r;var s=null;"vttc"==fn(M.C())?8<r&&(s=M.Ea(r-8)):M.F(r-8),t&&s&&h.push(Ha(s,o.periodStart+i/a.a,o.periodStart+f/a.a))}while(e.sampleSize&&n<e.sampleSize)}),h.filter(Ie)},It['application/mp4; codecs="wvtt"']=Va}).call(e,this),void 0!==t&&t.exports?t.exports=e.shaka:"undefined"!=typeof define&&define.amd?define(function(){return e.shaka}):this.shaka=e.shaka}).call(window)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,i){"object"==typeof t&&(t.exports=function(){var i=Date.now(),n=i,r=0,s=1/0,o=0,a=0,u=1/0,c=0,h=0,t=0,e=document.createElement("div");e.id="stats",e.addEventListener("mousedown",function(e){e.preventDefault(),m(++t%2)},!1),e.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",l.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",e.appendChild(l);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",l.appendChild(d);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",l.appendChild(f);f.children.length<74;){var M=document.createElement("span");M.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(M)}var p=document.createElement("div");p.id="ms",p.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",e.appendChild(p);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",p.appendChild(g);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",p.appendChild(y);y.children.length<74;)(M=document.createElement("span")).style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(M);var m=function(e){switch(t=e){case 0:l.style.display="block",p.style.display="none";break;case 1:l.style.display="none",p.style.display="block"}};return{REVISION:12,domElement:e,setMode:m,begin:function(){i=Date.now()},end:function(){var e=Date.now();r=e-i,s=Math.min(s,r),o=Math.max(o,r),g.textContent=r+" MS ("+s+"-"+o+")";var t=Math.min(30,30-r/200*30);return y.appendChild(y.firstChild).style.height=t+"px",h++,n+1e3<e&&(a=Math.round(1e3*h/(e-n)),u=Math.min(u,a),c=Math.max(c,a),d.textContent=a+" FPS ("+u+"-"+c+")",t=Math.min(30,30-a/100*30),f.appendChild(f.firstChild).style.height=t+"px",n=e,h=0),e},update:function(){i=this.end()}}})},{}],7:[function(l,i,n){(function(t){!function(e){if("object"==typeof n&&void 0!==i)i.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).WebVRManager=e()}}(function(){return function s(o,a,u){function c(i,e){if(!a[i]){if(!o[i]){var t="function"==typeof l&&l;if(!e&&t)return t(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[i]={exports:{}};o[i][0].call(r.exports,function(e){var t=o[i][1][e];return c(t||e)},r,r.exports,s,o,a,u)}return a[i].exports}for(var h="function"==typeof l&&l,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,i){var n=e("./emitter.js"),r=e("./modes.js"),s=e("./util.js");function o(e){var t=e||document.body;this.loadIcons_();var i=this.createButton();i.src=this.ICONS.fullscreen,i.title="Fullscreen mode",(n=i.style).bottom=0,n.right=0,i.addEventListener("click",this.createClickHandler_("fs")),t.appendChild(i),this.fsButton=i;var n,r=this.createButton();r.src=this.ICONS.cardboard,r.title="Virtual reality mode",(n=r.style).bottom=0,n.right="48px",r.addEventListener("click",this.createClickHandler_("vr")),t.appendChild(r),this.vrButton=r,this.isVisible=!0}(o.prototype=new n).createButton=function(){var e=document.createElement("img");e.className="webvr-button";var t=e.style;return t.position="absolute",t.width="24px",t.height="24px",t.backgroundSize="cover",t.backgroundColor="transparent",t.border=0,t.userSelect="none",t.webkitUserSelect="none",t.MozUserSelect="none",t.cursor="pointer",t.padding="12px",t.zIndex=1,t.display="none",t.boxSizing="content-box",e.draggable=!1,e.addEventListener("dragstart",function(e){e.preventDefault()}),e.addEventListener("mouseenter",function(e){t.filter=t.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"}),e.addEventListener("mouseleave",function(e){t.filter=t.webkitFilter=""}),e},o.prototype.setMode=function(e,t){if(t=t||WebVRConfig.FORCE_ENABLE_VR,this.isVisible){switch(e){case r.NORMAL:this.fsButton.style.display="block",this.fsButton.src=this.ICONS.fullscreen,this.vrButton.style.display=t?"block":"none";break;case r.MAGIC_WINDOW:this.fsButton.style.display="block",this.fsButton.src=this.ICONS.exitFullscreen,this.vrButton.style.display="none";break;case r.VR:this.fsButton.style.display="none",this.vrButton.style.display="none"}var i=this.fsButton.style.display;this.fsButton.style.display="inline-block",this.fsButton.offsetHeight,this.fsButton.style.display=i}},o.prototype.setVisibility=function(e){this.isVisible=e,this.fsButton.style.display=e?"block":"none",this.vrButton.style.display=e?"block":"none"},o.prototype.createClickHandler_=function(t){return function(e){e.stopPropagation(),e.preventDefault(),this.emit(t)}.bind(this)},o.prototype.loadIcons_=function(){this.ICONS={},this.ICONS.cardboard=s.base64("image/svg+xml","PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo="),this.ICONS.fullscreen=s.base64("image/svg+xml","PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNyAxNEg1djVoNXYtMkg3di0zem0tMi00aDJWN2gzVjVINXY1em0xMiA3aC0zdjJoNXYtNWgtMnYzek0xNCA1djJoM3YzaDJWNWgtNXoiLz4KPC9zdmc+Cg=="),this.ICONS.exitFullscreen=s.base64("image/svg+xml","PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNSAxNmgzdjNoMnYtNUg1djJ6bTMtOEg1djJoNVY1SDh2M3ptNiAxMWgydi0zaDN2LTJoLTV2NXptMi0xMVY1aC0ydjVoNVY4aC0zeiIvPgo8L3N2Zz4K"),this.ICONS.settings=s.base64("image/svg+xml","PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVDMTQuNDYgMi4xOCAxNC4yNSAyIDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==")},t.exports=o},{"./emitter.js":2,"./modes.js":3,"./util.js":4}],2:[function(e,t,i){function n(){this.callbacks={}}n.prototype.emit=function(e){var t=this.callbacks[e];if(t){var i=[].slice.call(arguments);i.shift();for(var n=0;n<t.length;n++)t[n].apply(this,i)}},n.prototype.on=function(e,t){e in this.callbacks?this.callbacks[e].push(t):this.callbacks[e]=[t]},t.exports=n},{}],3:[function(e,t,i){t.exports={UNKNOWN:0,NORMAL:1,MAGIC_WINDOW:2,VR:3}},{}],4:[function(e,t,i){var n={base64:function(e,t){return"data:"+e+";base64,"+t},isMobile:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch(e){return!0}},appendQueryParameter:function(e,t,i){var n=e.indexOf("?")<0?"?":"&";return e+=n+t+"="+i},getQueryParameter:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},isLandscapeMode:function(){return 90==window.orientation||-90==window.orientation},getScreenWidth:function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},getScreenHeight:function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio}};t.exports=n},{}],5:[function(e,t,i){var s=e("./button-manager.js"),n=e("./emitter.js"),o=e("./modes.js"),a=e("./util.js");function r(e,t,i){this.params=i||{},this.mode=o.UNKNOWN,this.hideButton=this.params.hideButton||!1,this.predistorted=!!this.params.predistorted,this.renderer=e,this.effect=t;var n=document.querySelector(".webvr-polyfill-fullscreen-wrapper");this.button=new s(n),this.isFullscreenDisabled=!!a.getQueryParameter("no_fullscreen"),this.startMode=o.NORMAL;var r=parseInt(a.getQueryParameter("start_mode"));isNaN(r)||(this.startMode=r),this.hideButton&&this.button.setVisibility(!1),this.getDeviceByType_(VRDisplay).then(function(e){switch(this.hmd=e,this.isVRCompatibleOverride||(this.isVRCompatible=!e.isPolyfilled||a.isMobile()),this.startMode){case o.MAGIC_WINDOW:this.setMode_(o.MAGIC_WINDOW);break;case o.VR:this.enterVRMode_(),this.setMode_(o.VR);break;default:this.setMode_(o.NORMAL)}this.emit("initialized")}.bind(this)),this.button.on("fs",this.onFSClick_.bind(this)),this.button.on("vr",this.onVRClick_.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange_.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange_.bind(this)),document.addEventListener("msfullscreenchange",this.onFullscreenChange_.bind(this)),window.addEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange_.bind(this)),window.addEventListener("vrdisplaydeviceparamschange",this.onVRDisplayDeviceParamsChange_.bind(this))}r.prototype=new n,r.Modes=o,r.prototype.render=function(e,t,i){e instanceof Array?this.effect.render(e[0],t):this.effect.render(e,t)},r.prototype.setVRCompatibleOverride=function(e){this.isVRCompatible=e,this.isVRCompatibleOverride=!0,this.button.setMode(this.mode,this.isVRCompatible)},r.prototype.setFullscreenCallback=function(e){this.fullscreenCallback=e},r.prototype.setVRCallback=function(e){this.vrCallback=e},r.prototype.setExitFullscreenCallback=function(e){this.exitFullscreenCallback=e},r.prototype.getDeviceByType_=function(n){return new Promise(function(i,e){navigator.getVRDisplays().then(function(e){for(var t=0;t<e.length;t++)if(e[t]instanceof n){i(e[t]);break}i(null)},function(){i(null)})})},r.prototype.enterVRMode_=function(){this.hmd.requestPresent([{source:this.renderer.domElement,predistorted:this.predistorted}])},r.prototype.setMode_=function(e){var t=this.mode;e!=this.mode?(this.mode=e,this.button.setMode(e,this.isVRCompatible),this.emit("modechange",e,t)):console.warn("Not changing modes, already in %s",e)},r.prototype.onFSClick_=function(){switch(this.mode){case o.NORMAL:if(a.isIOS()&&a.isIFrame()){if(!this.fullscreenCallback){var e=window.location.href;return e=a.appendQueryParameter(e,"no_fullscreen","true"),e=a.appendQueryParameter(e,"start_mode",o.MAGIC_WINDOW),void(top.location.href=e)}this.fullscreenCallback()}this.setMode_(o.MAGIC_WINDOW),this.requestFullscreen_();break;case o.MAGIC_WINDOW:if(this.isFullscreenDisabled)return void window.history.back();this.exitFullscreenCallback&&this.exitFullscreenCallback(),this.setMode_(o.NORMAL),this.exitFullscreen_()}},r.prototype.onVRClick_=function(){if(this.mode==o.NORMAL&&a.isIOS()&&a.isIFrame()){if(!this.vrCallback){var e=window.location.href;return e=a.appendQueryParameter(e,"no_fullscreen","true"),e=a.appendQueryParameter(e,"start_mode",o.VR),void(top.location.href=e)}this.vrCallback()}this.enterVRMode_()},r.prototype.requestFullscreen_=function(){var e=document.body;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},r.prototype.exitFullscreen_=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},r.prototype.onVRDisplayPresentChange_=function(e){console.log("onVRDisplayPresentChange_",e),this.hmd.isPresenting?this.setMode_(o.VR):this.setMode_(o.NORMAL)},r.prototype.onVRDisplayDeviceParamsChange_=function(e){console.log("onVRDisplayDeviceParamsChange_",e)},r.prototype.onFullscreenChange_=function(e){null!==document.webkitFullscreenElement&&null!==document.mozFullScreenElement||this.setMode_(o.NORMAL)},t.exports=r},{"./button-manager.js":1,"./emitter.js":2,"./modes.js":3,"./util.js":4}]},{},[5])(5)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,i){t.exports={_from:"webvr-polyfill@0.9.41",_id:"webvr-polyfill@0.9.41",_inBundle:!1,_integrity:"sha512-xgZPm7DXd2iUn4wh+/ubh1AzYWaHlx6VCmpxgTvoKzi1sMz9ePChQvsq1tm18aUfuzs6dtMrnNWoaQIwl81QsQ==",_location:"/webvr-polyfill",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"webvr-polyfill@0.9.41",name:"webvr-polyfill",escapedName:"webvr-polyfill",rawSpec:"0.9.41",saveSpec:null,fetchSpec:"0.9.41"},_requiredBy:["#USER","/","/webvr-boilerplate"],_resolved:"https://registry.npmjs.org/webvr-polyfill/-/webvr-polyfill-0.9.41.tgz",_shasum:"dcaaed05ea8e14a44b629679ca32b9a35780e0e3",_spec:"webvr-polyfill@0.9.41",_where:"/Users/dee/Sites/vr-hosting/node_modules/vrview",authors:["Boris Smus <boris@smus.com>","Brandon Jones <tojiro@gmail.com>","Jordan Santell <jordan@jsantell.com>"],bugs:{url:"https://github.com/googlevr/webvr-polyfill/issues"},bundleDependencies:!1,deprecated:!1,description:"Use WebVR today, on mobile or desktop, without requiring a special browser build.",devDependencies:{chai:"^3.5.0",jsdom:"^9.12.0",mocha:"^3.2.0",semver:"^5.3.0",webpack:"^2.6.1","webpack-dev-server":"2.7.1"},homepage:"https://github.com/googlevr/webvr-polyfill",keywords:["vr","webvr"],license:"Apache-2.0",main:"src/node-entry",name:"webvr-polyfill",repository:{type:"git",url:"git+https://github.com/googlevr/webvr-polyfill.git"},scripts:{build:"webpack",start:"npm run watch",test:"mocha",watch:"webpack-dev-server"},version:"0.9.41"}},{}],9:[function(e,t,i){var l=e("./util.js"),n=e("./wakelock.js"),r=1e3,s=!1,d=[0,0,.5,1],f=[.5,0,.5,1];function o(){this.isPolyfilled=!0,this.displayId=r++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new n}function a(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function u(){}function c(){}o.prototype.getFrameData=function(e){return l.frameDataFromPose(e,this.getPose(),this)},o.prototype.getPose=function(){return this.getImmediatePose()},o.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},o.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)},o.prototype.wrapForFullscreen=function(e){if(l.isIOS())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=e;var i=this.fullscreenElement_.parentElement;i.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),i.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},o.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),t.insertBefore(e,this.fullscreenWrapper_),t.removeChild(this.fullscreenWrapper_),e}},o.prototype.requestPresent=function(u){var c=this.isPresenting,h=this;return u instanceof Array||(s||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),s=!0),u=[u]),new Promise(function(t,e){if(h.capabilities.canPresent)if(0==u.length||u.length>h.capabilities.maxLayers)e(new Error("Invalid number of layers."));else{var i=u[0];if(i.source){var n=i.leftBounds||d,r=i.rightBounds||f;if(c){var s=h.layer_;s.source!==i.source&&(s.source=i.source);for(var o=0;o<4;o++)s.leftBounds[o]=n[o],s.rightBounds[o]=r[o];t()}else{if(h.layer_={predistorted:i.predistorted,source:i.source,leftBounds:n.slice(0),rightBounds:r.slice(0)},h.waitingForPresent_=!1,h.layer_&&h.layer_.source){var a=h.wrapForFullscreen(h.layer_.source);h.addFullscreenListeners_(a,function(){var e=l.getFullscreenElement();h.isPresenting=a===e,h.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),h.waitingForPresent_=!1,h.beginPresent_(),t()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),h.removeFullscreenWrapper(),h.wakelock_.release(),h.endPresent_(),h.removeFullscreenListeners_()),h.fireVRDisplayPresentChange_()},function(){h.waitingForPresent_&&(h.removeFullscreenWrapper(),h.removeFullscreenListeners_(),h.wakelock_.release(),h.waitingForPresent_=!1,h.isPresenting=!1,e(new Error("Unable to present.")))}),l.requestFullscreen(a)?(h.wakelock_.request(),h.waitingForPresent_=!0):(l.isIOS()||l.isWebViewAndroid())&&(h.wakelock_.request(),h.isPresenting=!0,h.beginPresent_(),h.fireVRDisplayPresentChange_(),t())}h.waitingForPresent_||l.isIOS()||(l.exitFullscreen(),e(new Error("Unable to present.")))}}else t()}else e(new Error("VRDisplay is not capable of presenting."))})},o.prototype.exitPresent=function(){var i=this.isPresenting,n=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(e,t){i?(!l.exitFullscreen()&&l.isIOS()&&(n.endPresent_(),n.fireVRDisplayPresentChange_()),l.isWebViewAndroid()&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.endPresent_(),n.fireVRDisplayPresentChange_()),e()):t(new Error("Was not presenting to VRDisplay."))})},o.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},o.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},o.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},o.prototype.addFullscreenListeners_=function(e,t,i){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=i,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),i&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",i,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",i,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",i,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",i,!1))},o.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var i=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",i,!1),e.removeEventListener("webkitfullscreenerror",i,!1),document.removeEventListener("mozfullscreenerror",i,!1),e.removeEventListener("msfullscreenerror",i,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},o.prototype.beginPresent_=function(){},o.prototype.endPresent_=function(){},o.prototype.submitFrame=function(e){},o.prototype.getEyeParameters=function(e){return null},u.prototype=new a,c.prototype=new a,t.exports.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},t.exports.VRDisplay=o,t.exports.VRDevice=a,t.exports.HMDVRDevice=u,t.exports.PositionSensorVRDevice=c},{"./util.js":29,"./wakelock.js":31}],10:[function(e,t,i){var n=e("./cardboard-ui.js"),D=e("./util.js"),s=e("./deps/wglu-preserve-state.js"),r=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),o=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function a(e){this.gl=e,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,D.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=D.linkProgram(e,r,o,this.attribs),this.uniforms=D.getProgramUniforms(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new n(e))}a.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},a.prototype.onResize=function(){var e=this.gl,t=this,i=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];s(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},a.prototype.patch=function(){if(!this.isPatched){var r=this,t=this.gl.canvas,s=this.gl;D.isIOS()||(t.width=D.getScreenWidth()*this.bufferScale,t.height=D.getScreenHeight()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return r.bufferWidth},set:function(e){r.bufferWidth=e,r.realCanvasWidth.set.call(t,e),r.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return r.bufferHeight},set:function(e){r.bufferHeight=e,r.realCanvasHeight.set.call(t,e),r.onResize()}})),this.lastBoundFramebuffer=s.getParameter(s.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(e,t){r.lastBoundFramebuffer=t||r.framebuffer,r.realBindFramebuffer.call(s,e,r.lastBoundFramebuffer)},this.cullFace=s.getParameter(s.CULL_FACE),this.depthTest=s.getParameter(s.DEPTH_TEST),this.blend=s.getParameter(s.BLEND),this.scissorTest=s.getParameter(s.SCISSOR_TEST),this.stencilTest=s.getParameter(s.STENCIL_TEST),s.enable=function(e){switch(e){case s.CULL_FACE:r.cullFace=!0;break;case s.DEPTH_TEST:r.depthTest=!0;break;case s.BLEND:r.blend=!0;break;case s.SCISSOR_TEST:r.scissorTest=!0;break;case s.STENCIL_TEST:r.stencilTest=!0}r.realEnable.call(s,e)},s.disable=function(e){switch(e){case s.CULL_FACE:r.cullFace=!1;break;case s.DEPTH_TEST:r.depthTest=!1;break;case s.BLEND:r.blend=!1;break;case s.SCISSOR_TEST:r.scissorTest=!1;break;case s.STENCIL_TEST:r.stencilTest=!1}r.realDisable.call(s,e)},this.colorMask=s.getParameter(s.COLOR_WRITEMASK),s.colorMask=function(e,t,i,n){r.colorMask[0]=e,r.colorMask[1]=t,r.colorMask[2]=i,r.colorMask[3]=n,r.realColorMask.call(s,e,t,i,n)},this.clearColor=s.getParameter(s.COLOR_CLEAR_VALUE),s.clearColor=function(e,t,i,n){r.clearColor[0]=e,r.clearColor[1]=t,r.clearColor[2]=i,r.clearColor[3]=n,r.realClearColor.call(s,e,t,i,n)},this.viewport=s.getParameter(s.VIEWPORT),s.viewport=function(e,t,i,n){r.viewport[0]=e,r.viewport[1]=t,r.viewport[2]=i,r.viewport[3]=n,r.realViewport.call(s,e,t,i,n)},this.isPatched=!0,D.safariCssSizeWorkaround(t)}},a.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;D.isIOS()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){D.safariCssSizeWorkaround(t)},1)}},a.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},a.prototype.submitFrame=function(){var e=this.gl,t=this,i=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||i.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),s(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||D.isIOS())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),D.isIOS()){var n=e.canvas;n.width==t.bufferWidth&&n.height==t.bufferHeight||(t.bufferWidth=n.width,t.bufferHeight=n.height,t.onResize())}},a.prototype.updateDeviceInfo=function(n){var e=this.gl,r=this,t=[e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING];s(e,t,function(e){var t=r.computeMeshVertices_(r.meshWidth,r.meshHeight,n);if(e.bindBuffer(e.ARRAY_BUFFER,r.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),!r.indexCount){var i=r.computeMeshIndices_(r.meshWidth,r.meshHeight);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i,e.STATIC_DRAW),r.indexCount=i.length}})},a.prototype.computeMeshVertices_=function(e,t,i){for(var n=new Float32Array(2*e*t*5),r=i.getLeftEyeVisibleTanAngles(),s=i.getLeftEyeNoLensTanAngles(),o=i.getLeftEyeVisibleScreenRect(s),a=0,u=0;u<2;u++){for(var c=0;c<t;c++)for(var h=0;h<e;h++,a++){var l=h/(e-1),d=c/(t-1),f=l,M=d,p=D.lerp(r[0],r[2],l),g=D.lerp(r[3],r[1],d),y=Math.sqrt(p*p+g*g),m=i.distortion.distortInverse(y),N=g*m/y;l=(p*m/y-s[0])/(s[2]-s[0]),d=(N-s[3])/(s[1]-s[3]);i.device.widthMeters,i.device.heightMeters;l=2*(o.x+l*o.width-.5),d=2*(o.y+d*o.height-.5),n[5*a+0]=l,n[5*a+1]=d,n[5*a+2]=f,n[5*a+3]=M,n[5*a+4]=u}var w=r[2]-r[0];r[0]=-(w+r[0]),r[2]=w-r[2],w=s[2]-s[0],s[0]=-(w+s[0]),s[2]=w-s[2],o.x=1-(o.x+o.width)}return n},a.prototype.computeMeshIndices_=function(e,t){for(var i=new Uint16Array(2*(e-1)*(t-1)*6),n=e/2,r=t/2,s=0,o=0,a=0;a<2;a++)for(var u=0;u<t;u++)for(var c=0;c<e;c++,s++)0!=c&&0!=u&&(i[o++]=c<=n==u<=r?(i[o++]=s,i[o++]=s-e-1,i[o++]=s-e,i[o++]=s-e-1,(i[o++]=s)-1):(i[o++]=s-1,i[o++]=s-e,i[o++]=s,i[o++]=s-e,i[o++]=s-1,s-e-1));return i},a.prototype.getOwnPropertyDescriptor_=function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i.get&&void 0!==i.set||(i.configurable=!0,i.enumerable=!0,i.get=function(){return this.getAttribute(t)},i.set=function(e){this.setAttribute(t,e)}),i},t.exports=a},{"./cardboard-ui.js":11,"./deps/wglu-preserve-state.js":13,"./util.js":29}],11:[function(e,t,i){var n=e("./util.js"),r=e("./deps/wglu-preserve-state.js"),s=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),o=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),p=Math.PI/180;function a(e){this.gl=e,this.attribs={position:0},this.program=n.linkProgram(e,s,o,this.attribs),this.uniforms=n.getProgramUniforms(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}a.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},a.prototype.listen=function(i,n){var r=this.gl.canvas;this.listener=function(e){var t=r.clientWidth/2;e.clientX>t-42&&e.clientX<t+42&&e.clientY>r.clientHeight-42?i(e):e.clientX<42&&e.clientY<42&&n(e)},r.addEventListener("click",this.listener,!1)},a.prototype.onResize=function(){var e=this.gl,M=this,t=[e.ARRAY_BUFFER_BINDING];r(e,t,function(i){var s=[],o=i.drawingBufferWidth/2,e=Math.max(screen.width,screen.height)*window.devicePixelRatio,t=i.drawingBufferWidth/e*window.devicePixelRatio,n=4*t/2,r=42*t,a=28*t/2,u=14*t;function c(e,t){var i=(90-e)*p,n=Math.cos(i),r=Math.sin(i);s.push(.3125*n*a+o,.3125*r*a+a),s.push(t*n*a+o,t*r*a+a)}s.push(o-n,r),s.push(o-n,i.drawingBufferHeight),s.push(o+n,r),s.push(o+n,i.drawingBufferHeight),M.gearOffset=s.length/2;for(var h=0;h<=6;h++){var l=60*h;c(l,1),c(l+12,1),c(l+20,.75),c(l+40,.75),c(l+48,1)}function d(e,t){s.push(u+e,i.drawingBufferHeight-u-t)}M.gearVertexCount=s.length/2-M.gearOffset,M.arrowOffset=s.length/2;var f=n/Math.sin(45*p);d(0,a),d(a,0),d(a+f,f),d(f,a+f),d(f,a-f),d(0,a),d(a,2*a),d(a+f,2*a-f),d(f,a-f),d(0,a),d(f,a-n),d(28*t,a-n),d(f,a+n),d(28*t,a+n),M.arrowVertexCount=s.length/2-M.arrowOffset,i.bindBuffer(i.ARRAY_BUFFER,M.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(s),i.STATIC_DRAW)})},a.prototype.render=function(){var e=this.gl,t=this,i=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];r(e,i,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},a.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),n.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},t.exports=a},{"./deps/wglu-preserve-state.js":13,"./util.js":29}],12:[function(e,t,i){var n=e("./cardboard-distorter.js"),r=e("./cardboard-ui.js"),s=e("./device-info.js"),o=e("./dpdb/dpdb.js"),a=e("./sensor-fusion/fusion-pose-sensor.js"),u=e("./rotate-instructions.js"),c=e("./viewer-selector.js"),h=e("./base.js").VRDisplay,l=e("./util.js"),d="left",f="right";function M(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new a,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new o(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new s(this.dpdb_.getDeviceParams()),this.viewerSelector_=new c,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new u),l.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}(M.prototype=new h).getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},M.prototype.resetPose=function(){this.poseSensor_.resetPose()},M.prototype.getEyeParameters=function(e){var t,i=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(e==d)i[0]*=-1,t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=f)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:t,offset:i,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},M.prototype.onDeviceParamsUpdated_=function(e){l.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},M.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},M.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?window.WebVRConfig.CARDBOARD_UI_DISABLED||(e.canvas.width=l.getScreenWidth()*this.bufferScale_,e.canvas.height=l.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new r(e)):(this.distorter_=new n(e),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(l.isLandscapeMode()&&l.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},M.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},M.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},M.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},M.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),l.safariCssSizeWorkaround(t.canvas)}},M.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},M.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},t.exports=M},{"./base.js":9,"./cardboard-distorter.js":10,"./cardboard-ui.js":11,"./device-info.js":14,"./dpdb/dpdb.js":18,"./rotate-instructions.js":23,"./sensor-fusion/fusion-pose-sensor.js":25,"./util.js":29,"./viewer-selector.js":30}],13:[function(e,t,i){t.exports=function(e,t,i){if(t){for(var n=[],r=null,s=0;s<t.length;++s)switch(o=t[s]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((u=t[++s])<e.TEXTURE0||u>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),n.push(null,null);break}r||(r=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(u),n.push(e.getParameter(o),null);break;case e.ACTIVE_TEXTURE:r=e.getParameter(e.ACTIVE_TEXTURE),n.push(null);break;default:n.push(e.getParameter(o))}for(i(e),s=0;s<t.length;++s){var o=t[s],a=n[s];switch(o){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,a);break;case e.COLOR_CLEAR_VALUE:e.clearColor(a[0],a[1],a[2],a[3]);break;case e.COLOR_WRITEMASK:e.colorMask(a[0],a[1],a[2],a[3]);break;case e.CURRENT_PROGRAM:e.useProgram(a);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,a);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,a);break;case e.TEXTURE_BINDING_2D:if((u=t[++s])<e.TEXTURE0||u>e.TEXTURE31)break;e.activeTexture(u),e.bindTexture(e.TEXTURE_2D,a);break;case e.TEXTURE_BINDING_CUBE_MAP:var u;if((u=t[++s])<e.TEXTURE0||u>e.TEXTURE31)break;e.activeTexture(u),e.bindTexture(e.TEXTURE_CUBE_MAP,a);break;case e.VIEWPORT:e.viewport(a[0],a[1],a[2],a[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:a?e.enable(o):e.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}r&&e.activeTexture(r)}}else i(e)}},{}],14:[function(e,t,i){var n=e("./distortion/distortion.js"),m=e("./math-util.js"),r=e("./util.js");function s(e){this.width=e.width||r.getScreenWidth(),this.height=e.height||r.getScreenHeight(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}var o=new s({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),a=new s({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),u={CardboardV1:new h({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new h({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function c(e){this.viewer=u.CardboardV2,this.updateDeviceParams(e),this.distortion=new n(this.viewer.distortionCoefficients)}function h(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}c.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},c.prototype.getDevice=function(){return this.device},c.prototype.setViewer=function(e){this.viewer=e,this.distortion=new n(this.viewer.distortionCoefficients)},c.prototype.determineDevice_=function(e){if(!e)return r.isIOS()?(console.warn("Using fallback iOS device measurements."),a):(console.warn("Using fallback Android device measurements."),o);var t=.0254/e.xdpi,i=.0254/e.ydpi;return new s({widthMeters:t*r.getScreenWidth(),heightMeters:i*r.getScreenHeight(),bevelMeters:.001*e.bevelMm})},c.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,i=this.distortion,n=e.screenLensDistance,r=(t.widthMeters-e.interLensDistance)/2,s=e.interLensDistance/2,o=e.baselineLensDistance-t.bevelMeters,a=t.heightMeters-o,u=m.radToDeg*Math.atan(i.distort(r/n)),c=m.radToDeg*Math.atan(i.distort(s/n)),h=m.radToDeg*Math.atan(i.distort(o/n)),l=m.radToDeg*Math.atan(i.distort(a/n));return{leftDegrees:Math.min(u,e.fov),rightDegrees:Math.min(c,e.fov),downDegrees:Math.min(h,e.fov),upDegrees:Math.min(l,e.fov)}},c.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,n=Math.tan(-m.degToRad*e.fov),r=Math.tan(m.degToRad*e.fov),s=Math.tan(m.degToRad*e.fov),o=Math.tan(-m.degToRad*e.fov),a=t.widthMeters/4,u=t.heightMeters/2,c=e.baselineLensDistance-t.bevelMeters-u,h=e.interLensDistance/2-a,l=-c,d=e.screenLensDistance,f=i.distort((h-a)/d),M=i.distort((l+u)/d),p=i.distort((h+a)/d),g=i.distort((l-u)/d),y=new Float32Array(4);return y[0]=Math.max(n,f),y[1]=Math.min(r,M),y[2]=Math.min(s,p),y[3]=Math.max(o,g),y},c.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,n=new Float32Array(4),r=i.distortInverse(Math.tan(-m.degToRad*e.fov)),s=i.distortInverse(Math.tan(m.degToRad*e.fov)),o=i.distortInverse(Math.tan(m.degToRad*e.fov)),a=i.distortInverse(Math.tan(-m.degToRad*e.fov)),u=t.widthMeters/4,c=t.heightMeters/2,h=e.baselineLensDistance-t.bevelMeters-c,l=e.interLensDistance/2-u,d=-h,f=e.screenLensDistance,M=(l-u)/f,p=(d+c)/f,g=(l+u)/f,y=(d-c)/f;return n[0]=Math.max(r,M),n[1]=Math.min(s,p),n[2]=Math.min(o,g),n[3]=Math.max(a,y),n},c.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,i=this.device,n=t.screenLensDistance,r=(i.widthMeters-t.interLensDistance)/2,s=t.baselineLensDistance-i.bevelMeters,o=(e[0]*n+r)/i.widthMeters,a=(e[1]*n+s)/i.heightMeters,u=(e[2]*n+r)/i.widthMeters,c=(e[3]*n+s)/i.heightMeters;return{x:o,y:c,width:u-o,height:a-c}},c.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},c.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},c.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:m.radToDeg*Math.atan(e.outerDist),rightDegrees:m.radToDeg*Math.atan(e.innerDist),downDegrees:m.radToDeg*Math.atan(e.bottomDist),upDegrees:m.radToDeg*Math.atan(e.topDist)}},c.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,i=this.device,n=t.screenLensDistance,r=i.widthMeters/n,s=i.heightMeters/n,o=i.width/r,a=i.height/s,u=Math.round((e.eyePosX-e.outerDist)*o),c=Math.round((e.eyePosY-e.bottomDist)*a);return{x:u,y:c,width:Math.round((e.eyePosX+e.innerDist)*o)-u,height:Math.round((e.eyePosY+e.topDist)*a)-c}},c.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,i=this.distortion,n=e.screenLensDistance,r=e.interLensDistance/2/n,s=t.widthMeters/n,o=t.heightMeters/n,a=s/2-r,u=(e.baselineLensDistance-t.bevelMeters)/n,c=e.fov,h=i.distortInverse(Math.tan(m.degToRad*c)),l=Math.min(a,h),d=Math.min(r,h),f=Math.min(u,h);return{outerDist:l,innerDist:d,topDist:Math.min(o-u,h),bottomDist:f,eyePosX:a,eyePosY:u}},c.Viewers=u,t.exports=c},{"./distortion/distortion.js":16,"./math-util.js":20,"./util.js":29}],15:[function(e,t,i){e("./base.js").VRDisplay;var n=e("./base.js").HMDVRDevice,r=e("./base.js").PositionSensorVRDevice;function s(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:HMD:"+e.displayId,this.deviceName=e.displayName+" (HMD)"}function o(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId,this.deviceName=e.displayName+" (PositionSensor)"}(s.prototype=new n).getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:"right"==e?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}},s.prototype.setFieldOfView=function(e,t,i,n){},(o.prototype=new r).getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},o.prototype.resetState=function(){return this.positionDevice.resetPose()},t.exports.VRDisplayHMDDevice=s,t.exports.VRDisplayPositionSensorDevice=o},{"./base.js":9}],16:[function(e,t,i){function n(e){this.coefficients=e}n.prototype.distortInverse=function(e){for(var t=0,i=1,n=e-this.distort(t);1e-4<Math.abs(i-t);){var r=e-this.distort(i),s=i-r*((i-t)/(r-n));t=i,i=s,n=r}return i},n.prototype.distort=function(e){for(var t=e*e,i=0,n=0;n<this.coefficients.length;n++)i=t*(i+this.coefficients[n]);return(i+1)*e},t.exports=n},{}],17:[function(e,t,i){t.exports={format:1,last_updated:"2017-08-27T14:39:31Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3}]}},{}],18:[function(e,t,i){var r=e("./dpdb.json"),c=e("../util.js");function n(e,t){if(this.dpdb=r,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var i=new XMLHttpRequest,n=this;i.open("GET","https://dpdb.webvr.rocks/dpdb.json",!0),i.addEventListener("load",function(){n.loading=!1,200<=i.status&&i.status<=299?(n.dpdb=JSON.parse(i.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),i.send()}}function h(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}n.prototype.getDeviceParams=function(){return this.deviceParams},n.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},n.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,i=c.getScreenWidth(),n=c.getScreenHeight();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var r=0;r<e.devices.length;r++){var s=e.devices[r];if(s.rules)if("ios"==s.type||"android"==s.type){if(c.isIOS()==("ios"==s.type)){for(var o=!1,a=0;a<s.rules.length;a++){var u=s.rules[a];if(this.matchRule_(u,t,i,n)){o=!0;break}}if(o)return new h({xdpi:s.dpi[0]||s.dpi,ydpi:s.dpi[1]||s.dpi,bevelMm:s.bw})}}else console.warn("Device["+r+"] has invalid type.");else console.warn("Device["+r+"] has no rules section.")}return console.warn("No DPDB device match."),null},n.prototype.matchRule_=function(e,t,i,n){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var r=e.res[0],s=e.res[1];if(Math.min(i,n)!=Math.min(r,s)||Math.max(i,n)!=Math.max(r,s))return!1}return!0},t.exports=n},{"../util.js":29,"./dpdb.json":17}],19:[function(e,t,i){var n=e("./util.js"),r=e("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=n.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1,GET_VR_DISPLAYS_TIMEOUT:1e3},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new r}:new r,window.WebVRPolyfill=r},{"./util.js":29,"./webvr-polyfill.js":32}],20:[function(e,t,i){var n,r,s=window.MathUtil||{};s.degToRad=Math.PI/180,s.radToDeg=180/Math.PI,s.Vector2=function(e,t){this.x=e||0,this.y=t||0},s.Vector2.prototype={constructor:s.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},s.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},s.Vector3.prototype={constructor:s.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,s=e.y,o=e.z,a=e.w,u=a*t+s*n-o*i,c=a*i+o*t-r*n,h=a*n+r*i-s*t,l=-r*t-s*i-o*n;return this.x=u*a+l*-r+c*-o-h*-s,this.y=c*a+l*-s+h*-r-u*-o,this.z=h*a+l*-o+u*-s-c*-r,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var i=e.x,n=e.y,r=e.z,s=t.x,o=t.y,a=t.z;return this.x=n*a-r*o,this.y=r*s-i*a,this.z=i*o-n*s,this}},s.Quaternion=function(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1},s.Quaternion.prototype={constructor:s.Quaternion,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,i){var n=Math.cos(e/2),r=Math.cos(t/2),s=Math.cos(i/2),o=Math.sin(e/2),a=Math.sin(t/2),u=Math.sin(i/2);return this.x=o*r*s+n*a*u,this.y=n*a*s-o*r*u,this.z=n*r*u+o*a*s,this.w=n*r*s-o*a*u,this},setFromEulerYXZ:function(e,t,i){var n=Math.cos(e/2),r=Math.cos(t/2),s=Math.cos(i/2),o=Math.sin(e/2),a=Math.sin(t/2),u=Math.sin(i/2);return this.x=o*r*s+n*a*u,this.y=n*a*s-o*r*u,this.z=n*r*u-o*a*s,this.w=n*r*s+o*a*u,this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(i),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e.x,n=e.y,r=e.z,s=e.w,o=t.x,a=t.y,u=t.z,c=t.w;return this.x=i*c+s*o+n*u-r*a,this.y=n*c+s*a+r*o-i*u,this.z=r*c+s*u+i*a-n*o,this.w=s*c-i*o-n*a-r*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return this.w=0===e?(this.x=0,this.y=0,this.z=0,1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this.x,n=this.y,r=this.z,s=this.w,o=s*e.w+i*e.x+n*e.y+r*e.z;if(o<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,o=-o):this.copy(e),1<=o)return this.w=s,this.x=i,this.y=n,this.z=r,this;var a=Math.acos(o),u=Math.sqrt(1-o*o);if(Math.abs(u)<.001)return this.w=.5*(s+this.w),this.x=.5*(i+this.x),this.y=.5*(n+this.y),this.z=.5*(r+this.z),this;var c=Math.sin((1-t)*a)/u,h=Math.sin(t*a)/u;return this.w=s*c+this.w*h,this.x=i*c+this.x*h,this.y=n*c+this.y*h,this.z=r*c+this.z*h,this},setFromUnitVectors:function(e,t){return void 0===n&&(n=new s.Vector3),(r=e.dot(t)+1)<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?n.set(-e.y,e.x,0):n.set(0,-e.z,e.y)):n.crossVectors(e,t),this.x=n.x,this.y=n.y,this.z=n.z,this.w=r,this.normalize(),this}},t.exports=s},{}],21:[function(e,t,i){var n=e("./base.js").VRDisplay,r=e("./math-util.js"),s=e("./util.js");function o(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.onKeyDown_=this.onKeyDown_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onMouseMove_=this.onMouseMove_.bind(this),this.onMouseUp_=this.onMouseUp_.bind(this),window.addEventListener("keydown",this.onKeyDown_),window.addEventListener("mousemove",this.onMouseMove_),window.addEventListener("mousedown",this.onMouseDown_),window.addEventListener("mouseup",this.onMouseUp_),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new r.Quaternion,this.rotateStart_=new r.Vector2,this.rotateEnd_=new r.Vector2,this.rotateDelta_=new r.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}(o.prototype=new n).getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},o.prototype.onKeyDown_=function(e){38==e.keyCode?this.animatePhi_(this.phi_+.15):39==e.keyCode?this.animateTheta_(this.theta_-.15):40==e.keyCode?this.animatePhi_(this.phi_-.15):37==e.keyCode&&this.animateTheta_(this.theta_+.15)},o.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e)},o.prototype.animatePhi_=function(e){e=s.clamp(e,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",e)},o.prototype.animateKeyTransitions_=function(n,r){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var s=this[n],o=new Date;this.angleAnimation_=requestAnimationFrame(function e(){var t=new Date-o;if(80<=t)return this[n]=r,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(e.bind(this));var i=t/80;this[n]=s+(r-s)*i}.bind(this))},o.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0},o.prototype.onMouseMove_=function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0,i=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-i)}else this.rotateEnd_.set(e.clientX,e.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*.5,this.phi_=s.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},o.prototype.onMouseUp_=function(e){this.isDragging_=!1},o.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},o.prototype.resetPose=function(){this.phi_=0,this.theta_=0},t.exports=o},{"./base.js":9,"./math-util.js":20,"./util.js":29}],22:[function(t,e,i){(function(e){void 0!==e&&e.window&&(e.document||(e.document=e.window.document),e.navigator||(e.navigator=e.window.navigator)),t("./main")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":19}],23:[function(e,t,i){var n=e("./util.js");function r(){this.loadIcon_();var e=document.createElement("div");(s=e.style).position="fixed",s.top=0,s.right=0,s.bottom=0,s.left=0,s.backgroundColor="gray",s.fontFamily="sans-serif",s.zIndex=1e6;var t=document.createElement("img");t.src=this.icon,(s=t.style).marginLeft="25%",s.marginTop="25%",s.width="50%",e.appendChild(t);var i=document.createElement("div");(s=i.style).textAlign="center",s.fontSize="16px",s.lineHeight="24px",s.margin="24px 25%",s.width="50%",i.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(i);var n=document.createElement("div");(s=n.style).backgroundColor="#CFD8DC",s.position="fixed",s.bottom=0,s.width="100%",s.height="48px",s.padding="14px 24px",s.boxSizing="border-box",s.color="#656A6B",e.appendChild(n);var r=document.createElement("div");r.style.float="left",r.innerHTML="No Cardboard viewer?";var s,o=document.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="_blank",(s=o.style).float="right",s.fontWeight=600,s.textTransform="uppercase",s.borderLeft="1px solid gray",s.paddingLeft="24px",s.textDecoration="none",s.color="#656A6B",n.appendChild(r),n.appendChild(o),this.overlay=e,this.text=i,this.hide()}r.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img").style;n.isLandscapeMode()?(t.width="20%",t.marginLeft="40%",t.marginTop="3%"):(t.width="50%",t.marginLeft="25%",t.marginTop="25%")},r.prototype.hide=function(){this.overlay.style.display="none"},r.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},r.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},r.prototype.update=function(){this.disableShowTemporarily(),!n.isLandscapeMode()&&n.isMobile()?this.show():this.hide()},r.prototype.loadIcon_=function(){this.icon=n.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},t.exports=r},{"./util.js":29}],24:[function(e,t,i){var n=e("./sensor-sample.js"),s=e("../math-util.js"),o=e("../util.js");function r(e){this.kFilter=e,this.currentAccelMeasurement=new n,this.currentGyroMeasurement=new n,this.previousGyroMeasurement=new n,o.isIOS()?this.filterQ=new s.Quaternion(-1,0,0,1):this.filterQ=new s.Quaternion(1,0,0,1),this.previousFilterQ=new s.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new s.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new s.Vector3,this.measuredGravity=new s.Vector3,this.gyroIntegralQ=new s.Quaternion}r.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},r.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var i=t-this.previousGyroMeasurement.timestampS;o.isTimestampDeltaValid(i)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},r.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var i=new s.Quaternion;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new s.Quaternion;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),o.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",s.radToDeg*o.getQuaternionAngle(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var r=new s.Quaternion;r.copy(this.filterQ),r.multiply(n),this.filterQ.slerp(r,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},r.prototype.getOrientation=function(){return this.filterQ},r.prototype.accelToQuaternion_=function(e){var t=new s.Vector3;t.copy(e),t.normalize();var i=new s.Quaternion;return i.setFromUnitVectors(new s.Vector3(0,0,-1),t),i.inverse(),i},r.prototype.gyroToQuaternionDelta_=function(e,t){var i=new s.Quaternion,n=new s.Vector3;return n.copy(e),n.normalize(),i.setFromAxisAngle(n,e.length()*t),i},t.exports=r},{"../math-util.js":20,"../util.js":29,"./sensor-sample.js":27}],25:[function(e,t,i){var n=e("./complementary-filter.js"),r=e("./pose-predictor.js"),s=e("../touch-panner.js"),o=e("../math-util.js"),a=e("../util.js");function u(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new o.Vector3,this.gyroscope=new o.Vector3,this.start(),this.filter=new n(window.WebVRConfig.K_FILTER),this.posePredictor=new r(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new s,this.filterToWorldQ=new o.Quaternion,a.isIOS()?this.filterToWorldQ.setFromAxisAngle(new o.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new o.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new o.Quaternion,this.worldToScreenQ=new o.Quaternion,this.originalPoseAdjustQ=new o.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new o.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),a.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new o.Quaternion,this.isAndroid=a.isAndroid(),this.isIOS=a.isIOS(),this.orientationOut_=new Float32Array(4)}u.prototype.getPosition=function(){return null},u.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new o.Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||t.multiply(this.touchPanner.getOrientation()),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},u.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),a.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},u.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},u.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,i=e.rotationRate,n=e.timeStamp/1e3,r=n-this.previousTimestampS;if(r<=a.MIN_TIMESTEP||r>a.MAX_TIMESTEP)return console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=n);this.accelerometer.set(-t.x,-t.y,-t.z),a.isR7()?this.gyroscope.set(-i.beta,i.alpha,i.gamma):this.gyroscope.set(i.alpha,i.beta,i.gamma),(this.isIOS||this.isAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n),this.previousTimestampS=n},u.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},u.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&("devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent))},u.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new o.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new o.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},u.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),a.isIOS()&&a.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},u.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},t.exports=u},{"../math-util.js":20,"../touch-panner.js":28,"../util.js":29,"./complementary-filter.js":24,"./pose-predictor.js":26}],26:[function(e,t,i){var o=e("../math-util"),a=e("../util");function n(e){this.predictionTimeS=e,this.previousQ=new o.Quaternion,this.previousTimestampS=null,this.deltaQ=new o.Quaternion,this.outQ=new o.Quaternion}n.prototype.getPrediction=function(e,t,i){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=i,e;var n=new o.Vector3;n.copy(t),n.normalize();var r=t.length();if(r<20*o.degToRad)return a.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(o.radToDeg*r).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;this.previousTimestampS;var s=r*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(n,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=i,this.outQ},t.exports=n},{"../math-util":20,"../util":29}],27:[function(e,t,i){function n(e,t){this.set(e,t)}n.prototype.set=function(e,t){this.sample=e,this.timestampS=t},n.prototype.copy=function(e){this.set(e.sample,e.timestampS)},t.exports=n},{}],28:[function(e,t,i){var n=e("./math-util.js"),r=e("./util.js");function s(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new n.Vector2,this.rotateEnd=new n.Vector2,this.rotateDelta=new n.Vector2,this.theta=0,this.orientation=new n.Quaternion}s.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},s.prototype.resetSensor=function(){this.theta=0},s.prototype.onTouchStart_=function(e){e.touches&&1==e.touches.length&&(this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),this.isTouching=!0)},s.prototype.onTouchMove_=function(e){if(this.isTouching){this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),r.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*.5}},s.prototype.onTouchEnd_=function(e){this.isTouching=!1},t.exports=s},{"./math-util.js":20,"./util.js":29}],29:[function(e,t,i){var n,r,s,o,a,u,c=window.Util||{};c.MIN_TIMESTEP=.001,c.MAX_TIMESTEP=1,c.base64=function(e,t){return"data:"+e+";base64,"+t},c.clamp=function(e,t,i){return Math.min(Math.max(t,e),i)},c.lerp=function(e,t,i){return e+(t-e)*i},c.race=function(n){return Promise.race?Promise.race(n):new Promise(function(e,t){for(var i=0;i<n.length;i++)n[i].then(e,t)})},c.isIOS=(n=/iPad|iPhone|iPod/.test(navigator.platform),function(){return n}),c.isWebViewAndroid=(r=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome"),function(){return r}),c.isSafari=(s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),function(){return s}),c.isFirefoxAndroid=(o=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android"),function(){return o}),c.isAndroid=(a=-1!==navigator.userAgent.indexOf("Android"),function(){return a}),c.isR7=(u=-1!==navigator.userAgent.indexOf("R7 Build"),function(){return u}),c.isLandscapeMode=function(){var e=90==window.orientation||-90==window.orientation;return c.isR7()?!e:e},c.isTimestampDeltaValid=function(e){return!isNaN(e)&&(!(e<=c.MIN_TIMESTEP)&&!(e>c.MAX_TIMESTEP))},c.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},c.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},c.requestFullscreen=function(e){if(c.isWebViewAndroid())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},c.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},c.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},c.linkProgram=function(e,t,i,n){var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t),e.compileShader(r);var s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,i),e.compileShader(s);var o=e.createProgram();for(var a in e.attachShader(o,r),e.attachShader(o,s),n)e.bindAttribLocation(o,n[a],a);return e.linkProgram(o),e.deleteShader(r),e.deleteShader(s),o},c.getProgramUniforms=function(e,t){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r="",s=0;s<n;s++){i[r=e.getActiveUniform(t,s).name.replace("[0]","")]=e.getUniformLocation(t,r)}return i},c.orthoMatrix=function(e,t,i,n,r,s,o){var a=1/(t-i),u=1/(n-r),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*a,e[13]=(r+n)*u,e[14]=(o+s)*c,e[15]=1,e},c.copyArray=function(e,t){for(var i=0,n=e.length;i<n;i++)t[i]=e[i]},c.isMobile=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},c.extend=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},c.safariCssSizeWorkaround=function(e){if(c.isIOS()){var t=e.style.width,i=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(i)+"px",setTimeout(function(){e.style.width=t,e.style.height=i},100)}window.Util=c,window.canvas=e},c.isDebug=function(){return c.getQueryParameter("debug")},c.getQueryParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},c.frameDataFromPose=function(){var Se=Math.PI/180,Ce=.25*Math.PI;var Oe=new Float32Array([0,0,0,1]),ze=new Float32Array([0,0,0]);function n(e,t,i,n,r){var s,o,a,u,c,h,l,d,f,M;s=e,o=n?n.fieldOfView:null,a=r.depthNear,u=r.depthFar,c=Math.tan(o?o.upDegrees*Se:Ce),h=Math.tan(o?o.downDegrees*Se:Ce),l=Math.tan(o?o.leftDegrees*Se:Ce),d=Math.tan(o?o.rightDegrees*Se:Ce),f=2/(l+d),M=2/(c+h),s[0]=f,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=M,s[6]=0,s[7]=0,s[8]=-(l-d)*f*.5,s[9]=(c-h)*M*.5,s[10]=u/(a-u),s[11]=-1,s[12]=0,s[13]=0,s[14]=u*a/(a-u),s[15]=0;var p,g,y,m,N,w,D,T,E,v,I,L,j,A,b,x,S,C,O,z,k,U,_,Q,R,P,B,Y,F,G,V,H,W,X,Z,K,q,J,$,ee,te,ie,ne,re,se,oe,ae,ue,ce,he,le,de,fe,Me,pe,ge,ye,me,Ne,we,De,Te,Ee,ve,Ie,Le,je,Ae,be=i.orientation||Oe,xe=i.position||ze;p=t,y=xe,m=(g=be)[0],N=g[1],w=g[2],D=g[3],I=m*(T=m+m),L=m*(E=N+N),j=m*(v=w+w),A=N*E,b=N*v,x=w*v,S=D*T,C=D*E,O=D*v,p[0]=1-(A+x),p[1]=L+O,p[2]=j-C,p[3]=0,p[4]=L-O,p[5]=1-(I+x),p[6]=b+S,p[7]=0,p[8]=j+C,p[9]=b-S,p[10]=1-(I+A),p[11]=0,p[12]=y[0],p[13]=y[1],p[14]=y[2],p[15]=1,n&&(k=z=t,U=n.offset,Z=U[0],K=U[1],q=U[2],z[15]=k===z?(z[12]=k[0]*Z+k[4]*K+k[8]*q+k[12],z[13]=k[1]*Z+k[5]*K+k[9]*q+k[13],z[14]=k[2]*Z+k[6]*K+k[10]*q+k[14],k[3]*Z+k[7]*K+k[11]*q+k[15]):(_=k[0],Q=k[1],R=k[2],P=k[3],B=k[4],Y=k[5],F=k[6],G=k[7],V=k[8],H=k[9],W=k[10],X=k[11],z[0]=_,z[1]=Q,z[2]=R,z[3]=P,z[4]=B,z[5]=Y,z[6]=F,z[7]=G,z[8]=V,z[9]=H,z[10]=W,z[11]=X,z[12]=_*Z+B*K+V*q+k[12],z[13]=Q*Z+Y*K+H*q+k[13],z[14]=R*Z+F*K+W*q+k[14],P*Z+G*K+X*q+k[15])),ee=($=J=t)[0],te=$[1],ie=$[2],ne=$[3],re=$[4],se=$[5],oe=$[6],ae=$[7],ue=$[8],ce=$[9],he=$[10],le=$[11],de=$[12],fe=$[13],Me=$[14],pe=$[15],(Ae=(ge=ee*se-te*re)*(je=he*pe-le*Me)-(ye=ee*oe-ie*re)*(Le=ce*pe-le*fe)+(me=ee*ae-ne*re)*(Ie=ce*Me-he*fe)+(Ne=te*oe-ie*se)*(ve=ue*pe-le*de)-(we=te*ae-ne*se)*(Ee=ue*Me-he*de)+(De=ie*ae-ne*oe)*(Te=ue*fe-ce*de))&&(Ae=1/Ae,J[0]=(se*je-oe*Le+ae*Ie)*Ae,J[1]=(ie*Le-te*je-ne*Ie)*Ae,J[2]=(fe*De-Me*we+pe*Ne)*Ae,J[3]=(he*we-ce*De-le*Ne)*Ae,J[4]=(oe*ve-re*je-ae*Ee)*Ae,J[5]=(ee*je-ie*ve+ne*Ee)*Ae,J[6]=(Me*me-de*De-pe*ye)*Ae,J[7]=(ue*De-he*me+le*ye)*Ae,J[8]=(re*Le-se*ve+ae*Te)*Ae,J[9]=(te*ve-ee*Le-ne*Te)*Ae,J[10]=(de*we-fe*me+pe*ge)*Ae,J[11]=(ce*me-ue*we-le*ge)*Ae,J[12]=(se*Ee-re*Ie-oe*Te)*Ae,J[13]=(ee*Ie-te*Ee+ie*Te)*Ae,J[14]=(fe*ye-de*Ne-Me*ge)*Ae,J[15]=(ue*Ne-ce*ye+he*ge)*Ae)}return function(e,t,i){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,n(e.leftProjectionMatrix,e.leftViewMatrix,t,i.getEyeParameters("left"),i),n(e.rightProjectionMatrix,e.rightViewMatrix,t,i.getEyeParameters("right"),i),!0)}}(),c.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=c.getDomainFromUrl(document.referrer),i=c.getDomainFromUrl(window.location.href);return e&&t!==i},c.getDomainFromUrl=function(e){return(-1<e.indexOf("://")?e.split("/")[2]:e.split("/")[0]).split(":")[0]},t.exports=c},{}],30:[function(e,t,i){var n=e("./device-info.js"),r=(e("./util.js"),"WEBVR_CARDBOARD_VIEWER");function s(){try{this.selectedKey=localStorage.getItem(r)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey="CardboardV1"),this.dialog=this.createDialog_(n.Viewers),this.root=null,this.onChangeCallbacks_=[]}s.prototype.show=function(e){(this.root=e).appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},s.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},s.prototype.getCurrentViewer=function(){return n.Viewers[this.selectedKey]},s.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},s.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},s.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},s.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&n.Viewers[this.selectedKey]){this.fireOnChange_(n.Viewers[this.selectedKey]);try{localStorage.setItem(r,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},s.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var i=document.createElement("div");(r=i.style).position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",i.addEventListener("click",this.hide.bind(this));var n=document.createElement("div"),r=n.style;for(var s in r.boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft="-140px",r.width="280px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",n.appendChild(this.createH1_("Select your viewer")),e)n.appendChild(this.createChoice_(s,e[s].label));return n.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(i),t.appendChild(n),t},s.prototype.createH1_=function(e){var t=document.createElement("h1"),i=t.style;return i.color="black",i.fontSize="20px",i.fontWeight="bold",i.marginTop=0,i.marginBottom="24px",t.innerHTML=e,t},s.prototype.createChoice_=function(e,t){var i=document.createElement("div");i.style.marginTop="8px",i.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",e),n.setAttribute("type","radio"),n.setAttribute("value",e),n.setAttribute("name","field");var r=document.createElement("label");return r.style.marginLeft="4px",r.setAttribute("for",e),r.innerHTML=t,i.appendChild(n),i.appendChild(r),i},s.prototype.createButton_=function(e,t){var i=document.createElement("button");i.innerHTML=e;var n=i.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",i.addEventListener("click",t),i},t.exports=s},{"./device-info.js":14,"./util.js":29}],31:[function(e,t,i){var n,r=e("./util.js");function s(){var e=document.createElement("video");function t(e,t,i){var n=document.createElement("source");n.src=i,n.type="video/"+t,e.appendChild(n)}e.setAttribute("loop",""),t(e,"webm",r.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),t(e,"mp4",r.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){e.paused&&e.play()},this.release=function(){e.pause()}}function o(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){e&&(clearInterval(e),e=null)}}t.exports=(n=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||n.match(/iPod/i)?o:s},{"./util.js":29}],32:[function(e,t,i){var r=e("./util.js"),n=e("./cardboard-vr-display.js"),s=e("./mouse-keyboard-vr-display.js"),o=e("./base.js").VRDisplay,a=e("./base.js").VRFrameData,u=e("./base.js").HMDVRDevice,c=e("./base.js").PositionSensorVRDevice,h=e("./display-wrappers.js").VRDisplayHMDDevice,l=e("./display-wrappers.js").VRDisplayPositionSensorDevice,d=e("../package.json").version;function f(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||this.nativeWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),M()}function M(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=a,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(e){return r.frameDataFromPose(e,this.getPose(),this)})}f.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},f.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},f.prototype.connectDisplay=function(e){e.fireVRDisplayConnect_(),this.displays.push(e)},f.prototype.populateDevices=function(){if(!this.devicesPopulated){var e=null;this.isCardboardCompatible()&&(e=new n,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new h(e)),this.devices.push(new l(e)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(e=new s,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new h(e)),this.devices.push(new l(e)))),this.devicesPopulated=!0}},f.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var t=window.VRFrameData,i=new window.VRFrameData,n=window.VRDisplay.prototype.getFrameData;window.VRFrameData=a,window.VRDisplay.prototype.getFrameData=function(e){e instanceof t?n.call(this,e):(n.call(this,i),e.pose=i.pose,r.copyArray(i.leftProjectionMatrix,e.leftProjectionMatrix),r.copyArray(i.rightProjectionMatrix,e.rightProjectionMatrix),r.copyArray(i.leftViewMatrix,e.leftViewMatrix),r.copyArray(i.rightViewMatrix,e.rightViewMatrix))}}if(window.VRDisplay=o,navigator&&void 0===navigator.vrEnabled){var e=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return e.isCardboardCompatible()&&(e.isFullScreenAvailable()||r.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=a)},f.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=u,window.PositionSensorVRDevice=c},f.prototype.getVRDisplays=function(){this.populateDevices();var t,i=this.displays;if(!this.nativeWebVRAvailable)return Promise.resolve(i);var e=this.nativeGetVRDisplaysFunc.call(navigator),n=new Promise(function(e){t=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),e([])},window.WebVRConfig.GET_VR_DISPLAYS_TIMEOUT)});return r.race([e,n]).then(function(e){return clearTimeout(t),window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?e.concat(i):0<e.length?e:i})},f.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var n=this;return new Promise(function(i,t){try{if(!n.devicesPopulated){if(n.nativeWebVRAvailable)return navigator.getVRDisplays(function(e){for(var t=0;t<e.length;++t)n.devices.push(new h(e[t])),n.devices.push(new l(e[t]));n.devicesPopulated=!0,i(n.devices)},t);if(n.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(e){for(var t=0;t<e.length;++t)e[t]instanceof u&&n.devices.push(e[t]),e[t]instanceof c&&n.devices.push(e[t]);n.devicesPopulated=!0,i(n.devices)},t)}n.populateDevices(),i(n.devices)}catch(e){t(e)}})},f.prototype.NativeVRFrameData=window.VRFrameData,f.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},f.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},f.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},f.InstallWebVRSpecShim=M,f.version=d,t.exports.WebVRPolyfill=f},{"../package.json":8,"./base.js":9,"./cardboard-vr-display.js":12,"./display-wrappers.js":15,"./mouse-keyboard-vr-display.js":21,"./util.js":29}],33:[function(e,t,i){var n=e("eventemitter3"),r=e("shaka-player"),s=e("../video-type"),o=e("../util");function a(e){this.video=document.createElement("video"),!0===e.loop&&this.video.setAttribute("loop",!0),void 0!==e.volume&&(this.video.volume=e.volume),!0===e.muted&&(this.video.muted=e.muted),this.video.setAttribute("preload","auto"),this.video.setAttribute("playsinline",!0),this.video.setAttribute("crossorigin","anonymous")}(a.prototype=new n).load=function(e){var t=this;switch(o.getExtension(e)){case"m3u8":this.type=s.HLS,o.isSafari()?this.loadVideo_(e).then(function(){t.emit("load",t.video,t.type)}).catch(this.onError_.bind(this)):t.onError_("HLS is only supported on Safari.");break;case"mpd":this.type=s.DASH,this.loadShakaVideo_(e).then(function(){console.log("The video has now been loaded!"),t.emit("load",t.video,t.type)}).catch(this.onError_.bind(this));break;default:this.type=s.VIDEO,this.loadVideo_(e).then(function(){t.emit("load",t.video,t.type)}).catch(this.onError_.bind(this))}},a.prototype.destroy=function(){this.video.pause(),this.video.src="",this.video=null},a.prototype.onError_=function(e){console.error(e),this.emit("error",e)},a.prototype.loadVideo_=function(i){var n=this,r=n.video;return new Promise(function(e,t){r.src=i,r.addEventListener("canplaythrough",e),r.addEventListener("loadedmetadata",function(){n.emit("timeupdate",{currentTime:r.currentTime,duration:r.duration})}),r.addEventListener("error",t),r.load()})},a.prototype.initShaka_=function(){this.player=new r.Player(this.video),this.player.configure({abr:{defaultBandwidthEstimate:1e6}}),this.player.addEventListener("error",this.onError_)},a.prototype.loadShakaVideo_=function(e){if(r.polyfill.installAll(),r.Player.isBrowserSupported())return this.initShaka_(),this.player.load(e);console.error("Shaka is not supported on this browser.")},t.exports=a},{"../util":45,"../video-type":46,eventemitter3:3,"shaka-player":5}],34:[function(e,t,i){t.exports={LEFT:1,RIGHT:2}},{}],35:[function(e,t,i){var n=e("eventemitter3"),r=e("@tweenjs/tween.js"),s=e("../util"),c=new THREE.Vector3(1,1,1),o=new THREE.Vector3(1.2,1.2,1.2),a=new THREE.Color(1,1,1),u=new THREE.Color(.8,0,0);function h(e){this.worldRenderer=e,this.scene=e.scene;var t=document.body;s.isMobile()||(t.addEventListener("mousedown",this.onMouseDown_.bind(this),!1),t.addEventListener("mousemove",this.onMouseMove_.bind(this),!1),t.addEventListener("mouseup",this.onMouseUp_.bind(this),!1)),t.addEventListener("touchstart",this.onTouchStart_.bind(this),!1),t.addEventListener("touchend",this.onTouchEnd_.bind(this),!1),this.hotspotRoot=new THREE.Object3D,this.hotspotRoot.rotation.y=Math.PI/2,this.scene.add(this.hotspotRoot),this.hotspots={},this.selectedHotspots={},this.downHotspots={},this.pointer=new THREE.Vector2(1,1),this.raycaster=new THREE.Raycaster}(h.prototype=new n).add=function(e,t,i,n,r){if(this.hotspots[r])console.error("Attempt to add hotspot with existing id %s.",r);else{var s=this.createHotspot_(i,n);s.name=r;var o=new THREE.Quaternion;o.setFromEuler(new THREE.Euler(THREE.Math.degToRad(e),THREE.Math.degToRad(t),0,"ZYX")),s.position.applyQuaternion(o),s.lookAt(new THREE.Vector3),this.hotspotRoot.add(s),this.hotspots[r]=s}},h.prototype.remove=function(e){this.hotspots[e]?(this.hotspotRoot.remove(this.hotspots[e]),delete this.selectedHotspots[e],delete this.downHotspots[e],delete this.hotspots[e],this.emit("blur",e)):console.error("Attempt to remove non-existing hotspot with id %s.",e)},h.prototype.clearAll=function(){for(var e in this.hotspots)this.remove(e)},h.prototype.getCount=function(){var e=0;for(var t in this.hotspots)e+=1;return e},h.prototype.update=function(e){this.worldRenderer.isVRMode()&&this.pointer.set(0,0),this.raycaster.setFromCamera(this.pointer,e),this.fadeOffCenterHotspots_(e);for(var t=this.hotspotRoot.children,i=0;i<t.length;i++){var n=t[i],r=n.name,s=0<this.raycaster.intersectObjects(n.children).length;s&&!this.selectedHotspots[r]&&(this.emit("focus",r),this.focus_(r)),!s&&this.selectedHotspots[r]&&(this.emit("blur",r),this.blur_(r)),s?this.selectedHotspots[r]=!0:delete this.selectedHotspots[r]}},h.prototype.setVisibility=function(e){this.hotspotRoot.visible=e},h.prototype.onTouchStart_=function(e){for(var t in this.worldRenderer.isVRMode()||this.updateTouch_(e),this.update(this.worldRenderer.camera),this.downHotspots={},this.selectedHotspots)this.downHotspots[t]=!0,this.down_(t);return!1},h.prototype.onTouchEnd_=function(e){if(s.isEmptyObject(this.downHotspots))this.emit("click");else for(var t in this.downHotspots)this.emit("click",t),this.up_(t),e.preventDefault()},h.prototype.updateTouch_=function(e){var t=this.getSize_(),i=e.touches[0];this.pointer.x=i.clientX/t.width*2-1,this.pointer.y=-i.clientY/t.height*2+1},h.prototype.onMouseDown_=function(e){for(var t in this.updateMouse_(e),this.downHotspots={},this.selectedHotspots)this.downHotspots[t]=!0,this.down_(t)},h.prototype.onMouseMove_=function(e){this.updateMouse_(e)},h.prototype.onMouseUp_=function(e){if(this.updateMouse_(e),s.isEmptyObject(this.downHotspots))this.emit("click");else for(var t in this.selectedHotspots)t in this.downHotspots&&(this.emit("click",t),this.up_(t))},h.prototype.updateMouse_=function(e){var t=this.getSize_();this.pointer.x=e.clientX/t.width*2-1,this.pointer.y=-e.clientY/t.height*2+1},h.prototype.getSize_=function(){this.worldRenderer.renderer.domElement;return this.worldRenderer.renderer.getSize()},h.prototype.createHotspot_=function(e,t){var i=new THREE.CircleGeometry(e,32),n=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,transparent:!0,opacity:.8,depthTest:!1}),r=new THREE.Mesh(i,n);r.name="inner";var s=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,transparent:!0,opacity:.5,depthTest:!1}),o=new THREE.RingGeometry(.85*e,e,32),a=new THREE.Mesh(o,s);a.name="outer";var u=new THREE.Object3D;return u.position.z=-t,u.scale.copy(c),u.add(r),u.add(a),u},h.prototype.fadeOffCenterHotspots_=function(e){var t=new THREE.Vector3(1,0,0);for(var i in t.applyQuaternion(e.quaternion),t.applyQuaternion(e.parent.quaternion),this.hotspots){var n,r=this.hotspots[i].position.angleTo(t),s=THREE.Math.radToDeg(r);if(s<35)n=1;else if(60<s)n=0;else{n=(60-s)/25}this.setOpacity_(i,n)}},h.prototype.focus_=function(e){var t=this.hotspots[e];this.tween=new r.Tween(t.scale).to(o,200).easing(r.Easing.Quadratic.InOut).start(),this.worldRenderer.isVRMode()&&(this.timeForHospotClick=setTimeout(function(){this.emit("click",e)},1200))},h.prototype.blur_=function(e){var t=this.hotspots[e];this.tween=new r.Tween(t.scale).to(c,200).easing(r.Easing.Quadratic.InOut).start(),this.timeForHospotClick&&clearTimeout(this.timeForHospotClick)},h.prototype.down_=function(e){var t=this.hotspots[e].getObjectByName("inner");this.tween=new r.Tween(t.material.color).to(u,100).start()},h.prototype.up_=function(e){var t=this.hotspots[e].getObjectByName("inner");this.tween=new r.Tween(t.material.color).to(a,100).start()},h.prototype.setOpacity_=function(e,t){var i=this.hotspots[e],n=i.getObjectByName("outer"),r=i.getObjectByName("inner");n.material.opacity=.5*t,r.material.opacity=.8*t},t.exports=h},{"../util":45,"@tweenjs/tween.js":1,eventemitter3:3}],36:[function(e,t,i){var n=e("eventemitter3"),r=e("../message"),s=e("../util");function o(){window.addEventListener("message",this.onMessage_.bind(this),!1)}(o.prototype=new n).onMessage_=function(e){s.isDebug()&&console.log("onMessage_",e);var t=e.data,i=t.type.toLowerCase(),n=t.data;switch(i){case r.SET_CONTENT:case r.SET_VOLUME:case r.MUTED:case r.ADD_HOTSPOT:case r.PLAY:case r.PAUSE:case r.SET_CURRENT_TIME:case r.GET_POSITION:case r.SET_FULLSCREEN:this.emit(i,n);break;default:s.isDebug()&&console.warn("Got unknown message of type %s from %s",t.type,t.origin)}},t.exports=o},{"../message":44,"../util":45,eventemitter3:3}],37:[function(e,t,i){function n(){this.el=this.build_(),document.body.appendChild(this.el),this.show()}n.prototype.build_=function(){var e=document.createElement("div");(t=e.style).position="fixed",t.top=0,t.left=0,t.width="100%",t.height="100%",t.background="#eee";var t,i=document.createElement("img");return i.src="images/loading.gif",(t=i.style).position="absolute",t.top="50%",t.left="50%",t.transform="translate(-50%, -50%)",e.appendChild(i),e},n.prototype.hide=function(){this.el.style.display="none"},n.prototype.show=function(){this.el.style.display="block"},t.exports=n},{}],38:[function(e,t,i){var n=new(e("./loading-indicator"));e("es6-promise").polyfill();var r=e("./iframe-message-receiver"),s=e("../message"),o=e("./scene-info"),a=e("../../node_modules/stats-js/build/stats.min"),u=e("../util"),c=(e("webvr-polyfill"),e("./world-renderer")),h=new r;h.on(s.PLAY,function(){if(!f.videoProxy)return void y("Attempt to pause, but no video found.");f.videoProxy.play()}),h.on(s.PAUSE,function(){if(!f.videoProxy)return void y("Attempt to pause, but no video found.");f.videoProxy.pause()}),h.on(s.ADD_HOTSPOT,function(e){u.isDebug()&&console.log("onAddHotspot",e);var t=parseFloat(e.pitch),i=parseFloat(e.yaw),n=parseFloat(e.radius),r=parseFloat(e.distance),s=e.id;f.hotspotRenderer.add(t,i,n,r,s)}),h.on(s.SET_CONTENT,function(i){u.isDebug()&&console.log("onSetContent",i);f.hotspotRenderer.clearAll(),f.sphereRenderer.setOpacity(0,500).then(function(){var e=o.loadFromAPIParams(i.contentInfo);f.destroy();var t=e.getCurrentUrl();return window.history.pushState(null,"VR View",t),f.setScene(e)}).then(function(){f.sphereRenderer.setOpacity(1,500)})}),h.on(s.SET_VOLUME,function(e){if(!f.videoProxy)return void y("Attempt to set volume, but no video found.");f.videoProxy.setVolume(e.volumeLevel),e.volumeLevel,u.sendParentMessage({type:"volumechange",data:e.volumeLevel})}),h.on(s.MUTED,function(e){if(!f.videoProxy)return void y("Attempt to mute, but no video found.");f.videoProxy.mute(e.muteState),u.sendParentMessage({type:"muted",data:e.muteState})}),h.on(s.SET_CURRENT_TIME,function(e){if(!f.videoProxy)return void y("Attempt to pause, but no video found.");f.videoProxy.setCurrentTime(e),g()}),h.on(s.GET_POSITION,function(){u.sendParentMessage({type:"getposition",data:{Yaw:180*f.camera.rotation.y/Math.PI,Pitch:180*f.camera.rotation.x/Math.PI}})}),h.on(s.SET_FULLSCREEN,function(){if(!f.videoProxy)return void y("Attempt to set fullscreen, but no video found.");f.manager.onFSClick_()}),window.addEventListener("load",function(){if(!u.isWebGLEnabled())return void D("WebGL not supported.");f.setScene(d),d.isDebug&&(l.setMode(0),l.domElement.style.position="absolute",l.domElement.style.left="0px",l.domElement.style.bottom="0px",document.body.appendChild(l.domElement));d.isYawOnly&&(WebVRConfig=window.WebVRConfig||{},WebVRConfig.YAW_ONLY=!0);requestAnimationFrame(T)});var l=new a,d=o.loadFromGetParams(),f=new c(d);f.on("error",function(e){D("Render: "+e)}),f.on("load",function(e){if(e.videoElement){o.loadFromGetParams();u.isMobile()?(document.querySelector("#play-overlay").classList.add("visible"),document.body.addEventListener("touchend",p)):e.videoElement.play(),e.videoElement.addEventListener("pause",N),e.videoElement.addEventListener("play",m),e.videoElement.addEventListener("timeupdate",g),e.videoElement.addEventListener("ended",w)}n.hide(),u.isMobile()||f.sceneInfo.video||f.sceneInfo.isAutopanOff||f.autopan();M||(e.videoElement?u.sendParentMessage({type:"ready",data:{duration:e.videoElement.duration}}):u.sendParentMessage({type:"ready"}),M=!0)}),f.on("modechange",function(e){u.sendParentMessage({type:"modechange",data:{mode:e}})}),f.on("ended",w),f.on("play",m),f.hotspotRenderer.on("click",function(e){u.sendParentMessage({type:"click",data:{id:e}})}),window.worldRenderer=f;var M=!1;function p(){f.videoProxy.play(),document.querySelector("#play-overlay").classList.remove("visible"),document.body.removeEventListener("touchend",p)}function g(){var e=f.videoProxy.getCurrentTime();u.sendParentMessage({type:"timeupdate",data:e})}function y(e){console.error(e),u.sendParentMessage({type:"error",data:{message:e}})}function m(){u.sendParentMessage({type:"paused",data:!1})}function N(){u.sendParentMessage({type:"paused",data:!0})}function w(){u.sendParentMessage({type:"ended",data:!0})}function D(e){n.hide(),e=encodeURI(e).replace(/%20/g," ");var t=document.querySelector("#error");t.classList.add("visible"),t.querySelector(".message").innerHTML=e,t.querySelector(".title").innerHTML="Error"}function T(e){f.vrDisplay?f.vrDisplay.requestAnimationFrame(T):requestAnimationFrame(T),l.begin(),f.videoProxy&&f.videoProxy.update(e),f.render(e),f.submitFrame(),l.end()}},{"../../node_modules/stats-js/build/stats.min":6,"../message":44,"../util":45,"./iframe-message-receiver":36,"./loading-indicator":37,"./scene-info":40,"./world-renderer":43,"es6-promise":2,"webvr-polyfill":22}],39:[function(e,t,i){function n(e){this.camera=e,this.reticle=this.createReticle_(),this.reticle.position.z=-.97,e.add(this.reticle),this.setVisibility(!1)}n.prototype.setVisibility=function(e){this.reticle.visible=e},n.prototype.createReticle_=function(){var e=new THREE.TorusGeometry(.02,.005,10,20),t=new THREE.MeshBasicMaterial({color:0});return new THREE.Mesh(e,t)},t.exports=n},{}],40:[function(e,t,i){var r=e("../util"),s={video:"video",image:"image",preview:"preview",loop:"loop",volume:"volume",muted:"muted",isStereo:"is_stereo",defaultYaw:"default_yaw",isYawOnly:"is_yaw_only",isDebug:"is_debug",isVROff:"is_vr_off",isAutopanOff:"is_autopan_off",hideFullscreenButton:"hide_fullscreen_button"};function o(e){var t=e||{};t.player={loop:e.loop,volume:e.volume,muted:e.muted},this.image=void 0!==t.image?encodeURI(t.image):void 0,this.preview=void 0!==t.preview?encodeURI(t.preview):void 0,this.video=void 0!==t.video?encodeURI(t.video):void 0,this.defaultYaw=THREE.Math.degToRad(t.defaultYaw||0),this.isStereo=r.parseBoolean(t.isStereo),this.isYawOnly=r.parseBoolean(t.isYawOnly),this.isDebug=r.parseBoolean(t.isDebug),this.isVROff=r.parseBoolean(t.isVROff),this.isAutopanOff=r.parseBoolean(t.isAutopanOff),this.loop=r.parseBoolean(t.player.loop),this.volume=parseFloat(t.player.volume?t.player.volume:"1"),this.muted=r.parseBoolean(t.player.muted),this.hideFullscreenButton=r.parseBoolean(t.hideFullscreenButton)}o.loadFromGetParams=function(){var e={};for(var t in s){var i=s[t];e[t]=r.getQueryParameter(i)||(window.WebVRConfig&&window.WebVRConfig.PLAYER?window.WebVRConfig.PLAYER[i]:"")}var n=new o(e);return n.isValid()||console.warn("Invalid scene: %s",n.errorMessage),n},o.loadFromAPIParams=function(e){var t={};for(var i in s){var n=s[i];e[n]&&(t[i]=e[n])}var r=new o(t);return r.isValid()||console.warn("Invalid scene: %s",r.errorMessage),r},o.prototype.isValid=function(){return this.image||this.video?this.image&&!this.isValidImage_(this.image)?(this.errorMessage="Invalid image URL: "+this.image,!1):!(this.errorMessage=null):!(this.errorMessage="Either image or video URL must be specified.")},o.prototype.getCurrentUrl=function(){var e=location.protocol+"//"+location.host+location.pathname+"?";for(var t in s){var i=s[t],n=this[t];void 0!==n&&(e+=i+"="+n+"&")}return e.substring(0,e.length-1)},o.prototype.isValidImage_=function(e){return!0},t.exports=o},{"../util":45}],41:[function(e,t,i){var n=e("./eyes"),a=e("@tweenjs/tween.js"),c=e("../util"),u=e("../video-type");function r(e){this.scene=e,this.createOpacityMask_()}r.prototype.setPhotosphere=function(r,s){return new Promise(function(e,t){this.resolve=e,this.reject=t;var i=s||{};this.isStereo=!!i.isStereo,this.src=r;var n=new THREE.TextureLoader;n.crossOrigin="anonymous",n.load(r,this.onTextureLoaded_.bind(this),void 0,this.onTextureError_.bind(this))}.bind(this))},r.prototype.set360Video=function(r,s,o){return new Promise(function(e,t){this.resolve=e,this.reject=t;var i=o||{};this.isStereo=!!i.isStereo;var n=new THREE.VideoTexture(r);n.minFilter=THREE.LinearFilter,n.magFilter=THREE.LinearFilter,n.generateMipmaps=!1,c.isSafari()&&s===u.HLS?(n.format=THREE.RGBAFormat,n.flipY=!1):n.format=THREE.RGBFormat,n.needsUpdate=!0,this.onTextureLoaded_(n)}.bind(this))},r.prototype.setOpacity=function(e,r){var s=this.scene,o=1-e;return new Promise(function(e,t){var i=s.getObjectByName("opacityMask"),n=new a.Tween({opacity:i.material.opacity}).to({opacity:o},r).easing(a.Easing.Quadratic.InOut);n.onUpdate(function(e){i.material.opacity=this.opacity}),n.onComplete(e).start()})},r.prototype.onTextureLoaded_=function(e){var t,i;i=this.isStereo?(t=this.createPhotosphere_(e,{offsetY:.5,scaleY:.5}),this.createPhotosphere_(e,{offsetY:0,scaleY:.5})):(t=this.createPhotosphere_(e),this.createPhotosphere_(e)),t.layers.set(n.LEFT),t.eye=n.LEFT,t.name="eyeLeft",i.layers.set(n.RIGHT),i.eye=n.RIGHT,i.name="eyeRight",this.scene.getObjectByName("photo").children=[t,i],this.resolve()},r.prototype.onTextureError_=function(e){this.reject('Unable to load texture from "'+this.src+'"')},r.prototype.createPhotosphere_=function(e,t){var i=t||{};i.scaleX=i.scaleX||1,i.scaleY=i.scaleY||1,i.offsetX=i.offsetX||0,i.offsetY=i.offsetY||0,i.phiStart=i.phiStart||0,i.phiLength=i.phiLength||2*Math.PI,i.thetaStart=i.thetaStart||0,i.thetaLength=i.thetaLength||Math.PI;var n=new THREE.SphereGeometry(1,48,48,i.phiStart,i.phiLength,i.thetaStart,i.thetaLength);n.applyMatrix((new THREE.Matrix4).makeScale(-1,1,1));for(var r,s=n.faceVertexUvs[0],o=0;o<s.length;o++)for(var a=0;a<3;a++)s[o][a].x*=i.scaleX,s[o][a].x+=i.offsetX,s[o][a].y*=i.scaleY,s[o][a].y+=i.offsetY;r=e.format===THREE.RGBAFormat&&!1===e.flipY?new THREE.ShaderMaterial({uniforms:{texture:{value:e}},vertexShader:["varying vec2 vUV;","void main() {","\tvUV = vec2( uv.x, 1.0 - uv.y );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D texture;","varying vec2 vUV;","void main() {"," gl_FragColor = texture2D( texture, vUV  )"+(c.isIOS()?".bgra":"")+";","}"].join("\n")}):new THREE.MeshBasicMaterial({map:e});var u=new THREE.Mesh(n,r);return u.renderOrder=-1,u},r.prototype.createOpacityMask_=function(){var e=new THREE.SphereGeometry(.49,48,48),t=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,opacity:0,transparent:!0}),i=new THREE.Mesh(e,t);return i.name="opacityMask",i.renderOrder=1,this.scene.add(i),i},t.exports=r},{"../util":45,"../video-type":46,"./eyes":34,"@tweenjs/tween.js":1}],42:[function(e,t,i){var n=e("../util");function r(e){this.videoElement=e,this.isFakePlayback=!1,this.startTime=null}r.prototype.play=function(){n.isIOS9OrLess()?(this.startTime=performance.now(),this.isFakePlayback=!0,this.audioElement=new Audio,this.audioElement.src=this.videoElement.src,this.audioElement.play()):this.videoElement.play().then(function(e){console.log("Playing video.",e)})},r.prototype.pause=function(){n.isIOS9OrLess()&&this.isFakePlayback?(this.isFakePlayback=!0,this.audioElement.pause()):this.videoElement.pause()},r.prototype.setVolume=function(e){this.videoElement&&(n.isIOS()?this.videoElement.muted=0===e:this.videoElement.volume=e),this.audioElement&&(this.audioElement.volume=e)},r.prototype.mute=function(e){this.videoElement&&(this.videoElement.muted=e),this.audioElement&&(this.audioElement.muted=e)},r.prototype.getCurrentTime=function(){return n.isIOS9OrLess()?this.audioElement.currentTime:this.videoElement.currentTime},r.prototype.setCurrentTime=function(e){this.videoElement&&(this.videoElement.currentTime=e.currentTime),this.audioElement&&(this.audioElement.currentTime=e.currentTime)},r.prototype.update=function(){if(this.isFakePlayback){var e=this.videoElement.duration,t=performance.now(),i=(t-this.startTime)/1e3;e<(this.videoElement.currentTime=i)&&(this.startTime=t,this.videoElement.currentTime=0,this.audioElement.currentTime=0)}},t.exports=r},{"../util":45}],43:[function(e,t,i){var r=e("./adaptive-player"),n=e("eventemitter3"),s=(e("./eyes"),e("./hotspot-renderer")),o=e("./reticle-renderer"),a=e("./sphere-renderer"),u=e("@tweenjs/tween.js"),c=e("../util"),h=e("./video-proxy"),l=e("webvr-boilerplate");function d(e){this.init_(e.hideFullscreenButton),this.sphereRenderer=new a(this.scene),this.hotspotRenderer=new s(this),this.hotspotRenderer.on("focus",this.onHotspotFocus_.bind(this)),this.hotspotRenderer.on("blur",this.onHotspotBlur_.bind(this)),this.reticleRenderer=new o(this.camera),navigator.getVRDisplays().then(function(e){0<e.length&&(this.vrDisplay=e[0])}.bind(this))}(d.prototype=new n).render=function(e){this.controls.update(),u.update(e),this.effect.render(this.scene,this.camera),this.hotspotRenderer.update(this.camera)},d.prototype.setScene=function(e){var i=this,t=new Promise(function(e,t){i.sceneResolve=e,i.sceneReject=t});if(e&&e.isValid()){var n={isStereo:e.isStereo,loop:e.loop,volume:e.volume,muted:e.muted};return this.setDefaultYaw_(e.defaultYaw||0),(e.isVROff||e.video&&c.isIOS9OrLess())&&this.manager.setVRCompatibleOverride(!1),c.isIOS()&&(this.manager.setFullscreenCallback(function(){c.sendParentMessage({type:"enter-fullscreen"})}),this.manager.setExitFullscreenCallback(function(){c.sendParentMessage({type:"exit-fullscreen"})}),this.manager.setVRCallback(function(){c.sendParentMessage({type:"enter-vr"})})),e.image&&!e.video?e.preview?this.sphereRenderer.setPhotosphere(e.preview,n).then(function(){i.didLoad_(),i.sphereRenderer.setPhotosphere(e.image,n)}).catch(i.didLoadFail_.bind(i)):this.sphereRenderer.setPhotosphere(e.image,n).then(function(){i.didLoad_()}).catch(i.didLoadFail_.bind(i)):e.video&&(c.isIE11()?e.image?this.sphereRenderer.setPhotosphere(e.image,n).then(function(){i.didLoad_()}).catch(i.didLoadFail_.bind(i)):this.didLoadFail_("Video is not supported on IE11."):(this.player=new r(n),this.player.on("load",function(e,t){i.sphereRenderer.set360Video(e,t,n).then(function(){i.didLoad_({videoElement:e})}).catch(i.didLoadFail_.bind(i))}),this.player.on("error",function(e){i.didLoadFail_("Video load error: "+e)}),this.player.load(e.video),this.videoProxy=new h(this.player.video))),this.sceneInfo=e,c.isDebug()&&console.log("Loaded scene",e),t}this.didLoadFail_(e.errorMessage)},d.prototype.isVRMode=function(){return!!this.vrDisplay&&this.vrDisplay.isPresenting},d.prototype.submitFrame=function(){this.isVRMode()&&this.vrDisplay.submitFrame()},d.prototype.disposeEye_=function(e){e&&(e.material.map&&e.material.map.dispose(),e.material.dispose(),e.geometry.dispose())},d.prototype.dispose=function(){var e=this.scene.getObjectByName("eyeLeft");this.disposeEye_(e);var t=this.scene.getObjectByName("eyeRight");this.disposeEye_(t)},d.prototype.destroy=function(){this.player&&(this.player.removeAllListeners(),this.player.destroy(),this.player=null);var e=this.scene.getObjectByName("photo"),t=this.scene.getObjectByName("eyeLeft"),i=this.scene.getObjectByName("eyeRight");t&&(this.disposeEye_(t),e.remove(t),this.scene.remove(t)),i&&(this.disposeEye_(i),e.remove(i),this.scene.remove(i))},d.prototype.didLoad_=function(e){var t=e||{};this.emit("load",t),this.sceneResolve&&this.sceneResolve()},d.prototype.didLoadFail_=function(e){this.emit("error",e),this.sceneReject&&this.sceneReject(e)},d.prototype.setDefaultYaw_=function(e){var t=this.controls.getVRDisplay(),i=!1;t&&(i=t.theta_||0,t.poseSensor_&&t.poseSensor_.resetPose()),this.camera.parent.rotation.y=Math.PI/2+e-i},d.prototype.autopan=function(e){var t=this.camera.parent.rotation.y-.4;new u.Tween(this.camera.parent.rotation).to({y:t},3e3).easing(u.Easing.Quadratic.Out).start()},d.prototype.init_=function(e){var t=document.querySelector("body"),i=window.innerWidth/window.innerHeight,n=new THREE.PerspectiveCamera(75,i,.1,100);n.layers.enable(1),(new THREE.Object3D).add(n);var r=new THREE.WebGLRenderer({antialias:!1});r.setClearColor(0,0),r.setSize(window.innerWidth,window.innerHeight),r.setPixelRatio(window.devicePixelRatio),t.appendChild(r.domElement);var s=new THREE.VRControls(n),o=new THREE.VREffect(r);o.scale=0,o.setSize(window.innerWidth,window.innerHeight),o.autoSubmitFrame=!1,this.camera=n,this.renderer=r,this.effect=o,this.controls=s,this.manager=new l(r,o,{predistorted:!1,hideButton:e}),this.scene=this.createScene_(),this.scene.add(this.camera.parent),window.addEventListener("resize",this.onResize_.bind(this)),window.addEventListener("contextmenu",this.onContextMenu_.bind(this)),window.addEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange_.bind(this))},d.prototype.onResize_=function(){this.effect.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()},d.prototype.onVRDisplayPresentChange_=function(e){c.isDebug()&&console.log("onVRDisplayPresentChange_");var t=this.isVRMode(),i=t&&0<this.hotspotRenderer.getCount();this.reticleRenderer.setVisibility(i),this.onResize_(),window.analytics&&analytics.logModeChanged(t),!t&&c.isIOS()&&c.sendParentMessage({type:"exit-fullscreen"}),this.emit("modechange",t)},d.prototype.createScene_=function(e){var t=new THREE.Scene,i=new THREE.Object3D;return i.name="photo",t.add(i),t},d.prototype.onHotspotFocus_=function(e){this.setCursor_("pointer")},d.prototype.onHotspotBlur_=function(e){this.setCursor_("")},d.prototype.setCursor_=function(e){this.renderer.domElement.style.cursor=e},d.prototype.onContextMenu_=function(e){return e.preventDefault(),e.stopPropagation(),!1},t.exports=d},{"../util":45,"./adaptive-player":33,"./eyes":34,"./hotspot-renderer":35,"./reticle-renderer":39,"./sphere-renderer":41,"./video-proxy":42,"@tweenjs/tween.js":1,eventemitter3:3,"webvr-boilerplate":7}],44:[function(e,t,i){t.exports={PLAY:"play",PAUSE:"pause",TIMEUPDATE:"timeupdate",ADD_HOTSPOT:"addhotspot",SET_CONTENT:"setimage",SET_VOLUME:"setvolume",MUTED:"muted",SET_CURRENT_TIME:"setcurrenttime",DEVICE_MOTION:"devicemotion",GET_POSITION:"getposition",SET_FULLSCREEN:"setfullscreen"}},{}],45:[function(e,t,i){var n=window.Util||{};n.isDataURI=function(e){return e&&0==e.indexOf("data:")},n.generateUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},n.isMobile=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},n.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},n.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},n.cloneObject=function(e){var t={};for(key in e)t[key]=e[key];return t},n.hashCode=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},n.loadTrackSrc=function(e,t,i,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){e.decodeAudioData(r.response,function(e){i(e)},function(e){console.error(e)})},n&&(r.onprogress=function(e){var t=e.loaded/e.total;n(t)}),r.send()},n.isPow2=function(e){return 0==(e&e-1)},n.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},n.isIFrame=function(){try{return window.self!==window.top}catch(e){return!0}},n.getQueryParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},n.isWebGLEnabled=function(){var e=document.createElement("canvas");try{gl=e.getContext("webgl")}catch(e){gl=null}if(null==gl)try{gl=e.getContext("experimental-webgl"),experimental=!0}catch(e){gl=null}return!!gl},n.clone=function(e){return JSON.parse(JSON.stringify(e))},n.hypot=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},n.isIE11=function(){return navigator.userAgent.match(/Trident/)},n.getRectCenter=function(e){return new THREE.Vector2(e.x+e.width/2,e.y+e.height/2)},n.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},n.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},n.isIOS9OrLess=function(){if(!n.isIOS())return!1;var e=navigator.userAgent.match(/(iPhone|iPad|iPod) OS ([\d_]+)/);if(!e)return!1;var t=e[e.length-1];return parseFloat(t)<=9},n.getExtension=function(e){return e.split(".").pop().split("?")[0]},n.createGetParams=function(e){var t="?";for(var i in e){t+=i+"="+e[i]+"&"}return t.substring(0,e.length-2),t},n.sendParentMessage=function(e){window.parent&&parent.postMessage(e,"*")},n.parseBoolean=function(e){return"false"!=e&&0!=e&&("true"==e||1==e||!!e)},n.relativeToAbsolutePath=function(e,t){for(var i=e.split("/"),n=t.split("/"),r=0;r<n.length;r++)"."!=n[r]&&(".."==n[r]?i.pop():i.push(n[r]));return i.join("/")},n.isPathAbsolute=function(e){return!/^(?:\/|[a-z]+:\/\/)/.test(e)},n.isEmptyObject=function(e){return 0==Object.getOwnPropertyNames(e).length},n.isDebug=function(){return n.parseBoolean(n.getQueryParameter("debug"))},n.getCurrentScript=function(){return document.currentScript||console.warn("This browser does not support document.currentScript. Trying fallback."),document.currentScript||document.scripts[document.scripts.length-1]},t.exports=n},{}],46:[function(e,t,i){t.exports={HLS:1,DASH:2,VIDEO:3}},{}]},{},[38]);